// ==UserScript==
// @name                Autoclear ChatGPT History
// @name:af             Verwyder ChatGPT Geskiedenis üï∂Ô∏è
// @name:am             ·â†·â∞·àª·àà ChatGPT ·åâ·ã≥·ãÆ ·àõ·åç·äò·âµ üï∂Ô∏è
// @name:ar             ŸÖÿ≥ÿ≠ ÿ™ÿßÿ±ŸäÿÆ ChatGPT üï∂Ô∏è
// @name:az             ChatGPT Tarixini T…ômizl…ôyin üï∂Ô∏è
// @name:be             –ê—á—ã—Å—Ü—ñ—Ü—å –≥—ñ—Å—Ç–æ—Ä—ã—é ChatGPT üï∂Ô∏è
// @name:bem            Lekeni ChatGPT History üï∂Ô∏è
// @name:bg             –ò–∑—á–∏—Å—Ç–µ—Ç–µ ChatGPT –ò—Å—Ç–æ—Ä–∏—è üï∂Ô∏è
// @name:bn             ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶ú‡¶ø‡¶™‡¶ø‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶® üï∂Ô∏è
// @name:bo             ChatGPT ‡Ω¶‡æê‡Ωë‡ºã‡Ωë‡Ωº‡Ωì‡ºã‡Ωö‡Ω¢‡ºã‡Ωñ‡Ωü‡Ωº‡ºç üï∂Ô∏è
// @name:bs             Obri≈°i ChatGPT historiju üï∂Ô∏è
// @name:ca             Esborra l'historial de ChatGPT üï∂Ô∏è
// @name:ceb            Autoclear ChatGPT Kasaysayan üï∂Ô∏è
// @name:ckb            ÿ®ÿ≥⁄ï€ïŸà€ï€å ŸÖ€é⁄òŸàŸà€å ChatGPT üï∂Ô∏è
// @name:cs             Vymazat ChatGPT Historii üï∂Ô∏è
// @name:cy             Clirio Hanes ChatGPT üï∂Ô∏è
// @name:da             Ryd ChatGPT Historik üï∂Ô∏è
// @name:de             ChatGPT-Verlauf l√∂schen üï∂Ô∏è
// @name:dv             ChatGPT ﬁÄﬁ®ﬁêﬁ∞ﬁåﬁ™ﬁÜﬁ™ﬁÉﬁ™ﬁÇﬁ∞ ﬁäﬁ™ﬁÄﬁ¨ﬁàﬁ≠ﬁÇﬁ© üï∂Ô∏è
// @name:dz             ChatGPT ‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡ºã‡Ω†‡Ωñ‡Ωë‡ºã‡Ωñ‡ΩÖ‡Ω¥‡ºã üï∂Ô∏è
// @name:el             ŒîŒπŒ±Œ≥œÅŒ±œÜŒÆ ŒôœÉœÑŒøœÅŒπŒ∫Œøœç ChatGPT üï∂Ô∏è
// @name:eo             Forvi≈ùi ChatGPT Historion üï∂Ô∏è
// @name:es             Borrar Historial de ChatGPT üï∂Ô∏è
// @name:et             Kustuta ChatGPT Ajalugu üï∂Ô∏è
// @name:eu             Ezabatu ChatGPT Historia üï∂Ô∏è
// @name:fa             Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿ™ÿßÿ±€åÿÆ⁄ÜŸá ChatGPT üï∂Ô∏è
// @name:fi             Poista ChatGPT:n historia üï∂Ô∏è
// @name:fo             Strika ChatGPT S√∏gu üï∂Ô∏è
// @name:fr             Effacer l'historique de ChatGPT üï∂Ô∏è
// @name:fr-CA          Effacer l'historique de ChatGPT üï∂Ô∏è
// @name:gd             L√πghdaich Eachdraidh ChatGPT üï∂Ô∏è
// @name:gl             Limpar Historial de ChatGPT üï∂Ô∏è
// @name:gu             ‡™Ü‡™™‡´ã ChatGPT ‡™á‡™§‡™ø‡™π‡™æ‡™∏ üï∂Ô∏è
// @name:haw            KƒÅpaki KƒÅko ªo i ka Mo ªolelo o ChatGPT üï∂Ô∏è
// @name:he             ◊û◊ó◊ß ◊ê◊™ ◊î◊ô◊°◊ò◊ï◊®◊ô◊ô◊™ ChatGPT üï∂Ô∏è
// @name:hi             ChatGPT ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§ï‡•ã ‡§π‡§ü‡§æ‡§è‡§Ç üï∂Ô∏è
// @name:hr             Izbri≈°i ChatGPT Povijest üï∂Ô∏è
// @name:ht             Efase ChatGPT Istwa üï∂Ô∏è
// @name:hu             ChatGPT El≈ëzm√©nyek T√∂rl√©se üï∂Ô∏è
// @name:hy             ’ã’∂’ª’•’¨ ChatGPT-’´ ’ä’°’ø’¥’∏÷Ç’©’µ’∏÷Ç’∂’® üï∂Ô∏è
// @name:id             Hapus Riwayat ChatGPT üï∂Ô∏è
// @name:is             Ey√∞a ChatGPT Saga üï∂Ô∏è
// @name:it             Cancella Cronologia ChatGPT üï∂Ô∏è
// @name:ja             ChatGPT „ÅÆÂ±•Ê≠¥„ÇíÂâäÈô§„Åô„Çã üï∂Ô∏è
// @name:jv             Hapus Riwayat ChatGPT üï∂Ô∏è
// @name:ka             ChatGPT-·Éò·É° ·Éò·É°·É¢·Éù·É†·Éò·Éò·É° ·Éí·Éê·É°·É£·É§·Éó·Éê·Éï·Éî·Éë·Éê üï∂Ô∏è
// @name:kab            Sken ChatGPT Tam…£arit üï∂Ô∏è
// @name:kk             ChatGPT –¢–∞—Ä–∏—Ö—ã–Ω –ñ–æ—é üï∂Ô∏è
// @name:km             ·ûõ·ûª·ûî·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑·ûü·û∂·ûü·üí·ûö·üí·ûè ChatGPT üï∂Ô∏è
// @name:kn             ChatGPT ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤≥‡≤ø‡≤∏‡≤ø üï∂Ô∏è
// @name:ko             ChatGPT Í∏∞Î°ù ÏßÄÏö∞Í∏∞ üï∂Ô∏è
// @name:ku             √áavkaniya ChatGPT√™ Paqij bike üï∂Ô∏è
// @name:ky             ChatGPT –¢–∞—Ä—ã—Ö—ã–Ω –ñ–æ–∫ –ö—ã–ª üï∂Ô∏è
// @name:la             Eximitte Historiam ChatGPT üï∂Ô∏è
// @name:lb             L√§schen ChatGPT Geschicht üï∂Ô∏è
// @name:lo             ‡∫•‡∫∂‡∫ö‡∫ö‡∫±‡∫ô‡∫î‡∫≤‡∫ï‡∫¥‡∫ô‡∫°‡∫±‡∫Å‡∫™‡∫∞‡∫ö‡∫±‡∫ö ChatGPT üï∂Ô∏è
// @name:lt             I≈°valyti ChatGPT IstorijƒÖ üï∂Ô∏è
// @name:lv             Notƒ´rƒ´t ChatGPT Vƒìsturi üï∂Ô∏è
// @name:mg             Mamafa ny ChatGPT Historique üï∂Ô∏è
// @name:mi             Muku ChatGPT Hƒ´tori üï∂Ô∏è
// @name:mk             –ò–∑–±—Ä–∏—à–∏ –≥–æ –ò—Å—Ç–æ—Ä–∏—ò–∞—Ç–∞ –Ω–∞ ChatGPT üï∂Ô∏è
// @name:ml             ‡¥ö‡¥æ‡¥±‡µç‡¥±‡µç‚Äå‡¥ú‡¥ø‡¥™‡¥ø‡¥ü‡¥ø ‡¥ö‡¥∞‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥Æ‡¥æ‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥ï üï∂Ô∏è
// @name:mn             ChatGPT –¢“Ø“Ø—Ö–∏–π–≥ —É—Å—Ç–≥–∞—Ö üï∂Ô∏è
// @name:ms             Padam Sejarah ChatGPT üï∂Ô∏è
// @name:mt             ƒ¶assar It-Twaƒßƒßil ChatGPT üï∂Ô∏è
// @name:my             ·ÄÜ·ÄÄ·Ä∫·Äú·ÄÄ·Ä∫ ChatGPT ·Äû·Äô·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Äª·ÄÄ·Ä∫·Äï·ÄÖ·Ä∫·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫ üï∂Ô∏è
// @name:ne             Autoclear ChatGPT ‡§á‡§§‡§ø‡§π‡§æ‡§∏ üï∂Ô∏è
// @name:nl             Wis ChatGPT Geschiedenis üï∂Ô∏è
// @name:no             Autoclear ChatGPT Historie üï∂Ô∏è
// @name:ny             Tikalonso ChatGPT Chisulo üï∂Ô∏è
// @name:pa             ‡®ö‡©à‡®ü‡®ú‡©Ä‡®™‡©Ä‡®ü‡©Ä ‡®á‡®§‡®ø‡®π‡®æ‡®∏ ‡®Æ‡®ø‡®ü‡®æ‡®ì üï∂Ô∏è
// @name:pap            Bula Historia di ChatGPT üï∂Ô∏è
// @name:pl             Wyczy≈õƒá Historiƒô ChatGPT üï∂Ô∏è
// @name:ps             ÿØ ChatGPT ÿØ ÿ™ÿßÿ±€åÿÆ Ÿæÿß⁄©ŸàŸÑ üï∂Ô∏è
// @name:pt             Limpar Hist√≥rico do ChatGPT üï∂Ô∏è
// @name:pt-BR          Limpar Hist√≥rico do ChatGPT üï∂Ô∏è
// @name:rn             Kwihesha ChatGPT Byinshi üï∂Ô∏è
// @name:ro             »òterge»õi Istoricul ChatGPT üï∂Ô∏è
// @name:ru             –û—á–∏—Å—Ç–∏—Ç—å –ò—Å—Ç–æ—Ä–∏—é ChatGPT üï∂Ô∏è
// @name:rw             Fata ChatGPT Itangazo üï∂Ô∏è
// @name:sg             Mbama ChatGPT Makumbe üï∂Ô∏è
// @name:si             ‡∂±‡∑ê‡∑Ä‡∂≠ ‡∑É‡∂Ç‡∑Ä‡∑ö‡∂Ø‡∑ì ChatGPT ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ üï∂Ô∏è
// @name:sk             Vyma≈æte ChatGPT Hist√≥riu üï∂Ô∏è
// @name:sl             Poƒçisti Zgodovino ChatGPT üï∂Ô∏è
// @name:sm             Masi ChatGPT Fa ªaipoipoga üï∂Ô∏è
// @name:sn             Tirisa ChatGPT Chiremba üï∂Ô∏è
// @name:so             Ka Saar Tareenka ChatGPT üï∂Ô∏è
// @name:sr             –û–±—Ä–∏—à–∏ –∏—Å—Ç–æ—Ä–∏—ò—É ChatGPT-–∞ üï∂Ô∏è
// @name:sv             Rensa ChatGPT Historik üï∂Ô∏è
// @name:sw             Futa Historia ya ChatGPT üï∂Ô∏è
// @name:ta             ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡ÆÖ‡Æ¥‡Æø‡Æï‡Øç‡Æï ‡Æö‡Øá‡Æü‡Øç‡Æú‡Æø‡Æ™‡Æø‡Æü‡Æø ‡Æµ‡Æ∞‡Æ≤‡Ææ‡Æ±‡Øç‡Æ±‡Øà üï∂Ô∏è
// @name:te             ChatGPT ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞‡∞®‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡±Å üï∂Ô∏è
// @name:tg             –¢–æ–∑–∞–∏—à–∏ –∫–æ—Ä“≥–æ–∏ ChatGPT üï∂Ô∏è
// @name:th             ‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ChatGPT üï∂Ô∏è
// @name:ti             ·àù·à≠·åç·åã·åΩ ChatGPT ·ä£·å∏·ãì·ã≠ ·çà·å•·à≠ üï∂Ô∏è
// @name:tk             ChatGPT Tarixini A√Ωyr üï∂Ô∏è
// @name:tn             Futa ChatGPT Tlhahlobo üï∂Ô∏è
// @name:to             Fakatonu ChatGPT History üï∂Ô∏è
// @name:tpi            Kolim ChatGPT Stori üï∂Ô∏è
// @name:tr             ChatGPT Ge√ßmi≈üi Temizle üï∂Ô∏è
// @name:uk             –û—á–∏—Å—Ç–∏—Ç–∏ –Ü—Å—Ç–æ—Ä—ñ—é ChatGPT üï∂Ô∏è
// @name:ur             ChatGPT ⁄©€å ÿ™ÿßÿ±€åÿÆ ÿµÿßŸÅ ⁄©ÿ±€å⁄∫ üï∂Ô∏è
// @name:uz             ChatGPT Tarixini Tozalash üï∂Ô∏è
// @name:vi             X√≥a L·ªãch S·ª≠ ChatGPT üï∂Ô∏è
// @name:xh             Qhipha ChatGPT Isaziso üï∂Ô∏è
// @name:yi             ◊ï◊ô◊°◊û◊¢◊ß◊ü ◊ò◊©◊ê÷∑◊ò◊í◊§÷º◊ò ◊í◊¢◊©◊ô◊õ◊ò◊¢ üï∂Ô∏è
// @name:zh             Ëá™Âä®Ê∏ÖÈô§ ChatGPT ÂéÜÂè≤ËÆ∞ÂΩï üï∂Ô∏è
// @name:zh-CN          Ëá™Âä®Ê∏ÖÈô§ ChatGPT ÂéÜÂè≤ËÆ∞ÂΩï üï∂Ô∏è
// @name:zh-HK          Ëá™Âä®Ê∏ÖÈô§ ChatGPT ÂéÜÂè≤ËÆ∞ÂΩï üï∂Ô∏è
// @name:zh-SG          Ëá™Âä®Ê∏ÖÈô§ ChatGPT ÂéÜÂè≤ËÆ∞ÂΩï üï∂Ô∏è
// @name:zh-TW          Ëá™Âä®Ê∏ÖÈô§ ChatGPT ÂéÜÂè≤ËÆ∞ÂΩï üï∂Ô∏è
// @name:zu             Sula ChatGPT Isifundo üï∂Ô∏è
// @description         Auto-clears chat history when visiting chatgpt.com
// @description:af      Skoonmaak Chat Geskiedenis wanneer jy chatgpt.com besoek
// @description:am      ·ã® chatgpt.com ·å∏·àÉ·ã≠ ·â≥·ä≠·à≤·äï ·â†·àõ·åç·äò·âµ ·â≥·ä®·àà·ãç
// @description:ar      ŸäŸÇŸàŸÖ ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß ÿ®ŸÖÿ≥ÿ≠ ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿßÿ™ ÿπŸÜÿØ ÿ≤Ÿäÿßÿ±ÿ© chatgpt.com
// @description:az      chatgpt.com-a ged…ônd…ô avtomatik olaraq s√∂hb…ôt tarixini t…ômizl…ôyir
// @description:be      –ê—û—Ç–∞–º–∞—Ç—ã—á–Ω–∞ –∞—á—ã—à—á–∞–µ –≥—ñ—Å—Ç–æ—Ä—ã—é —á–∞—Ç–∞ –ø—Ä—ã –Ω–∞–≤–µ–¥–≤–∞–Ω–Ω—ñ chatgpt.com
// @description:bem     Chibwezache Mphindi Zochitika Pamene Kumatemba chatgpt.com
// @description:bg      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å—Ç–≤–∞ —á–∞—Ç –∏—Å—Ç–æ—Ä–∏—è—Ç–∞ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–µ –Ω–∞ chatgpt.com
// @description:bn      ‡¶Ø‡¶ñ‡¶® chatgpt.com ‡¶™‡¶∞‡¶ø‡¶¶‡¶∞‡ßç‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßá ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßá
// @description:bo      ‡Ωë‡Ωî‡Ω∫‡Ω¢‡ºã‡Ωì‡ºã chatgpt.com ‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω§‡Ωë‡ºã‡Ω†‡Ωë‡Ω≤‡ºã‡Ω£‡Ω¥‡ºã ‡Ω¶‡æ§‡æ±‡Ωº‡Ωë‡ºã‡Ω°‡Ωº‡Ωë‡ºã‡Ωò‡Ω≤‡ºã‡Ω†‡Ωë‡Ω≤‡ºã‡Ωñ‡Ω£‡æü‡ºã‡Ωò‡Ω≤‡ºã‡Ωñ‡Ωü‡Ωº‡ºç
// @description:bs      Automatski bri≈°e istoriju chata prilikom posjete chatgpt.com
// @description:ca      S'elimina autom√†ticament l'historial de xats en visitar chatgpt.com
// @description:ceb     Automatic gidut-ana sa kasaysayan sa chat sa pagbisita sa chatgpt.com
// @description:ckb     ÿØŸáÿ≥ÿ™⁄©ÿßÿ±€å⁄©ÿ±ÿØŸÜ€å ŸÖ€é⁄òŸàŸà€å ⁄ØŸÅÿ™Ÿà⁄Ø€Ü⁄©ÿßŸÜ ÿÆ€Ü⁄©ÿßÿ±ÿßŸÜŸá ÿ®€Ü ÿ≥€ïÿ±ÿØÿßŸÜ€å chatgpt.com
// @description:cs      Automaticky vyma≈æe historii chatu p≈ôi n√°v≈°tƒõvƒõ chatgpt.com
// @description:cy      Mae'n glirio hanes sgwrs yn awtomatig wrth ymweld √¢ chatgpt.com
// @description:da      Renser automatisk chatloggen ved bes√∏g p√• chatgpt.com
// @description:de      L√∂scht den Chatverlauf automatisch beim Besuch von chatgpt.com
// @description:dv      chatgpt.com ﬁáﬁ¨ﬁÜﬁ¶ﬁáﬁ™ﬁÇﬁ∞ﬁâﬁ¶ﬁãﬁ™ﬁéﬁ¨ ﬁóﬁ¨ﬁÜﬁ™ﬁâﬁ™ ﬁÄﬁ™ﬁÉﬁ®ﬁÄﬁ¶ﬁáﬁ∞ﬁãﬁ¶ﬁàﬁßﬁÇﬁ¨ ﬁóﬁ¶ﬁáﬁ®ﬁÇﬁ∞ﬁÜﬁ™ﬁÉﬁ≠
// @description:dz      ‡Ω†‡Ωõ‡Ω¥‡ΩÇ‡Ω¶‡ºã‡Ωò‡Ω≤‡ΩÇ‡ºã‡Ω†‡Ωë‡Ω≤‡ºã‡Ω£‡Ω¥‡ºã chatgpt.com ‡Ω†‡ΩÇ‡æ≤‡Ω∫‡Ω£‡ºã‡Ωñ‡Ω§‡Ωë‡ºã‡Ω¢‡Ωº‡ΩÇ‡Ω¶‡ºã‡Ωñ‡Ω¶‡æê‡æ±‡Ω∫‡Ωë‡ºã‡Ω°‡Ωº‡Ωë‡ºç
// @description:el      ŒëœÖœÑœåŒºŒ±œÑŒ∑ Œ¥ŒπŒ±Œ≥œÅŒ±œÜŒÆ ŒπœÉœÑŒøœÅŒπŒ∫Œøœç œÉœÖŒΩŒøŒºŒπŒªŒØŒ±œÇ Œ∫Œ±œÑŒ¨ œÑŒ∑ŒΩ ŒµœÄŒØœÉŒ∫ŒµœàŒ∑ œÉœÑŒø chatgpt.com
// @description:eo      Memorigo de la babilado a≈≠tomate malaperas dum vizito ƒâe chatgpt.com
// @description:es      Borra autom√°ticamente el historial de chat al visitar chatgpt.com
// @description:et      Kustutab automaatselt vestluse ajaloo, kui k√ºlastate saiti chatgpt.com
// @description:eu      Berezgaitasunez ezabatzen du txataren historia chatgpt.com bisitatzen denean
// @description:fa      Ÿæÿß⁄© ⁄©ÿ±ÿØŸÜ ÿÆŸàÿØ⁄©ÿßÿ± ÿ™ÿßÿ±€åÿÆ⁄ÜŸá ⁄Üÿ™ ÿØÿ± ŸáŸÜ⁄ØÿßŸÖ ÿ®ÿßÿ≤ÿØ€åÿØ ÿßÿ≤ chatgpt.com
// @description:fi      Poistaa keskusteluhistorian automaattisesti k√§ydess√§ chatgpt.comissa
// @description:fo      Auto-rensar spjall s√∏guna t√° t√∫ vitjar chatgpt.com
// @description:fr      Efface automatiquement l'historique des discussions lors de la visite de chatgpt.com
// @description:fr-CA   Efface automatiquement l'historique des discussions lors de la visite de chatgpt.com
// @description:gd      Thoir aire bheagachaidh air eachdraidh na c√≤mhraidh nuair a tha thu a' tadhal air chatgpt.com
// @description:gl      Limpa autom√°ticamente o historial do chat ao visitar chatgpt.com
// @description:gu      chatgpt.com ‡™Æ‡´Å‡™ï‡´á ‡™õ‡´á ‡™®‡™æ‡™§‡´Ä‡™ú‡´á ‡™ú‡´ç‡™û‡™æ‡™®‡™µ‡™∞‡´ç‡™ß‡™ï ‡™ö‡´á‡™ü ‡™®‡´ã ‡™á‡™§‡™ø‡™π‡™æ‡™∏
// @description:haw     MƒÅlama haku  ªino ªino pƒÅhana ho ªohƒÅnau mai ana i chatgpt.com
// @description:he      ◊û◊†◊ß◊î ◊ë◊ê◊ï◊§◊ü ◊ê◊ï◊ò◊ï◊û◊ò◊ô ◊ê◊™ ◊î◊ô◊°◊ò◊ï◊®◊ô◊ô◊™ ◊î◊¶'◊ê◊ò ◊ë◊¢◊™ ◊ë◊ô◊ß◊ï◊® ◊ë-chatgpt.com
// @description:hi      chatgpt.com ‡§™‡§∞ ‡§Ü‡§µ‡§∞‡•ç‡§§‡§ø‡§§ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§ö‡•à‡§ü ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡§æ‡§´ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
// @description:hr      Automatski bri≈°e povijest razgovora prilikom posjeta chatgpt.com
// @description:ht      Auto-efase istwa chat la l√® vizite chatgpt.com
// @description:hu      Automatikusan t√∂rli a cseveg√©s el≈ëzm√©nyeit a chatgpt.com l√°togat√°sakor
// @description:hy      ’ä’°’ø’¥’∏÷Ç’©’µ’∏÷Ç’∂’® ’´’∂÷Ñ’∂’°’∑’≠’°’ø’°’∂÷Ñ’°’µ’´’∂ ’¥’°÷Ñ÷Ä’∏÷Ç’¥ ’ß chatgpt.com ’°’µ÷Å’•’¨’•’¨’∏÷Ç’∂ ’§’•’∫’´
// @description:id      Menghapus otomatis riwayat obrolan saat mengunjungi chatgpt.com
// @description:is      Hreinsar sj√°lfvirkt spjallsh√∂nnun √æegar heims√≥kn er ger√∞ √° chatgpt.com
// @description:it      Cancella automaticamente la cronologia della chat durante la visita a chatgpt.com
// @description:ja      chatgpt.com „ÇíËÆø„Çå„ÇãÈôÖ„Å´Ëá™Âä®ÁöÑ„Å´„ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥„ÇíÊ∂àÂéª„Åó„Åæ„Åô
// @description:jv      Otomatis ngapus riwayat obrolan nalika ngunjungi chatgpt.com
// @description:ka      ·Éó·Éê·Éï·Éò·É°·Éò·Éó·Éê·Éì ·É¨·Éê·É®·Éö·Éò·É° ·É©·Éê·Éó·Éò·É° ·Éò·É°·É¢·Éù·É†·Éò·Éê·É° chatgpt.com-·Éñ·Éî ·Éõ·Éù·Éõ·É°·Éê·ÉÆ·É£·É†·Éî·Éë·Éò·É° ·Éì·É†·Éù·É°
// @description:kab     Ire…£san Ayren Tisstrir ChatGPT I yur-s achatgpt.com
// @description:kk      chatgpt.com-–¥—ã –∫”©—Ä—É–≥–µ –±–∞—Å—Ç–∞–ø –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ —á–∞—Ç —Ç–∞—Ä–∏—Ö—ã–Ω –∂–æ—é
// @description:km      ·ûõ·ûª·ûî·ûü·üÅ·ûú·û∂·ûÄ·ûò·üí·ûò·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑·ûÄ·û∂·ûö·ûé·üç·ûá·ûá·üÇ·ûÄ·ûñ·û∏·ûñ·üê·ûè·üå·ûò·û∂·ûì·ûò·ûì·ûª·ûü·üí·ûü·ûÄ·ûì·üí·ûõ·ûÑ·ûë·üÖ·ûÄ·û∂·ûì·üã chatgpt.com
// @description:kn      chatgpt.com ‡≤∏‡≤Ç‡≤¶‡≤∞‡≥ç‡≤∂‡≤ø‡≤∏‡≤ø‡≤¶‡≤æ‡≤ó ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤ö‡≤æ‡≤ü‡≥ç ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤≥‡≤ø‡≤∏‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü
// @description:ko      chatgpt.com Î∞©Î¨∏ Ïãú Ï±ÑÌåÖ Í∏∞Î°ùÏùÑ ÏûêÎèôÏúºÎ°ú ÏßÄÏõÅÎãàÎã§
// @description:ku      √á√™kirina historyaya chat√™ di hemb√™zkirina chatgpt.com de
// @description:ky      chatgpt.com –±–∞—Ä—ã—Å—ã–Ω–¥–∞ —Ç“Ø—Ä –∫–∞—Ç –∂–∞–∑–º–∞–ª–∞—Ä—ã–Ω –∞–≤—Ç–æ–º–∞—Ç—Ç—ã–∫ —Ç“Ø—Ä–¥–µ –∂–æ–∫ —ç—Ç–∏—à
// @description:la      Automate chat historia clearum cum chatgpt.com adibvisam
// @description:lb      L√§scht automatesch d'Chat-Geschicht w√©ini een chatgpt.com besicht
// @description:lo      ‡∫•‡∫∂‡∫ö‡∫õ‡∫∞‡∫ß‡∫±‡∫î‡∫Å‡∫≤‡∫ô‡∫™‡∫ª‡∫ô‡∫ó‡∫∞‡∫ô‡∫≤‡ªÉ‡∫ô‡∫ñ‡ªâ‡∫≤‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫ä‡∫ª‡∫° chatgpt.com
// @description:lt      Automati≈°kai i≈°valo pokalbi≈≥ istorijƒÖ apsilankius chatgpt.com
// @description:lv      AutomƒÅtiski notƒ´ra ƒçata vƒìsturi, apmeklƒìjot chatgpt.com
// @description:mg      Mamafa tsy ampy lalao ny tetikasa vaovao rehefa mitovy amin'ny chatgpt.com
// @description:mi      Auto-k≈çmata e whakakore i te hƒ´tori whakawhiti k≈çrero i te toro ki te chatgpt.com
// @description:mk      –ê–≤—Ç–æ–º–∞—Ç—Å–∫–∏ –±—Ä–∏—à–µ –∏—Å—Ç–æ—Ä–∏—ò–∞ –Ω–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ—Ç –ø—Ä–∏ –ø–æ—Å–µ—Ç–∞ –Ω–∞ chatgpt.com
// @description:ml      chatgpt.com ‡¥∏‡¥®‡µç‡¥¶‡µº‡¥∂‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Æ‡µç‡¥™‡µã‡µæ ‡¥ö‡¥æ‡¥±‡µç‡¥±‡µç ‡¥ö‡¥∞‡¥ø‡¥§‡µç‡¥∞‡¥Ç ‡¥ì‡¥ü‡µç‡¥ü‡µã-‡¥™‡¥ø‡¥®‡µç‡¥§‡µÅ‡¥£‡¥ö‡µç‡¥ö‡µç ‡¥Ö‡¥¥‡¥ø‡¥ö‡µç‡¥ö‡µÅ‡¥µ‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
// @description:mn      chatgpt.com-–æ–æ—Å –æ—Ä–∂ –∏—Ä—ç—Ö “Ø–µ–¥ —á–∞—Ç—ã–Ω —Ç“Ø“Ø—Ö–∏–π–≥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ü—ç–≤—ç—Ä–ª—ç–Ω—ç
// @description:ms      Membersihkan sejarah perbualan secara automatik apabila melawat chatgpt.com
// @description:mt      Jƒßassar awtomatikament il-kronoloƒ°ija tal-chat meta ≈º≈ºur chatgpt.com
// @description:my      chatgpt.com ·ÄÄ·Ä≠·ÄØ·Äû·ÄΩ·Ä¨·Ä∏·Äñ·Ä≠·ÄØ·Ä∑·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ ·ÄÖ·ÄÄ·Ä¨·Ä∏·Äù·Äæ·ÄÄ·Ä∫·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Ä°·Äú·Ä≠·ÄØ·Äú·Ä≠·ÄØ·Äõ·ÄΩ·Ä±·Ä∏·ÄÅ·Äª·Äö·Ä∫·Äõ·Äî·Ä∫ ·Ä°·Äú·ÄΩ·Äö·Ä∫·Äê·ÄÄ·Ä∞·Äï·Äº·Äî·Ä∫·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äë·Ä¨·Ä∏·Äû·Ää·Ä∫
// @description:ne      chatgpt.com ‡§Æ‡§æ ‡§Ü‡§è‡§ï‡•ã‡§Æ‡§æ ‡§ö‡•ç‡§Ø‡§æ‡§ü ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™‡§Æ‡§æ ‡§π‡§ü‡§æ‡§â‡§Å‡§õ
// @description:nl      Wis automatisch de chatgeschiedenis bij een bezoek aan chatgpt.com
// @description:no      Sletter automatisk samtalehistorikk ved bes√∏k p√• chatgpt.com
// @description:ny      Kwatsa makina m'chipatala cha chat pamene kuwona chatgpt.com
// @description:pa      chatgpt.com ‡®¶‡©á ‡®¶‡©å‡®∞‡®æ‡®® ‡®ö‡©à‡®ü ‡®á‡®§‡®ø‡®π‡®æ‡®∏ ‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï ‡®ï‡®≤‡©Ä‡®Ö‡®∞ ‡®π‡©ã ‡®ú‡®æ‡®Ç‡®¶‡®æ ‡®π‡©à
// @description:pap     Limpieza autom√°tico di historial di chat na bishita chatgpt.com
// @description:pl      Automatycznie czy≈õci historiƒô czatu podczas odwiedzania chatgpt.com
// @description:ps      ÿÆŸàÿØ⁄©ÿßÿ± ÿ™ÿßÿ±€åÿÆ⁄ÜŸá ⁄Üÿ™ Ÿæÿß⁄© ⁄©ŸàŸÑ ŸæŸá chatgpt.com ⁄©⁄ö€ê
// @description:pt      Limpa automaticamente o hist√≥rico de bate-papo ao visitar chatgpt.com
// @description:pt-BR   Limpa automaticamente o hist√≥rico de bate-papo ao visitar chatgpt.com
// @description:rn      Guteza inkuru y'ikarita y'imibare igihe utanga chatgpt.com
// @description:ro      »òterge automat istoricul chat-ului la vizitarea chatgpt.com
// @description:ru      –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ chatgpt.com
// @description:rw      Inyunganira amakuru ya chat inyuma yuko umaze guhamagara chatgpt.com
// @description:sg      Auto-kura kolibatalu ya misamba wakari karika kut…îb…î chatgpt.com
// @description:si      chatgpt.com ‡∑Ä‡∑ô‡∂≠ ‡∂¥‡∑ê‡∂∫ ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑É‡∑ä‡∑Ä‡∂∫‡∂Ç‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂∫‡∂≠‡∑è‡∑Ä‡∂∫‡∑í‡∂±‡∑ä ‡∂†‡∑ê‡∂ß‡∑ä ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∂ö‡∑í‡∂ª‡∑ì‡∂∏ ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑î‡∂∏
// @description:sk      Automaticky vymaz√°va hist√≥riu chatu pri n√°v≈°teve chatgpt.com
// @description:sl      Samodejno izbri≈°e zgodovino klepeta ob obisku spletnega mesta chatgpt.com
// @description:sm      Automa i le malologa o le sootaga i luma i le chatgpt.com
// @description:sn      Inongorora chat history chinayo ipapo uchi chiri kunochinja chatgpt.com
// @description:so      Wax ka qaad chatka markii la booqdo chatgpt.com
// @description:sr      –ê—É—Ç–æ–º–∞—Ç—Å–∫–∏ –±—Ä–∏—à–µ –∏—Å—Ç–æ—Ä–∏—ò—É —á–∞—Ç–∞ –ø—Ä–∏ –ø–æ—Å–µ—Ç–∏ chatgpt.com
// @description:sv      Rensar automatiskt chattens historik vid bes√∂k p√• chatgpt.com
// @description:sw      Inaondoa historia ya mazungumzo moja kwa moja wakati wa kutembelea chatgpt.com
// @description:ta      chatgpt.com ‡ÆÖ‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡ÆÆ‡Øç ‡Æ®‡Øá‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æâ‡Æ∞‡Øà‡ÆØ‡Ææ‡Æü‡Æ≤‡Øç ‡Æµ‡Æ∞‡Æ≤‡Ææ‡Æ±‡Øà ‡Æ§‡Ææ‡Æ©‡Æø‡ÆØ‡Æô‡Øç‡Æï‡Øá ‡Æ®‡ØÄ‡Æï‡Øç‡Æï‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ
// @description:te      chatgpt.com ‡∞∏‡∞Ç‡∞¶‡∞∞‡±ç‡∞∂‡∞ø‡∞Ç‡∞ö‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞ö‡∞æ‡∞ü‡±ç ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞‡∞®‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
// @description:tg      –¢–∞—Ä–∏—Ö–∏ —á–∞—Ç—Ä–æ —Ö—É–¥–∫–æ—Ä “∑–æ–±–∞ –∫—É–Ω–µ–¥, –∫–∏ chatgpt.com —Ä–∞–≤–µ–¥
// @description:th      ‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏° chatgpt.com
// @description:ti      ·äÆ·àù·çï·ã©·â∞·à≠ ·ä•·ã®·å†·â†·âÄ ·åä·ãú chatgpt.com ·ã®·â∞·à∞·äò·ãç·äï ·âΩ·åç·à≠·äï ·ä†·àµ·çà·àç·åã·àç
// @description:tk      chatgpt.com-a ugradykda √ßat g√∂rn√º≈üini awtomatiki bi√ßimde bo≈üalt√Ωar
// @description:tn      Emucisha chat chinyakanyaka nga uwonawo chatgpt.com
// @description:to      'Oku fa'a kovi 'e he ngaahi sipoti fakamatala 'i he falelotu ki he chatgpt.com
// @description:tpi     Autometik klia chat histeri long bisitim long chatgpt.com
// @description:tr      chatgpt.com'u ziyaret ettiƒüinizde sohbet ge√ßmi≈üini otomatik olarak temizler
// @description:uk      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—á–∏—â–∞—î —ñ—Å—Ç–æ—Ä—ñ—é —á–∞—Ç—É –ø—Ä–∏ –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—ñ chatgpt.com
// @description:ur      chatgpt.com ⁄©€í ÿØŸàÿ±€í Ÿæÿ± ⁄Ü€åŸπ ÿ™ÿßÿ±€åÿÆ ÿÆŸàÿØ⁄©ÿßÿ± ÿ∑Ÿàÿ± Ÿæÿ± ÿµÿßŸÅ ⁄©ÿ±ÿ™ÿß €Å€í
// @description:uz      chatgpt.com saytini tashrif buyurganda chat tarixini avtomatik ravishda o'chiradi
// @description:vi      X√≥a l·ªãch s·ª≠ tr√≤ chuy·ªán t·ª± ƒë·ªông khi gh√© thƒÉm chatgpt.com
// @description:xh      Ingqalasela ihisitela le-chat uma uzithola chatgpt.com
// @description:yi      ◊®◊ï◊û◊ò ◊ì◊ô ◊§÷ø◊ï◊†◊¢◊ü ◊ì◊¢◊® ◊©◊ê÷∑◊ò ◊î◊ô◊°◊ò◊ê÷∏◊®◊ô◊¢ ◊ë◊ô◊ô ◊ë◊¢◊ñ◊ï◊ö ◊ë◊ß◊ï◊ß◊ü chatgpt.com
// @description:zh      ËÆøÈóÆ chatgpt.com Êó∂Ëá™Âä®Ê∏ÖÈô§ËÅäÂ§©ËÆ∞ÂΩï
// @description:zh-CN   ËÆøÈóÆ chatgpt.com Êó∂Ëá™Âä®Ê∏ÖÈô§ËÅäÂ§©ËÆ∞ÂΩï
// @description:zh-HK   ËÆøÈóÆ chatgpt.com Êó∂Ëá™Âä®Ê∏ÖÈô§ËÅäÂ§©ËÆ∞ÂΩï
// @description:zh-SG   ËÆøÈóÆ chatgpt.com Êó∂Ëá™Âä®Ê∏ÖÈô§ËÅäÂ§©ËÆ∞ÂΩï
// @description:zh-TW   ËÆøÈóÆ chatgpt.com Êó∂Ëá™Âä®Ê∏ÖÈô§ËÅäÂ§©ËÆ∞ÂΩï
// @description:zu      Ziba itshala lokucabanga okuzoshintshwa ngokuzenzakalelayo uma ukubuka chatgpt.com
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2025.1.4
// @license             MIT
// @icon                https://media.autoclearchatgpt.com/images/icons/openai/black/icon48.png?a8868ef
// @icon64              https://media.autoclearchatgpt.com/images/icons/openai/black/icon64.png?a8868ef
// @compatible          chrome
// @compatible          edge
// @compatible          firefox
// @compatible          opera
// @compatible          brave
// @compatible          vivaldi
// @compatible          librewolf
// @compatible          ghost
// @compatible          qq
// @match               *://chatgpt.com/*
// @match               *://chat.openai.com/*
// @connect             cdn.jsdelivr.net
// @connect             update.greasyfork.org
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.5.0/dist/chatgpt.min.js#sha256-+C0x4BOFQc38aZB3pvUC2THu+ZSvuCxRphGdtRLjCDg=
// @resource brsCSS     https://assets.aiwebextensions.com/styles/rising-stars/dist/black.min.css?v=3289404#sha256-CTj6Ndngq+TsPlNpQ6Ej39PQKSDpmxyKUFohhc91ruQ=
// @resource wrsCSS     https://assets.aiwebextensions.com/styles/rising-stars/dist/white.min.css?v=3289404#sha256-tOOIvIe6O5/x2A5E7s9kP4+zw0d4EEDfRgXQLq2KwLs=
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_getResourceText
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://update.greasyfork.org/scripts/460805/autoclear-chatgpt-history.user.js
// @updateURL           https://update.greasyfork.org/scripts/460805/autoclear-chatgpt-history.meta.js
// @homepageURL         https://www.autoclearchatgpt.com
// @supportURL          https://support.autoclearchatgpt.com
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// Documentation: https://docs.autoclearchatgpt.com
// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org
//  ¬© 2023‚Äì2025 KudoAI & contributors under the MIT license.

(async () => {

    // Init ENV context
    const env = {
        browser: { language: chatgpt.getUserLanguage(), isMobile: chatgpt.browser.isMobile() },
        scriptManager: {
            name: (() => { try { return GM_info.scriptHandler } catch (err) { return 'unknown' }})(),
            version: (() => { try { return GM_info.version } catch (err) { return 'unknown' }})()
        },
        ui: { scheme: getScheme() }
    }
    env.browser.isPortrait = env.browser.isMobile && (window.innerWidth < window.innerHeight)
    env.scriptManager.supportsTooltips = env.scriptManager.name == 'Tampermonkey'
                                      && parseInt(env.scriptManager.version.split('.')[0]) >= 5
    const xhr = typeof GM != 'undefined' && GM.xmlHttpRequest || GM_xmlhttpRequest

    // Init APP data
    const app = {
        version: GM_info.script.version, configKeyPrefix: 'autoclearChatGPThistory',
        chatgptJSver: /chatgpt\.js@([\d.]+)/.exec(GM_info.scriptMetaStr)[1], urls: {},
        latestAssetCommitHash: '7dae88a' // for cached app.json + messages.json + navicon in toggles.sidebar.insert()
    }
    app.urls.assetHost = `https://cdn.jsdelivr.net/gh/adamlui/autoclear-chatgpt-history@${app.latestAssetCommitHash}`
    const remoteAppData = await new Promise(resolve => xhr({
        method: 'GET', url: `${app.urls.assetHost}/app.json`, onload: resp => resolve(JSON.parse(resp.responseText)) }))
    Object.assign(app, { ...remoteAppData, urls: { ...app.urls, ...remoteAppData.urls }})
    app.urls.update = app.urls.greasyFork.replace('https://', 'https://update.')
        .replace(/(\d+)-?([a-z-]*)$/i, (_, id, name) => `${id}/${ name || 'script' }.meta.js`)
    app.msgs = {
        appName: app.name,
        appAuthor: app.author.name,
        appDesc: 'Auto-clears chat history when visiting chatgpt.com',
        menuLabel_autoclear: 'Autoclear Chats',
        menuLabel_clearNow: 'Clear Chats Now',
        menuLabel_toggleVis: 'Toggle Visibility',
        menuLabel_modeNotifs: 'Mode Notifications',
        menuLabel_about: 'About',
        menuLabel_donate: 'Please send a donation',
        about_author: 'Author',
        about_and: '&',
        about_contributors: 'contributors',
        about_version: 'Version',
        about_poweredBy: 'Powered by',
        about_openSourceCode: 'Open source code',
        mode_autoclear: 'Auto-Clear',
        helptip_clearNow: 'Clear chat history now',
        helptip_toggleVis: 'Show Auto-Clear toggle in sidebar',
        helptip_modeNotifs: 'Show notifications when toggling modes/settings',
        notif_chatsCleared: 'Chat history cleared',
        alert_choosePlatform: 'Choose a platform',
        alert_updateAvail: 'Update available',
        alert_newerVer: 'An update to',
        alert_isAvail: 'is available',
        alert_upToDate: 'Up-to-date',
        alert_isUpToDate: 'is up-to-date',
        alert_showYourSupport: 'Show your support',
        alert_isOSS: 'is open-source software built & maintained for free through 100% volunteer efforts',
        alert_despiteAffliction: 'Despite being severely afflicted by',
        alert_longCOVID: 'long COVID',
        alert_since2020: 'since 2020',
        alert_byDonatingResults: 'by donating, you help me to continue improving, fixing bugs, adding new features, and making the software even better',
        alert_yourContrib: 'Your contribution',
        alert_noMatterSize: 'no matter the size',
        alert_directlySupports: 'directly supports my unpaid efforts to ensure this project remains free and open for all to use',
        alert_tyForSupport: 'Thank you for your support',
        btnLabel_moreAIextensions: 'More AI Extensions',
        btnLabel_rateUs: 'Rate Us',
        btnLabel_getSupport: 'Get Support',
        btnLabel_checkForUpdates: 'Check for Updates',
        btnLabel_update: 'Update',
        btnLabel_dismiss: 'Dismiss',
        link_viewChanges: 'View changes',
        state_enabled: 'enabled',
        state_disabled: 'disabled',
        state_on: 'on',
        state_off: 'off'
    }

    // LOCALIZE app.msgs for non-English users
    if (!env.browser.language.startsWith('en')) {
        const localizedMsgs = await new Promise(resolve => {
            const msgHostDir = app.urls.assetHost + '/greasemonkey/_locales/',
                  msgLocaleDir = ( env.browser.language ? env.browser.language.replace('-', '_') : 'en' ) + '/'
            let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs)  // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try original/region-stripped/EN only
                    msgHref = env.browser.language.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/([^_]+_[^_]+)_[^/]*(\/.*)/, '$1$2') // ...strip region before retrying
                            : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
        Object.assign(app.msgs, localizedMsgs)
    }

    // Init SETTINGS
    const config = {}
    const settings = {

        controls: { // displays top-to-bottom in toolbar menu
            autoclear: { type: 'toggle',
                label: app.msgs.menuLabel_autoclear, helptip: app.msgs.appDesc },
            clearNow: { type: 'action', symbol: 'üßπ',
                label: app.msgs.menuLabel_clearNow, helptip: app.msgs.helptip_clearNow },
            toggleHidden: { type: 'toggle',
                label: app.msgs.menuLabel_toggleVis, helptip: app.msgs.helptip_toggleVis },
            notifDisabled: { type: 'toggle',
                label: app.msgs.menuLabel_modeNotifs, helptip: app.msgs.helptip_modeNotifs }
        },

        load(...keys) { keys.flat().forEach(key => config[key] = GM_getValue(app.configKeyPrefix + '_' + key, false)) },

        save(key, val) { GM_setValue(app.configKeyPrefix + '_' + key, val) ; config[key] = val }
    }
    settings.load('autoclear', 'notifDisabled', 'toggleHidden')

    // Define MENU functions

    const menu = {
        ids: [], state: {
            symbols: ['‚ùå', '‚úîÔ∏è'], separator: env.scriptManager.name == 'Tampermonkey' ? ' ‚Äî ' : ': ',
            words: [app.msgs.state_off.toUpperCase(), app.msgs.state_on.toUpperCase()]
        },

        register() {

            // Add toggles
            Object.keys(settings.controls).forEach(key => {
                const settingIsEnabled = config[key] ^ /disabled|hidden/i.test(key)
                const menuLabel = `${ settings.controls[key].symbol || menu.state.symbols[+settingIsEnabled] } `
                                + settings.controls[key].label
                                + ( settings.controls[key].type == 'toggle' ? menu.state.separator
                                                                            + menu.state.words[+settingIsEnabled] : '' )
                menu.ids.push(GM_registerMenuCommand(menuLabel, () => {
                    if (settings.controls[key].type == 'toggle') {
                        settings.save(key, !config[key]) ; syncConfigToUI({ updatedKey: key })
                        notify(`${settings.controls[key].label}: ${
                            menu.state.words[+(config[key] ^ /disabled|hidden/i.test(key))]}`)
                    } else // Clear Now action
                        clearChatsAndGoHome()
                }, env.scriptManager.supportsTooltips ? { title: settings.controls[key].helptip || ' ' } : undefined))
            });

            // Add About/Donate entries
            ['about', 'donate'].forEach(entryType => menu.ids.push(GM_registerMenuCommand(
                `${ entryType == 'about' ? 'üí°' : 'üíñ' }`
                    + ` ${app.msgs[`menuLabel_${entryType}`]} ${ entryType == 'about' ? app.msgs.appName : '' }`,
                () => modals.open(entryType), env.scriptManager.supportsTooltips ? { title: ' ' } : undefined
            )))
        },

        refresh() {
            if (typeof GM_unregisterMenuCommand == 'undefined') return
            for (const id of menu.ids) { GM_unregisterMenuCommand(id) } menu.register()
        }
    }

    function updateCheck() {
        xhr({
            method: 'GET', url: app.urls.update + '?t=' + Date.now(),
            headers: { 'Cache-Control': 'no-cache' },
            onload: resp => {

                // Compare versions, alert if update found
                app.latestVer = /@version +(.*)/.exec(resp.responseText)[1]
                for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(app.version.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(app.latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) // if outdated
                        return modals.open('update', 'available')
                }

                // Alert to no update found, nav back to About
                modals.open('update', 'unavailable')
        }})
    }

    // Define FEEDBACK functions

    function notify(msg, pos = '', notifDuration = '', shadow = '') {
        if (config.notifDisabled && !msg.includes(app.msgs.menuLabel_modeNotifs)) return

        // Strip state word to append colored one later
        const foundState = menu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, pos, notifDuration, shadow || env.ui.scheme == 'dark' ? '' : 'shadow')
        const notif = document.querySelector('.chatgpt-notif:last-child')

        // Append styled state word
        if (foundState) {
            const styledStateSpan = document.createElement('span')
            styledStateSpan.style.cssText = `color: ${
                foundState == menu.state.words[0] ? '#ef4848 ; text-shadow: rgba(255,169,225,0.44) 2px 1px 5px'
                                                  : '#5cef48 ; text-shadow: rgba(255,250,169,0.38) 2px 1px 5px' }`
            styledStateSpan.append(foundState) ; notif.append(styledStateSpan)
        }
    }

    // Define MODAL functions

    const modals = {
        stack: [], // of types of undismissed modals
        class: `${app.cssPrefix}-modal`,

        alert(title = '', msg = '', btns = '', checkbox = '', width = '') { // generic one from chatgpt.alert()
            const alertID = chatgpt.alert(title, msg, btns, checkbox, width),
                  alert = document.getElementById(alertID).firstChild
            this.init(alert) // add classes + starry bg
            return alert
        },

        open(modalType, modalSubType) {
            const modal = modalSubType ? this[modalType][modalSubType]() : this[modalType]() // show modal
            this.stack.unshift(modalSubType ? `${modalType}_${modalSubType}` : modalType) // add to stack
            this.init(modal) // add classes + starry bg
            this.observeRemoval(modal, modalType, modalSubType) // to maintain stack for proper nav
        },

        init(modal) {
            if (!this.styles) this.stylize() // to init/append stylesheet
            modal.classList.add('no-user-select', this.class) ; modal.parentNode.classList.add(`${this.class}-bg`)
            fillStarryBG(modal) // add starry bg
        },

        stylize() {
            if (!this.styles) {
                this.styles = document.createElement('style') ; this.styles.id = `${this.class}-styles`
                document.head.append(this.styles)
            }
            this.styles.innerText = (
                `.no-user-select {
                    user-select: none ; -webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none }`
              + `.${this.class} {` // modals
                  + 'font-family: -apple-system, system-ui, BlinkMacSystemFont, Segoe UI, Roboto,'
                      + 'Oxygen-Sans, Ubuntu, Cantarell, Helvetica Neue, sans-serif ;'
                  + 'padding: 20px 25px 24px 25px !important ; font-size: 20px ;'
                  + `color: ${ env.ui.scheme == 'dark' ? 'white' : 'black' } !important ;`
                  + `background-image: linear-gradient(180deg, ${
                       env.ui.scheme == 'dark' ? '#99a8a6 -200px, black 200px' : '#b6ebff -296px, white 171px' }) }`
              + `.${this.class} [class*=modal-close-btn] {`
                  + 'position: absolute !important ; float: right ; top: 14px !important ; right: 16px !important ;'
                  + 'cursor: pointer ; width: 33px ; height: 33px ; border-radius: 20px }'
              + `.${this.class} [class*=modal-close-btn] svg { height: 10px }`
              + `.${this.class} [class*=modal-close-btn] path {`
                  + `${ env.ui.scheme == 'dark' ? 'stroke: white ; fill: white' : 'stroke: #9f9f9f ; fill: #9f9f9f' }}`
              + ( env.ui.scheme == 'dark' ?  // invert dark mode hover paths
                    `.${this.class} [class*=modal-close-btn]:hover path { stroke: black ; fill: black }` : '' )
              + `.${this.class} [class*=modal-close-btn]:hover { background-color: #f2f2f2 }` // hover underlay
              + `.${this.class} [class*=modal-close-btn] svg { margin: 11.5px }` // center SVG for hover underlay
              + `.${this.class} a { color: #${ env.ui.scheme == 'dark' ? '00cfff' : '1e9ebb' } !important }`
              + `.${this.class} h2 { font-weight: bold }`
              + `.${this.class} button {`
                  + '--btn-transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out ;'
                  + 'font-size: 14px ; text-transform: uppercase ;' // shrink/uppercase labels
                  + 'border-radius: 0 !important ;' // square borders
                  + 'transition: var(--btn-transition) ;' // smoothen hover fx
                      + '-webkit-transition: var(--btn-transition) ; -moz-transition: var(--btn-transition) ;'
                      + '-o-transition: var(--btn-transition) ; -ms-transition: var(--btn-transition) ;'
                  + 'cursor: pointer !important ;' // add finger cursor
                  + `border: 1px solid ${ env.ui.scheme == 'dark' ? 'white' : 'black' } !important ;`
                  + 'padding: 8px !important ; min-width: 102px }' // resize
              + `.${this.class} button:hover {` // add zoom, re-scheme
                  + 'transform: scale(1.055) ; color: black !important ;'
                  + `background-color: #${ env.ui.scheme == 'dark' ? '00cfff' : '9cdaff' } !important }`
              + ( !env.browser.isMobile ? `.${this.class} .modal-buttons { margin-left: -13px !important }` : '' )
              + `.about-em { color: ${ env.ui.scheme == 'dark' ? 'white' : 'green' } !important }`
            )
        },

        observeRemoval(modal, modalType, modalSubType) { // to maintain stack for proper nav
            const modalBG = modal.parentNode
            new MutationObserver(([mutation], obs) => {
                mutation.removedNodes.forEach(removedNode => { if (removedNode == modalBG) {
                    if (modals.stack[0].includes(modalSubType || modalType)) { // new modal not launched so nav back
                        modals.stack.shift() // remove this modal type from stack 1st
                        const prevModalType = modals.stack[0]
                        if (prevModalType) { // open it
                            modals.stack.shift() // remove type from stack since re-added on open
                            modals.open(prevModalType)
                        }
                    }
                    obs.disconnect()
                }})
            }).observe(modalBG.parentNode, { childList: true, subtree: true })
        },

        about() {

            // Show modal
            const aboutModal = modals.alert(
                `${app.symbol} ${app.msgs.appName}`, // title
                `üß† ${app.msgs.about_author}: ` // msg
                    + `<a href="${app.author.url}">${app.msgs.appAuthor}</a> ${app.msgs.about_and}`
                        + ` <a href="${app.urls.contributors}">${app.msgs.about_contributors}</a>\n`
                + `üè∑Ô∏è ${app.msgs.about_version}: <span class="about-em">${app.version}</span>\n`
                + `üìú ${app.msgs.about_openSourceCode}: `
                    + `<a href="${app.urls.gitHub}" target="_blank" rel="nopener">`
                        + app.urls.gitHub + '</a>\n'
                + `‚ö° ${app.msgs.about_poweredBy}: `
                    + `<a href="${app.urls.chatgptJS}" target="_blank" rel="noopener">chatgpt.js</a>`
                        + ` v${app.chatgptJSver}`,
                [ // buttons
                    function checkForUpdates() { updateCheck() },
                    function getSupport(){},
                    function rateUs() {},
                    function moreAIextensions(){}
                ], '', 745 // set width
            )

            // Format text
            aboutModal.querySelector('h2').style.cssText = (
                'text-align: center ; font-size: 51px ; line-height: 46px ; padding: 15px 0' )
            aboutModal.querySelector('p').style.cssText = (
                'text-align: center ; overflow-wrap: anywhere ;'
              + `margin: ${ env.browser.isPortrait ? '6px 0 -16px' : '3px 0 29px' }` )

            // Hack buttons
            aboutModal.querySelectorAll('button').forEach(btn => {
                btn.style.cssText = 'height: 58px ; min-width: 136px ; text-align: center'

                // Replace link buttons w/ clones that don't dismiss modal
                if (/support|rate|extensions/i.test(btn.textContent)) {
                    const btnClone = btn.cloneNode(true)
                    btn.parentNode.replaceChild(btnClone, btn) ; btn = btnClone
                    btn.onclick = () => modals.safeWinOpen(
                        btn.textContent.includes(app.msgs.btnLabel_getSupport) ? app.urls.support
                      : btn.textContent.includes(app.msgs.btnLabel_rateUs) ? app.urls.review.greasyFork
                      : app.urls.relatedExtensions
                    )
                }

                // Prepend emoji + localize labels
                if (/updates/i.test(btn.textContent))
                    btn.textContent = `üöÄ ${app.msgs.btnLabel_checkForUpdates}`
                else if (/support/i.test(btn.textContent))
                    btn.textContent = `üß† ${app.msgs.btnLabel_getSupport}`
                else if (/rate/i.test(btn.textContent))
                    btn.textContent = `‚≠ê ${app.msgs.btnLabel_rateUs}`
                else if (/extensions/i.test(btn.textContent))
                    btn.textContent = `ü§ñ ${app.msgs.btnLabel_moreAIextensions}`

                // Hide Dismiss button
                else btn.style.display = 'none' // hide Dismiss button
            })

            return aboutModal
        },

        donate() {

            // Show modal
            const donateModal = modals.alert(
                `üíñ ${app.msgs.alert_showYourSupport}`, // title
                    `<p>${app.msgs.appName} ${app.msgs.alert_isOSS}.</p>`
                    + `<p>${app.msgs.alert_despiteAffliction} `
                        + '<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Long_COVID">'
                            + `${app.msgs.alert_longCOVID}</a> `
                        + `${app.msgs.alert_since2020}, ${app.msgs.alert_byDonatingResults}.</p>`
                    + `<p>${app.msgs.alert_yourContrib}, <b>${app.msgs.alert_noMatterSize}</b>, `
                        + `${app.msgs.alert_directlySupports}.</p>`
                    + `<p>${app.msgs.alert_tyForSupport}!</p>`
                    + '<img src="https://cdn.jsdelivr.net/gh/adamlui/adamlui/images/siggie/'
                        + `${ env.ui.scheme == 'dark' ? 'white' : 'black' }.png" `
                        + 'style="height: 54px ; margin: 5px 0 -2px 5px"></img>'
                    + `<p>‚Äî<b><a target="_blank" rel="noopener" href="${app.author.url}">`
                        + `${app.msgs.appAuthor}</a></b>, ${app.msgs.about_author.toLowerCase()}</p>`,
                [ // buttons
                    function paypal(){},
                    function githubSponsors(){},
                    function cashApp(){},
                    function rateUs(){}
                ], '', 478 // set width
            )

            // Format text
            donateModal.querySelectorAll('p').forEach(p => // v-pad text, shrink line height
                p.style.cssText = 'padding: 8px 0 ; line-height: 20px')

            // Hack buttons
            const btns = donateModal.querySelectorAll('button')
            btns.forEach((btn, idx) => {

                // Replace link buttons w/ clones that don't dismiss modal
                if (!/dismiss/i.test(btn.textContent)) {
                    const btnClone = btn.cloneNode(true)
                    btn.parentNode.replaceChild(btnClone, btn) ; btn = btnClone
                    btn.onclick = () => modals.safeWinOpen(
                        btn.textContent == 'Cash App' ? app.urls.donate.cashApp
                      : btn.textContent == 'Github Sponsors' ? app.urls.donate.gitHub
                      : btn.textContent == 'Paypal' ? app.urls.donate.payPal
                      : app.urls.review.greasyFork
                    )
                }

                // Format buttons
                if (idx == 0) btn.style.display = 'none' // hide Dismiss button
                else {
                    btn.style.cssText = 'padding: 8px 6px !important ; margin-top: -14px ;'
                                      + ' width: 107px ; line-height: 14px'
                    if (idx == btns.length -1) // de-emphasize right-most button
                        btn.classList.remove('primary-modal-btn')
                    else if (/rate/i.test(btn.textContent)) // localize 'Rate Us' label
                        btn.textContent = app.msgs.btnLabel_rateUs
                }
            })

            return donateModal
        },

        update: {
            width: 377,

            available() {

                // Show modal
                const updateAvailModal = modals.alert(`üöÄ ${app.msgs.alert_updateAvail}!`, // title
                    `${app.msgs.alert_newerVer} ${app.msgs.appName} ` // msg
                        + `(v${app.latestVer}) ${app.msgs.alert_isAvail}!  `
                        + '<a target="_blank" rel="noopener" style="font-size: 0.7rem" href="'
                            + app.urls.update.replace(/.+\/([^/]+)meta\.js/,
                                `${app.urls.gitHub}/commits/main/greasemonkey/$1user.js`)
                        + `">${app.msgs.link_viewChanges}</a>`,
                    function update() { // button
                        modals.safeWinOpen(app.urls.update.replace('meta.js', 'user.js') + '?t=' + Date.now())
                    }, '', modals.update.width
                )

                // Localize button labels if needed
                if (!env.browser.language.startsWith('en')) {
                    const updateBtns = updateAvailModal.querySelectorAll('button')
                    updateBtns[1].textContent = app.msgs.btnLabel_update
                    updateBtns[0].textContent = app.msgs.btnLabel_dismiss
                }

                return updateAvailModal
            },

            unavailable() {
                return modals.alert(`${app.msgs.alert_upToDate}!`, // title
                    `${app.msgs.appName} (v${app.version}) ${app.msgs.alert_isUpToDate}!`, // msg
                    '', '', modals.update.width
                )
            }
        },

        safeWinOpen(url) { open(url, '_blank', 'noopener') } // to prevent backdoor vulnerabilities
    }

    // Define UI functions

    function syncConfigToUI(options) {
        if (options?.updatedKey == 'autoclear' && config.autoclear) clearChatsAndGoHome()
        if (/autoclear|toggleHidden/.test(options?.updatedKey)) toggles.sidebar.updateState()
        menu.refresh() // prefixes/suffixes
    }

    function getScheme() {
        return document.documentElement.className
            || (window.matchMedia?.('(prefers-color-scheme: dark)')?.matches ? 'dark' : 'light')
    }

    function createStyle(content) {
        const style = document.createElement('style')
        if (content) style.innerText = content
        return style
    }

    function fillStarryBG(targetNode) { // requires https://assets.aiwebextensions.com/styles/rising-stars/css/<black|white>.min.css
        if (targetNode.querySelector('[id*=stars]')) return
        const starsDivsContainer = document.createElement('div')
        starsDivsContainer.style.cssText = 'position: absolute ; top: 0 ; left: 0 ;' // hug targetNode's top-left corner
          + 'height: 100% ; width: 100% ; border-radius: 15px ; overflow: clip ;' // bound innards exactly by targetNode
          + 'z-index: -1'; // allow interactive elems to be clicked
        ['sm', 'med', 'lg'].forEach(starSize => {
            const starsDiv = document.createElement('div')
            starsDiv.id = `${ env.ui.scheme == 'dark' ? 'white' : 'black' }-stars-${starSize}`
            starsDivsContainer.append(starsDiv)
        })
        targetNode.prepend(starsDivsContainer)
    }

    const toggles = {

        sidebar: {
            class: `${app.cssPrefix}-sidebar-toggle`,

            create() {

                // Init toggle elems
                this.div = document.createElement('div') ; this.div.className = this.class
                this.navicon = document.createElement('img')
                this.toggleLabel = document.createElement('label')
                this.toggleInput = document.createElement('input')
                this.switchSpan = document.createElement('span')
                this.knobSpan = document.createElement('span')

                // Assemble elems into parent div
                this.switchSpan.append(this.knobSpan)
                this.div.append(this.navicon, this.toggleInput, this.switchSpan, this.toggleLabel)

                // Stylize elems
                this.stylize() // create/append stylesheet
                if (env.ui.firstLink) { // borrow/assign classes from sidebar elems
                    const firstIcon = env.ui.firstLink.querySelector('div:first-child'),
                          firstLabel = env.ui.firstLink.querySelector('div:nth-child(2)')
                    this.div.classList.add(
                        ...env.ui.firstLink.classList, ...(firstLabel?.classList || []))
                    this.div.querySelector('img')?.classList.add(...(firstIcon?.classList || []))
                }

                // Update color/state
                this.updateAesthetic() ; this.updateState() // to opposite init state for animation on 1st load

                // Add hover/click listeners
                this.div.onmouseover = this.div.onmouseout = event => // trigger OpenAI hover overlay
                    this.div.style.setProperty('--item-background-color',
                        `var(--sidebar-surface-${event.type == 'mouseover' ? 'secondary' : 'primary'})`)
                this.div.onclick = () => {
                    settings.save('autoclear', !this.toggleInput.checked) ; syncConfigToUI({ updatedKey: 'autoclear' })
                    notify(`${app.msgs.mode_autoclear}: ${menu.state.words[+config.autoclear]}`)
                }
            },

            stylize() {
                this.styles = document.createElement('style') ; this.styles.id = `${this.class}-styles`
                this.styles.innerText = (
                    ':root {' // vars
                      + '--switch-enabled-bg-color: #ad68ff ; --switch-disabled-bg-color: #ccc ;'
                      + '--switch-enabled-box-shadow: 2px 1px 9px #d8a9ff ;'
                      + '--switch-enabled-hover-box-shadow: 0 1px 10px #9b5ad1 ;'
                      + '--knob-box-shadow: rgba(0,0,0,0.3) 0 1px 2px 0 ;'
                      + '--knob-box-shadow-dark: rgba(0,0,0,0.3) 0 1px 2px 0, rgba(0,0,0,0.15) 0 3px 6px 2px }'

                    // Element styles
                  + `.${this.class} {` // parent div
                      + 'max-height: 37px ; margin: 2px 0 ; user-select: none ; cursor: pointer ;'
                      + 'flex-grow: unset }' // overcome OpenAI .grow
                  + `.${this.class} > img {` // navicon
                      + 'width: 1.25rem ; height: 1.25rem ; margin-left: 2px ; margin-right: 4px }'
                  + `.${this.class} > input { display: none }` // hide checkbox
                  + `.${this.class} > span {` // switch span
                      + 'position: relative ; width: 30px ; height: 15px ; border-radius: 28px ;'
                      + `background-color: var(--switch-${ // init opposite final color
                            config.autoclear ? 'disabled' : 'enabled' }-bg-color) ;`
                      + `bottom: ${ env.ui.firstLink ? 0 : -0.15 }em ;`
                      + `left: ${ env.browser.isMobile ? 169 : env.ui.firstLink ? 154 : 160 }px ;`
                      + 'transition: 0.4s ; -webkit-transition: 0.4s ; -moz-transition: 0.4s ;'
                          + '-o-transition: 0.4s ; -ms-transition: 0.4s }'
                  + `.${this.class} > span.enabled {` // switch on
                      + 'background-color: var(--switch-enabled-bg-color) ;'
                      + 'box-shadow: var(--switch-enabled-box-shadow) }'
                  + `.${this.class}:hover > span.enabled {` // switch on when hover on parent div
                      + 'box-shadow: var(--switch-enabled-hover-box-shadow) ;'
                      + 'transition: none ; -webkit-transition: none ; -moz-transition: none ;'
                          + '-o-transition: none ; -ms-transition: none }'
                  + `.${this.class} > span.disabled {` // switch off
                      + 'background-color: var(--switch-disabled-bg-color) ; box-shadow: none }'
                  + `.${this.class} > span > span {` // knob span
                      + 'position: absolute ; width: 12px ; height: 12px ; content: "" ; border-radius: 28px ;'
                      + 'background-color: white ; left: 3px ; bottom: 1.25px ;'
                      + 'box-shadow: var(--knob-box-shadow) ;' // make 3D
                      + `transform: translateX(${ config.autoclear ? 0 : 13 }px) ;` // init opposite final pos
                      + 'transition: 0.4s ; -webkit-transition: 0.4s ; -moz-transition: 0.4s ;'
                          + '-o-transition: 0.4s ; -ms-transition: 0.4s }'
                  + `.${this.class} > label {` // toggle label
                      + 'cursor: pointer ; overflow: hidden ; text-overflow: ellipsis ;'
                      + `width: ${ env.browser.isMobile ? 201 : 148 }px ;`
                      + `margin-left: -${ env.ui.firstLink ? 41 : 23 }px ;` // left-shift to navicon
                      + `${ env.ui.firstLink ? '' : 'font-size: 0.875rem ; font-weight: 600' }}`

                    // Dark scheme mods
                  + `.${this.class}.dark > span.enabled {` // switch on
                      + 'background-color: var(--switch-enabled-bg-color) ;'
                      + 'box-shadow: var(--switch-enabled-hover-box-shadow) }' // use hover style instead
                  + `.${this.class}.dark:hover > span.enabled {` // switch on when hover on parent div
                      + 'box-shadow: var(--switch-enabled-box-shadow) }' // use regular style instead
                  + `.${this.class}.dark > span > span {` // knob span
                      + 'box-shadow: var(--knob-box-shadow-dark) }' // make 3D-er
                )
                document.head.append(this.styles)
            },

            insert() {
                if (this.status?.startsWith('insert') || document.querySelector(`.${this.class}`)) return
                const sidebar = document.querySelectorAll('nav')[env.browser.isMobile ? 1 : 0] ; if (!sidebar) return
                this.status = 'inserting' ; if (!this.div) this.create()
                sidebar.insertBefore(this.div, sidebar.children[1]) ; this.status = 'inserted'
            },

            updateAesthetic() { // to match UI scheme
                const isDarkScheme = env.ui.scheme == 'dark'
                this.div.classList.add(isDarkScheme ? 'dark' : 'light')
                this.div.classList.remove(isDarkScheme ? 'light' : 'dark')
                this.navicon.src = `${app.urls.mediaHost}/images/icons/incognito/${
                    env.ui.scheme == 'dark' ? 'white' : 'black' }/icon32.png?${app.latestAssetCommitHash}`
            },

            updateState() {
                if (!this.div) return // since toggle never created = sidebar missing
                this.div.style.display = config.toggleHidden ? 'none' : 'flex'
                this.toggleInput.checked = config.autoclear
                this.toggleLabel.innerText = `${app.msgs.mode_autoclear} `
                    + app.msgs[`state_${ this.toggleInput.checked ? 'enabled' : 'disabled' }`]
                setTimeout(() => {
                    this.switchSpan.className = this.toggleInput.checked ? 'enabled' : 'disabled'
                    this.knobSpan.style.transform = `translateX(${ this.toggleInput.checked ? 13 : 0 }px)`
                }, 1) // min delay to trigger 1st transition fx
            }
        }
    }

    function clearChatsAndGoHome() {
        chatgpt.clearChats()

        // Hide history from DOM since chatgpt.clearChats() works back-end only (front-end updates on reload otherwise)
        new Promise(resolve => setTimeout(resolve, 1000)).then(() => {
            document.querySelectorAll('nav ol').forEach(ol => {
                ol.previousElementSibling.style.display = 'none' // hide temporal heading
                ol.querySelectorAll('li').forEach(li => li.style.display = 'none') // hide chat entry
            })
            if (!clearChatsAndGoHome.historyObserver) { // monitor sidebar to restore temporal headings on new chats
                clearChatsAndGoHome.historyObserver = new MutationObserver(mutations => mutations.forEach(mutation => {
                    if (mutation.type == 'childList') mutation.addedNodes.forEach(node => {
                        if (node.tagName == 'LI') node.closest('ol').previousElementSibling.style.display = 'inherit'
                })}))
                clearChatsAndGoHome.historyObserver.observe(
                    document.querySelector('nav'), { childList: true, subtree: true })
            }
        })

        chatgpt.startNewChat() // return home from potential ghost chat
        notify(app.msgs.notif_chatsCleared, 'bottom-right', 2.5)
    }

    // Run MAIN routine

    menu.register() // create browser toolbar menu

    // Init UI props
    await Promise.race([chatgpt.isLoaded(), new Promise(resolve => setTimeout(resolve, 5000))]) // initial UI loaded
    await chatgpt.sidebar.isLoaded()
    env.ui.firstLink = chatgpt.getNewChatLink();

    // Add STARS styles
    ['brs', 'wrs'].forEach(cssType => document.head.append(createStyle(GM_getResourceText(`${cssType}CSS`))))

    toggles.sidebar.insert()

    // AUTO-CLEAR on first visit if enabled
    if (config.autoclear) clearChatsAndGoHome()

    // Monitor NODE CHANGES to maintain sidebar toggle visibility
    new MutationObserver(() => {
        if (!config.toggleHidden && !document.querySelector(`.${toggles.sidebar.class}`)
            && toggles.sidebar.status != 'inserting') {
                toggles.sidebar.status = 'missing' ; toggles.sidebar.insert() }
    }).observe(document.body, { attributes: true, subtree: true })

    // Monitor SCHEME PREF changes to update sidebar toggle + modal colors
    new MutationObserver(handleSchemePrefChange).observe( // for site scheme pref changes
        document.documentElement, { attributes: true, attributeFilter: ['class'] })
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener( // for browser/system scheme pref changes
        'change', () => requestAnimationFrame(handleSchemePrefChange))
    function handleSchemePrefChange() {
        const displayedScheme = getScheme()
        if (env.ui.scheme != displayedScheme) {
            env.ui.scheme = displayedScheme ; toggles.sidebar.updateAesthetic() ; modals.stylize() }
    }

    // Disable distracting SIDEBAR CLICK-ZOOM effect
    if (!document.documentElement.hasAttribute('sidebar-click-zoom-observed')) {
        new MutationObserver(mutations => mutations.forEach(({ target }) => {
            if (target.closest('[class*=sidebar]') // include sidebar elems
                && !target.closest('[class*=sidebar-toggle]') // exclude our toggles.sidebar's elems
                && target.style.transform != 'none' // click-zoom occurred
            ) target.style.transform = 'none'
        })).observe(document.body, { attributes: true, subtree: true, attributeFilter: ['style'] })
        document.documentElement.setAttribute('sidebar-click-zoom-observed', true)
    }

})()
