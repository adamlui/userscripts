// ==UserScript==
// @name                ChatGPT Auto-Talk üì£
// @name:af             ChatGPT Auto-Praat üì£
// @name:am             ChatGPT ·â†·à´·àµ·à∞·à≠ ·ä•·äï·åã·â¢ üì£
// @name:ar             ChatGPT ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä üì£
// @name:az             ChatGPT Avtomatik-Danƒ±≈üƒ±q üì£
// @name:be             ChatGPT –ê—û—Ç–∞-–†–∞–∑–º–æ–≤–∞ üì£
// @name:bem            ChatGPT Kusogolo Kwati üì£
// @name:bg             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:bn             ChatGPT ‡¶Ö‡¶ü‡ßã-‡¶ü‡¶ï üì£
// @name:bo             ChatGPT ‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡Ωî‡Ωº üì£
// @name:bs             ChatGPT Auto-Razgovor üì£
// @name:ca             ChatGPT Auto-Parla üì£
// @name:ceb            ChatGPT Auto-Panulti üì£
// @name:ckb            ChatGPT ÿ¶€ïŸà€ï€å-ÿÆ€Ü⁄©ÿßÿ± üì£
// @name:cs             ChatGPT Automatick√Ω-Rozhovor üì£
// @name:cy             ChatGPT Sgwrsio-Awtomatig üì£
// @name:da             ChatGPT Auto-Tale üì£
// @name:de             ChatGPT Auto-Sprechen üì£
// @name:dv             ChatGPT ﬁáﬁÆﬁìﬁØ-ﬁÜﬁÆﬁâﬁ®ﬁáﬁ™ﬁÇﬁ®ﬁÜﬁ≠ﬁùﬁ¶ﬁÇﬁ∞ üì£
// @name:dz             ChatGPT ‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡ΩÜ‡Ω∫‡Ωì‡ºã‡Ωî‡Ωº üì£
// @name:el             ChatGPT ŒëœÖœÑœåŒºŒ±œÑŒ∑-ŒüŒºŒπŒªŒØŒ± üì£
// @name:eo             ChatGPT A≈≠tomata-Parolo üì£
// @name:es             ChatGPT Auto-Hablar üì£
// @name:et             ChatGPT Automaatne-Jutt üì£
// @name:eu             ChatGPT Auto-Hizketa üì£
// @name:fa             ChatGPT ⁄ØŸÅÿ™⁄ØŸà€å ÿÆŸàÿØ⁄©ÿßÿ± üì£
// @name:fi             ChatGPT Auto-Puhe üì£
// @name:fo             ChatGPT Sj√°lvvirkandi-Pr√°t üì£
// @name:fr             ChatGPT Auto-Parler üì£
// @name:fr-CA          ChatGPT Auto-Parler üì£
// @name:gd             ChatGPT F√®in-Labhairt üì£
// @name:gl             ChatGPT Auto-Falar üì£
// @name:gu             ChatGPT ‡™ì‡™ü‡´ã-‡™¨‡´ã‡™≤‡´ã üì£
// @name:haw            ChatGPT K≈´ ªoko ªa- ª≈ålelo üì£
// @name:he             ChatGPT ◊ì◊ô◊ë◊ï◊®-◊ê◊ï◊ò◊ï◊û◊ò◊ô üì£
// @name:hi             ChatGPT ‡§ë‡§ü‡•ã-‡§ü‡•â‡§ï üì£
// @name:hr             ChatGPT Auto-Razgovor üì£
// @name:ht             ChatGPT Auto-Pale üì£
// @name:hu             ChatGPT Auto-Besz√©lget√©s üì£
// @name:hy             ChatGPT ‘ª’∂÷Ñ’∂’°’¢’•÷Ä’°’¢’°÷Ä-‘Ω’∏’Ω÷Ñ üì£
// @name:id             ChatGPT Bicara-Otomatis üì£
// @name:is             ChatGPT Sj√°lfvirk-Tal üì£
// @name:it             ChatGPT Auto-Parlare üì£
// @name:ja             ChatGPT „Ç™„Éº„Éà„Éà„Éº„ÇØ üì£
// @name:jv             ChatGPT Auto-Omah üì£
// @name:ka             ChatGPT ·Éê·Éï·É¢·Éù-·Éö·Éê·Éû·Éê·É†·Éê·Éô·Éò üì£
// @name:kab            ChatGPT Awto-Talqeq üì£
// @name:kk             ChatGPT –ê–≤—Ç–æ-–°”©–π–ª–µ—É üì£
// @name:km             ChatGPT ·ûÄ·û∂·ûö·ûî·üí·ûö·û∂·ûü·üí·ûö·üê·ûô·û¢·ûÇ·üí·ûÇ·û∑·ûü·ûì·û∏ üì£
// @name:kn             ChatGPT ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§-‡≤Æ‡≤æ‡≤§‡≥Å üì£
// @name:ko             ChatGPT ÏûêÎèô-ÌÜ†ÌÅ¨ üì£
// @name:ku             ChatGPT Ax√™-Raxt üì£
// @name:ky             ChatGPT –ê–≤—Ç–æ-–°“Ø–π–ª”©—à“Ø“Ø üì£
// @name:la             ChatGPT Auto-Loquens üì£
// @name:lb             ChatGPT Auto-Schw√§tzen üì£
// @name:lo             ChatGPT ‡∫Å‡∫≤‡∫ô‡ªÄ‡∫ß‡∫ª‡ªâ‡∫≤‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î üì£
// @name:lt             ChatGPT Auto-Kalba üì£
// @name:lv             ChatGPT Auto-Saruna üì£
// @name:mg             ChatGPT Auto-Kabary üì£
// @name:mi             ChatGPT Aunoa-K≈çrero üì£
// @name:mk             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:ml             ChatGPT ‡¥ì‡¥ü‡µç‡¥ü‡µã-‡¥∏‡¥Ç‡¥∏‡¥æ‡¥∞‡¥Ç üì£
// @name:mn             ChatGPT –ê–≤—Ç–æ–º–∞—Ç-–Ø—Ä–∏–∞ üì£
// @name:ms             ChatGPT Auto-Bercakap üì£
// @name:mt             ChatGPT Auto-Kellem üì£
// @name:my             ChatGPT ·Ä°·Äú·Ä≠·ÄØ·Ä°·Äú·Äª·Ä±·Ä¨·ÄÄ·Ä∫-·ÄÖ·ÄÄ·Ä¨·Ä∏·Äï·Äº·Ä±·Ä¨ üì£
// @name:ne             ChatGPT ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§-‡§µ‡§æ‡§∞‡•ç‡§§‡§æ üì£
// @name:nl             ChatGPT Auto-Praten üì£
// @name:no             ChatGPT Auto-Snakke üì£
// @name:ny             ChatGPT Auto-Kulankhula üì£
// @name:pa             ChatGPT ‡®Ü‡®ü‡©ã-‡®ó‡©±‡®≤‡®¨‡®æ‡®§ üì£
// @name:pap            ChatGPT Auto-Papia üì£
// @name:pl             ChatGPT Auto-Rozmowa üì£
// @name:ps             ChatGPT ÿÆŸàÿØ⁄©ÿßÿ±Ÿá-ÿÆÿ®ÿ±Ÿä ⁄©ŸàŸÑ üì£
// @name:pt             ChatGPT Auto-Falar üì£
// @name:pt-BR          ChatGPT Auto-Falar üì£
// @name:rn             ChatGPT Auto-Kuvuga üì£
// @name:ro             ChatGPT Auto-Vorbire üì£
// @name:ru             ChatGPT –ê–≤—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:rw             ChatGPT Ibyoguhindura üì£
// @name:sg             ChatGPT Auto-Y√¢ng√¢ üì£
// @name:si             ChatGPT ‡∑É‡∑ä‡∑Ä‡∂∫‡∂Ç‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂∫-‡∂ö‡∂≠‡∑è üì£
// @name:sk             ChatGPT Automatick√Ω-Rozhovor üì£
// @name:sl             ChatGPT Avtomatski-Pogovor üì£
// @name:sm             ChatGPT Fetalai-Otometi üì£
// @name:sn             ChatGPT Auto-Taurirana üì£
// @name:so             ChatGPT Hadal-otomaatig ah üì£
// @name:sr             ChatGPT –ê—É—Ç–æ-–†–∞–∑–≥–æ–≤–æ—Ä üì£
// @name:sv             ChatGPT Auto-Prata üì£
// @name:sw             ChatGPT Maongezi-Otomatiki üì£
// @name:ta             ChatGPT ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá-‡Æ™‡Øá‡Æö‡Øç‡Æö‡ØÅ üì£
// @name:te             ChatGPT ‡∞Ü‡∞ü‡±ã-‡∞Æ‡∞æ‡∞ü üì£
// @name:tg             ChatGPT –ê–≤—Ç–æ-–ì–∞–ø üì£
// @name:th             ChatGPT ‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ üì£
// @name:ti             ChatGPT ·ä•·àµ·ä´·àù·àç·ä≠·â≤-·âÉ·àç ·ä£·âê·à™·â° üì£
// @name:tk             ChatGPT Auto-Dialog üì£
// @name:tn             ChatGPT Auto-Matla üì£
// @name:to             ChatGPT Fakamatala-Otometi üì£
// @name:tpi            ChatGPT Autometik-Tok üì£
// @name:tr             ChatGPT Otomatik-Konu≈üma üì£
// @name:uk             ChatGPT –ê–≤—Ç–æ-–†–æ–∑–º–æ–≤–∞ üì£
// @name:ur             ChatGPT ÿÆŸàÿØ⁄©ÿßÿ±-ÿ®ÿßÿ™ üì£
// @name:uz             ChatGPT Avto-Suhbat üì£
// @name:vi             ChatGPT T·ª±-ƒê·ªông-N√≥i üì£
// @name:xh             ChatGPT IyaZenzekelayo-Thetha üì£
// @name:yi             ChatGPT ◊ê÷∑◊ï◊ò◊ê÷∏-◊®◊¢◊ì◊ü üì£
// @name:zh             ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-CN          ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-HK          ChatGPT Ëá™ÂãïË´áË©± üì£
// @name:zh-SG          ChatGPT Ëá™Âä®Ë∞àËØù üì£
// @name:zh-TW          ChatGPT Ëá™ÂãïË´áË©± üì£
// @name:zu             ChatGPT Ukuzenzakalela-Ukhuluma üì£
// @description         Automatically play ChatGPT responses
// @description:af      Speel ChatGPT-antwoorde outomaties af
// @description:am      ·àù·à≠·àò·à´ ChatGPT ·àù·àã·àæ·âΩ·äï ·â†·à´·àµ-·à∞·à≠
// @description:ar      ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ±ÿØŸàÿØ ChatGPT ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß
// @description:az      ChatGPT cavablarƒ±nƒ± avtomatik olaraq oynat
// @description:be      –ê—û—Ç–∞–º–∞—Ç—ã—á–Ω–∞–µ –ø—Ä–∞–π–≥—Ä–∞–≤–∞–Ω–Ω–µ –∞–¥–∫–∞–∑–∞—û ChatGPT
// @description:bem     Panga zolingana pa ChatGPT mwankhama
// @description:bg      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏ –æ—Ç ChatGPT
// @description:bn      ChatGPT ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡ßÅ‡¶®
// @description:bo      ChatGPT ‡Ω£‡æü‡Ω∫‡ºã‡Ωñ‡Ω§‡Ωº‡Ω£‡ºã‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡Ω¶‡æí‡æ≤‡Ωº‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº
// @description:bs      Automatski reproducirajte odgovore ChatGPT-a
// @description:ca      Reproduir autom√†ticament les respostes de ChatGPT
// @description:ceb     Awomatikong pagdula sa mga tubag sa ChatGPT
// @description:ckb     ÿ®€ïÿ±ÿ≤⁄©ÿ±ÿØŸÜ€å Ÿà€ï⁄µÿßŸÖ€ï⁄©ÿßŸÜ€å ChatGPT ÿ®€ï ÿ¥€éŸà€ï€å ÿÆ€Ü⁄©ÿßÿ±
// @description:cs      Automatick√© p≈ôehr√°v√°n√≠ odpovƒõd√≠ ChatGPT
// @description:cy      Chwarae atebion ChatGPT yn awtomatig
// @description:da      Afspil ChatGPT-svar automatisk
// @description:de      ChatGPT-Antworten automatisch abspielen
// @description:dv      ChatGPT ﬁñﬁ¨ﬁÄﬁ®ﬁãﬁßﬁÇﬁ∞ ﬁáﬁÆﬁìﬁØﬁáﬁ¨ﬁàﬁ¨ﬁáﬁ∞ﬁàﬁ®ﬁãﬁßﬁÇﬁ¨ﬁáﬁ∞ ﬁÜﬁ™ﬁÉﬁ≠
// @description:dz      ChatGPT ‡Ωñ‡Ω¢‡æí‡æ±‡Ω¥‡Ωë‡ºã‡ΩÇ‡Ωè‡Ωº‡ΩÑ‡ºã‡Ω¢‡ΩÑ‡ºã‡Ω†‡Ωõ‡Ω¥‡Ω£‡ºã‡Ω¶‡æê‡Ωë‡ºã‡Ω¶‡æí‡æ≤‡Ωº‡Ωì‡ºã‡Ω†‡ΩÇ‡æ≤‡Ωº
// @description:el      ŒëœÖœÑœåŒºŒ±œÑŒ∑ Œ±ŒΩŒ±œÄŒ±œÅŒ±Œ≥œâŒ≥ŒÆ Œ±œÄŒ±ŒΩœÑŒÆœÉŒµœâŒΩ ChatGPT
// @description:eo      A≈≠tomate ludi ChatGPT-respondojn
// @description:es      Reproducir autom√°ticamente respuestas de ChatGPT
// @description:et      ChatGPT vastuste automaatne esitamine
// @description:eu      ChatGPT erantzunak automatikoki erreproduzitu
// @description:fa      ŸæÿÆÿ¥ ÿÆŸàÿØ⁄©ÿßÿ± Ÿæÿßÿ≥ÿÆŸáÿß€å ChatGPT
// @description:fi      Toista ChatGPT-vastaukset automaattisesti
// @description:fo      Sp√¶l ChatGPT svar sj√°lvvirkandi
// @description:fr      Lire automatiquement les r√©ponses de ChatGPT
// @description:fr-CA   Lire automatiquement les r√©ponses de ChatGPT
// @description:gd      Cluich gu f√®in-ghluasadach freagairtean ChatGPT
// @description:gl      Reproducir automaticamente as respostas de ChatGPT
// @description:gu      ChatGPT ‡™™‡´ç‡™∞‡™§‡™ø‡™ï‡´ç‡™∞‡™ø‡™Ø‡™æ‡™ì ‡™Ü‡™™‡´ã‡™Ü‡™™ ‡™µ‡™ó‡™æ‡™°‡´ã
// @description:haw     Ho ªopa ªapa ªa i nƒÅ pane ChatGPT ma ka automate
// @description:he      ◊î◊©◊û◊¢ ◊™◊í◊ï◊ë◊ï◊™ ChatGPT ◊ë◊ê◊ï◊§◊ü ◊ê◊ï◊ò◊ï◊û◊ò◊ô
// @description:hi      ChatGPT ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§ö‡§≤‡§æ‡§è‡§Ç
// @description:hr      Automatski reproducirajte odgovore ChatGPT-a
// @description:ht      Jwe repons ChatGPT otomatikman
// @description:hu      ChatGPT-v√°laszok automatikus lej√°tsz√°sa
// @description:hy      ‘±’æ’ø’∏’¥’°’ø ’∂’æ’°’£’°÷Ä’Ø’•’¨ ChatGPT-’´ ’∫’°’ø’°’Ω’≠’°’∂’∂’•÷Ä’®
// @description:id      Mainkan respons ChatGPT secara otomatis
// @description:is      Spila√∞u sj√°lfkrafa sv√∂r ChatGPT
// @description:it      Riprodurre automaticamente le risposte di ChatGPT
// @description:ja      ChatGPT „ÅÆÂõûÁ≠î„ÇíËá™ÂãïÁöÑ„Å´ÂÜçÁîü„Åô„Çã
// @description:jv      Puter balasan ChatGPT kanthi otomatis
// @description:ka      ·Éê·Éï·É¢·Éù·Éõ·Éê·É¢·É£·É†·Éê·Éì ·Éò·Éó·Éê·Éõ·Éê·É®·Éî·Éó ChatGPT ·Éû·Éê·É°·É£·ÉÆ·Éî·Éë·Éò
// @description:kab     Melk ikdimen n d-yitran n ChatGPT
// @description:kk      ChatGPT –∂–∞—É–∞–ø—Ç–∞—Ä—ã–Ω –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ –æ–π–Ω–∞—Ç—É
// @description:km      ·ûõ·üÅ·ûÑ·ûÄ·û∂·ûö·ûÜ·üí·ûõ·ûæ·ûô·ûè·ûî·ûö·ûî·ûü·üã ChatGPT ·ûä·üÑ·ûô·ûü·üí·ûú·üê·ûô·ûî·üí·ûö·ûú·ûè·üí·ûè·û∑
// @description:kn      ChatGPT ‡≤™‡≥ç‡≤∞‡≤§‡≤ø‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤™‡≥ç‡≤≤‡≥á ‡≤Æ‡≤æ‡≤°‡≤ø
// @description:ko      ChatGPT ÏùëÎãµ ÏûêÎèô Ïû¨ÏÉù
// @description:ku      Serdana erebey√Æyan bi xweka y√™n ChatGPT bixwe
// @description:ky      ChatGPT –∂–æ–æ–ø—Ç–æ—Ä—É–Ω –∞–≤—Ç–æ–º–∞—Ç—Ç—ã–∫ —Ç“Ø—Ä–¥”© –æ–π–Ω–æ—Ç—É—É
// @description:la      Lude responsiones ChatGPT automatice
// @description:lb      ChatGPT-√Ñntwerten automatesch ofspillen
// @description:lo      ‡∫Ñ‡∫ß‡∫≤‡∫°‡∫™‡∫ª‡∫°‡∫û‡∫≤‡∫î ChatGPT ‡ªÉ‡∫ô‡∫ï‡∫ª‡∫ß‡ªÄ‡∫≠‡∫á
// @description:lt      Automati≈°kai leisti ChatGPT atsakymus
// @description:lv      AutomƒÅtiski atska≈Üot ChatGPT atbildes
// @description:mg      Alefaso ho azy ny valintenin'i ChatGPT
// @description:mi      Purei aunoa i ngƒÅ whakautu a ChatGPT
// @description:mk      –ê–≤—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—É—à—Ç–∞—ò –æ–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ ChatGPT
// @description:ml      ChatGPT ‡¥™‡µç‡¥∞‡¥§‡¥ø‡¥ï‡¥∞‡¥£‡¥ô‡µç‡¥ô‡µæ ‡¥∏‡µç‡¥µ‡¥Ø‡¥Æ‡µá‡¥µ ‡¥™‡µç‡¥≤‡µá ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï
// @description:mn      ChatGPT —Ö–∞—Ä–∏—É–ª—Ç—ã–≥ –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä —Ç–æ–≥–ª—É—É–ª–∞—Ö
// @description:ms      Mainkan tindak balas ChatGPT secara automatik
// @description:mt      Awtomatikament iddoqq ir-risposti ta' ChatGPT
// @description:my      ChatGPT ·Åè·Äê·ÄØ·Ä∂·Ä∑·Äï·Äº·Äî·Ä∫·ÄÅ·Äª·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Ä°·Äú·Ä≠·ÄØ·Ä°·Äú·Äª·Ä±·Ä¨·ÄÄ·Ä∫ ·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äï·Ä´
// @description:ne      ChatGPT ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§π‡§∞‡•Ç ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∞‡•Ç‡§™‡§Æ‡§æ ‡§™‡•ç‡§≤‡•á ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
// @description:nl      Speel ChatGPT-antwoorden automatisch af
// @description:no      Spill ChatGPT-svar automatisk
// @description:ny      Sewera mayankho a ChatGPT zokha
// @description:pa      ChatGPT ‡®¶‡©á ‡®ú‡®µ‡®æ‡®¨ ‡®Ü‡®ü‡©ã‡®Æ‡©à‡®ü‡®ø‡®ï ‡®ö‡®≤‡®æ‡®ì
// @description:pap     Hunga respuesta di ChatGPT otom√°tikamente
// @description:pl      Automatyczne odtwarzanie odpowiedzi ChatGPT
// @description:ps      ÿØ ChatGPT ⁄ÅŸàÿßÿ®ŸàŸÜŸá ŸæŸá ÿßŸàÿ™ŸàŸÖÿßÿ™ ⁄âŸàŸÑ ŸÑŸàÿ®€ê ⁄©⁄ìÿ¶
// @description:pt      Reproduzir automaticamente respostas do ChatGPT
// @description:pt-BR   Reproduzir automaticamente respostas do ChatGPT
// @description:rn      Gukina ivyishura vya ChatGPT ku buryo bwikora
// @description:ro      Reda»õi automat rƒÉspunsurile ChatGPT
// @description:ru      –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ ChatGPT
// @description:rw      Gukina ibisubizo bya ChatGPT ku buryo bwikora
// @description:sg      Gbangba ko ye tere ChatGPT makumba mbene
// @description:si      ChatGPT ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂†‡∑è‡∂ª ‡∑É‡∑ä‡∑Ä‡∂∫‡∂Ç‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂∫‡∑Ä ‡∂¥‡∑ä‡∂Ω‡∑ö ‡∂ö‡∂ª‡∂±‡∑ä‡∂±
// @description:sk      Automatick√© prehr√°vanie odpoved√≠ ChatGPT
// @description:sl      Samodejno predvajaj odgovore ChatGPT
// @description:sm      Ta ªa otometi tali a le ChatGPT
// @description:sn      Tumira otomatiki mhinduro dzeChatGPT
// @description:so      Si toos ah u ciyaar jawaabaha ChatGPT
// @description:sr      –ê—É—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—É—à—Ç–∞—ò—Ç–µ –æ–¥–≥–æ–≤–æ—Ä–µ ChatGPT-–∞
// @description:sv      Spela upp ChatGPT-svar automatiskt
// @description:sw      Chezesha majibu ya ChatGPT kiotomatiki
// @description:ta      ChatGPT ‡Æ™‡Æ§‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡Øà ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æá‡ÆØ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç
// @description:te      ChatGPT ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞∏‡±ç‡∞™‡∞Ç‡∞¶‡∞®‡∞≤‡∞®‡±Å ‡∞Ü‡∞ü‡±ã‡∞Æ‡±á‡∞ü‡∞ø‡∞ï‡±ç ‡∞ó‡∞æ ‡∞™‡±ç‡∞≤‡±á ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø
// @description:tg      –ë–∞ —Ç–∞–≤—Ä–∏ —Ö—É–¥–∫–æ—Ä “∑–∞–≤–æ–±“≥–æ–∏ ChatGPT-—Ä–æ –Ω–∞–≤–æ–∑–µ–¥
// @description:th      ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á ChatGPT ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
// @description:ti      ·ä•·â∂·àù ·àù·àã·ä• ·â•·ä£·ãç·â∂·àõ·â≤·ä≠ ·äï·ä•·àΩ·â∂ ChatGPT ·ä•·â∂·àù ·ä•·ã© ·ä≠·äï·ãï·ãò·àù·â• ·ä•·ã©
// @description:tk      ChatGPT jogaplaryny awtomatiki o√Ωnamak
// @description:tn      Dira karabo tsa ChatGPT ka boitsamaisi
// @description:to      Tataki ke tali  ªo e ChatGPT ‚Äòi he ngaahi fakamatala faka‚Äòotometiki
// @description:tpi     Pleiim ol toktok blong ChatGPT olsem otomat
// @description:tr      ChatGPT yanƒ±tlarƒ±nƒ± otomatik olarak oynat
// @description:uk      –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ChatGPT
// @description:ur      ÿÆŸàÿØ⁄©ÿßÿ± ÿ∑Ÿàÿ± Ÿæÿ± ChatGPT ÿ¨Ÿàÿßÿ®ÿßÿ™ ⁄ÜŸÑÿßÿ¶€å⁄∫
// @description:uz      ChatGPT javoblarini avtomatik ijro etish
// @description:vi      T·ª± ƒë·ªông ph√°t c√°c ph·∫£n h·ªìi c·ªßa ChatGPT
// @description:xh      Dlala iimpendulo zeChatGPT ngokuzenzekelayo
// @description:yi      ◊©◊§÷º◊ô◊ú ◊ê◊ï◊ô◊ò◊ê÷∏◊û◊ê÷∑◊ò◊ô◊© ChatGPT ◊¢◊†◊ò◊§÷ø◊¢◊®◊°
// @description:zh      Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-CN   Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-HK   Ëá™ÂãïÊí≠Êîæ ChatGPT ÁöÑÂõûË¶Ü
// @description:zh-SG   Ëá™Âä®Êí≠Êîæ ChatGPT ÁöÑÂõûÂ§ç
// @description:zh-TW   Ëá™ÂãïÊí≠Êîæ ChatGPT ÁöÑÂõûË¶Ü
// @description:zu      Dlala izimpendulo ze-ChatGPT ngokuzenzakalela
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2025.10.5
// @license             MIT
// @icon                data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22180%22%20height=%22180%22%20fill=%22none%22%3E%3Cstyle%3E:root%7B--primary-fill:%23000;--secondary-fill:%23fff;%7D@media%20(prefers-color-scheme:dark)%7B:root%7B--primary-fill:%23fff;--secondary-fill:%23000;%7D%7D%3C/style%3E%3Cg%20clip-path=%22url(%23a)%22%3E%3Crect%20width=%22180%22%20height=%22180%22%20fill=%22var(--primary-fill)%22%20rx=%2290%22/%3E%3Cg%20clip-path=%22url(%23b)%22%3E%3Cpath%20fill=%22var(--secondary-fill)%22%20d=%22M75.91%2073.628V62.232c0-.96.36-1.68%201.199-2.16l22.912-13.194c3.119-1.8%206.838-2.639%2010.676-2.639%2014.394%200%2023.511%2011.157%2023.511%2023.032%200%20.839%200%201.799-.12%202.758l-23.752-13.914c-1.439-.84-2.879-.84-4.318%200L75.91%2073.627Zm53.499%2044.383v-27.23c0-1.68-.72-2.88-2.159-3.719L97.142%2069.55l9.836-5.638c.839-.48%201.559-.48%202.399%200l22.912%2013.195c6.598%203.839%2011.035%2011.995%2011.035%2019.912%200%209.116-5.397%2017.513-13.915%2020.992v.001Zm-60.577-23.99-9.836-5.758c-.84-.48-1.2-1.2-1.2-2.16v-26.39c0-12.834%209.837-22.55%2023.152-22.55%205.039%200%209.716%201.679%2013.676%204.678L70.993%2055.516c-1.44.84-2.16%202.039-2.16%203.719v34.787-.002Zm21.173%2012.234L75.91%2098.339V81.546l14.095-7.917%2014.094%207.917v16.793l-14.094%207.916Zm9.056%2036.467c-5.038%200-9.716-1.68-13.675-4.678l23.631-13.676c1.439-.839%202.159-2.038%202.159-3.718V85.863l9.956%205.757c.84.48%201.2%201.2%201.2%202.16v26.389c0%2012.835-9.957%2022.552-23.27%2022.552v.001Zm-28.43-26.75L47.72%20102.778c-6.599-3.84-11.036-11.996-11.036-19.913%200-9.236%205.518-17.513%2014.034-20.992v27.35c0%201.68.72%202.879%202.16%203.718l29.989%2017.393-9.837%205.638c-.84.48-1.56.48-2.399%200Zm-1.318%2019.673c-13.555%200-23.512-10.196-23.512-22.792%200-.959.12-1.919.24-2.879l23.63%2013.675c1.44.84%202.88.84%204.32%200l30.108-17.392v11.395c0%20.96-.361%201.68-1.2%202.16l-22.912%2013.194c-3.119%201.8-6.837%202.639-10.675%202.639Zm29.748%2014.274c14.515%200%2026.63-10.316%2029.39-23.991%2013.434-3.479%2022.071-16.074%2022.071-28.91%200-8.396-3.598-16.553-10.076-22.43.6-2.52.96-5.039.96-7.557%200-17.153-13.915-29.99-29.989-29.99-3.239%200-6.358.48-9.477%201.56-5.398-5.278-12.835-8.637-20.992-8.637-14.515%200-26.63%2010.316-29.39%2023.991-13.434%203.48-22.07%2016.074-22.07%2028.91%200%208.396%203.598%2016.553%2010.075%2022.431-.6%202.519-.96%205.038-.96%207.556%200%2017.154%2013.915%2029.989%2029.99%2029.989%203.238%200%206.357-.479%209.476-1.559%205.397%205.278%2012.835%208.637%2020.992%208.637Z%22/%3E%3C/g%3E%3C/g%3E%3Cdefs%3E%3CclipPath%20id=%22a%22%3E%3Cpath%20d=%22M0%200h180v180H0z%22/%3E%3C/clipPath%3E%3CclipPath%20id=%22b%22%3E%3Cpath%20d=%22M29.487%2029.964h121.035v119.954H29.487z%22/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E
// @icon64              data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22180%22%20height=%22180%22%20fill=%22none%22%3E%3Cstyle%3E:root%7B--primary-fill:%23000;--secondary-fill:%23fff;%7D@media%20(prefers-color-scheme:dark)%7B:root%7B--primary-fill:%23fff;--secondary-fill:%23000;%7D%7D%3C/style%3E%3Cg%20clip-path=%22url(%23a)%22%3E%3Crect%20width=%22180%22%20height=%22180%22%20fill=%22var(--primary-fill)%22%20rx=%2290%22/%3E%3Cg%20clip-path=%22url(%23b)%22%3E%3Cpath%20fill=%22var(--secondary-fill)%22%20d=%22M75.91%2073.628V62.232c0-.96.36-1.68%201.199-2.16l22.912-13.194c3.119-1.8%206.838-2.639%2010.676-2.639%2014.394%200%2023.511%2011.157%2023.511%2023.032%200%20.839%200%201.799-.12%202.758l-23.752-13.914c-1.439-.84-2.879-.84-4.318%200L75.91%2073.627Zm53.499%2044.383v-27.23c0-1.68-.72-2.88-2.159-3.719L97.142%2069.55l9.836-5.638c.839-.48%201.559-.48%202.399%200l22.912%2013.195c6.598%203.839%2011.035%2011.995%2011.035%2019.912%200%209.116-5.397%2017.513-13.915%2020.992v.001Zm-60.577-23.99-9.836-5.758c-.84-.48-1.2-1.2-1.2-2.16v-26.39c0-12.834%209.837-22.55%2023.152-22.55%205.039%200%209.716%201.679%2013.676%204.678L70.993%2055.516c-1.44.84-2.16%202.039-2.16%203.719v34.787-.002Zm21.173%2012.234L75.91%2098.339V81.546l14.095-7.917%2014.094%207.917v16.793l-14.094%207.916Zm9.056%2036.467c-5.038%200-9.716-1.68-13.675-4.678l23.631-13.676c1.439-.839%202.159-2.038%202.159-3.718V85.863l9.956%205.757c.84.48%201.2%201.2%201.2%202.16v26.389c0%2012.835-9.957%2022.552-23.27%2022.552v.001Zm-28.43-26.75L47.72%20102.778c-6.599-3.84-11.036-11.996-11.036-19.913%200-9.236%205.518-17.513%2014.034-20.992v27.35c0%201.68.72%202.879%202.16%203.718l29.989%2017.393-9.837%205.638c-.84.48-1.56.48-2.399%200Zm-1.318%2019.673c-13.555%200-23.512-10.196-23.512-22.792%200-.959.12-1.919.24-2.879l23.63%2013.675c1.44.84%202.88.84%204.32%200l30.108-17.392v11.395c0%20.96-.361%201.68-1.2%202.16l-22.912%2013.194c-3.119%201.8-6.837%202.639-10.675%202.639Zm29.748%2014.274c14.515%200%2026.63-10.316%2029.39-23.991%2013.434-3.479%2022.071-16.074%2022.071-28.91%200-8.396-3.598-16.553-10.076-22.43.6-2.52.96-5.039.96-7.557%200-17.153-13.915-29.99-29.989-29.99-3.239%200-6.358.48-9.477%201.56-5.398-5.278-12.835-8.637-20.992-8.637-14.515%200-26.63%2010.316-29.39%2023.991-13.434%203.48-22.07%2016.074-22.07%2028.91%200%208.396%203.598%2016.553%2010.075%2022.431-.6%202.519-.96%205.038-.96%207.556%200%2017.154%2013.915%2029.989%2029.99%2029.989%203.238%200%206.357-.479%209.476-1.559%205.397%205.278%2012.835%208.637%2020.992%208.637Z%22/%3E%3C/g%3E%3C/g%3E%3Cdefs%3E%3CclipPath%20id=%22a%22%3E%3Cpath%20d=%22M0%200h180v180H0z%22/%3E%3C/clipPath%3E%3CclipPath%20id=%22b%22%3E%3Cpath%20d=%22M29.487%2029.964h121.035v119.954H29.487z%22/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E
// @match               *://chatgpt.com/*
// @connect             cdn.jsdelivr.net
// @connect             gm.chatgptautotalk.com
// @connect             raw.githubusercontent.com
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.8.3/dist/chatgpt.min.js#sha256-jeA6TrwGYL3u5epUnl+2cbbGPhvFRocIMwQbQjNedZs=
// @require             https://cdn.jsdelivr.net/gh/adamlui/ai-web-extensions@1e84c2e/assets/js/lib/dom.js/dist/dom.min.js#sha256-xovdxRnmYD/eCgBiGCu5+Vd3+WWIvLUKVtU/MnRueeU=
// @resource rpgCSS     https://cdn.jsdelivr.net/gh/adamlui/ai-web-extensions@727feff/assets/styles/rising-particles/dist/gray.min.css#sha256-48sEWzNUGUOP04ur52G5VOfGZPSnZQfrF3szUr4VaRs=
// @resource rpwCSS     https://cdn.jsdelivr.net/gh/adamlui/ai-web-extensions@727feff/assets/styles/rising-particles/dist/white.min.css#sha256-6xBXczm7yM1MZ/v0o1KVFfJGehHk47KJjq8oTktH4KE=
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_getResourceText
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://gm.chatgptautotalk.com
// @updateURL           https://gm.chatgptautotalk.com
// @homepageURL         https://chatgptautotalk.com
// @supportURL          https://support.chatgptautotalk.com
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org
//  ¬© 2023‚Äì2025 KudoAI & contributors under the MIT license.

(async () => {

    // Init DATA
    window.env = {
        browser: {
            language: chatgpt.getUserLanguage(), isMobile: chatgpt.browser.isMobile(), isFF: chatgpt.browser.isFirefox()
        },
        scriptManager: {
            name: (() => { try { return GM_info.scriptHandler } catch (err) { return 'unknown' }})(),
            version: (() => { try { return GM_info.version } catch (err) { return 'unknown' }})()
        },
        ui: { scheme: getScheme() }
    }
    env.browser.isPortrait = env.browser.isMobile && ( innerWidth < innerHeight )
    env.scriptManager.supportsTooltips = env.scriptManager.name == 'Tampermonkey'
                                      && parseInt(env.scriptManager.version.split('.')[0]) >= 5
    window.xhr = typeof GM != 'undefined' && GM.xmlHttpRequest || GM_xmlhttpRequest
    window.app = {
        version: GM_info.script.version, chatgptjsVer: /chatgpt\.js@([\d.]+)/.exec(GM_info.scriptMetaStr)[1],
        commitHashes: { app: '50b5abe' } // for cached <app|messages>.json
    }
    app.urls = { resourceHost: `https://cdn.jsdelivr.net/gh/adamlui/chatgpt-auto-talk@${app.commitHashes.app}` }
    const remoteData = {
        app: await new Promise(resolve => xhr({
            method: 'GET', url: `${app.urls.resourceHost}/assets/data/app.json`,
            onload: ({ responseText }) => resolve(JSON.parse(responseText))
        })),
        msgs: await new Promise(resolve => {
            const msgHostDir = `${app.urls.resourceHost}/greasemonkey/_locales/`,
                  msgLocaleDir = `${ env.browser.language ? env.browser.language.replace('-', '_') : 'en' }/`
            let msgHref = `${ msgHostDir + msgLocaleDir }messages.json`, msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs)  // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try original/region-stripped/EN only
                    msgHref = env.browser.language.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/(_locales\/[^_]+)_[^_]+(\/)/, '$1$2') // ...strip region before retrying
                            : `${msgHostDir}en/messages.json` // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
    }
    Object.assign(app, { ...remoteData.app, urls: { ...app.urls, ...remoteData.app.urls }, msgs: remoteData.msgs })

    // Init SETTINGS
    window.config = {}
    const settings = {

        controls: { // displays top-to-bottom in toolbar menu
            autoTalkDisabled: { type: 'toggle', defaultVal: false,
                label: app.msgs.mode_autoTalk },
            outlineText: { type: 'toggle', defaultVal: true,
                label: app.msgs.menuLabel_outlineText, helptip: app.msgs.helptip_outlineText },
            toggleHidden: { type: 'toggle', defaultVal: false,
                label: app.msgs.menuLabel_toggleVis, helptip: app.msgs.helptip_toggleVis }
        },

        load(...keys) {
            keys.flat().forEach(key =>
                config[key] = processKey(key, GM_getValue(`${app.configKeyPrefix}_${key}`, undefined)))
            function processKey(key, val) {
                const ctrl = settings.controls?.[key]
                if (val != undefined && ( // validate stored val
                        (ctrl?.type == 'toggle' && typeof val != 'boolean')
                     || (ctrl?.type == 'slider' && isNaN(parseFloat(val)))
                )) val = undefined
                return val ?? (ctrl?.defaultVal ?? (ctrl?.type == 'slider' ? 100 : false))
            }
        },

        save(key, val) { GM_setValue(`${app.configKeyPrefix}_${key}`, val) ; config[key] = val },

        typeIsEnabled(key) { // for menu labels + notifs to return ON/OFF
            const reInvertSuffixes = /disabled|hidden/i
            return reInvertSuffixes.test(key) // flag in control key name
                && !reInvertSuffixes.test(this.controls[key]?.label || '') // but not in label msg key name
                    ? !config[key] : config[key] // so invert since flag reps opposite type state, else don't
        }
    }
    settings.load(Object.keys(settings.controls))

    // Define MENU functions

    const toolbarMenu = {
        state: {
            symbols: ['‚ùå', '‚úîÔ∏è'], separator: env.scriptManager.name == 'Tampermonkey' ? ' ‚Äî ' : ': ',
            words: [app.msgs.state_off.toUpperCase(), app.msgs.state_on.toUpperCase()]
        },

        refresh() {
            if (typeof GM_unregisterMenuCommand == 'undefined') return
            this.entryIDs.forEach(id => GM_unregisterMenuCommand(id))
            this.register()
        },

        register() {

            // Add toggles
            this.entryIDs = Object.keys(settings.controls).map(key => {
                const entryData = settings.controls[key]
                const menuLabel = `${
                    entryData.symbol || this.state.symbols[+settings.typeIsEnabled(key)] } ${entryData.label} ${
                        entryData.type == 'toggle' ? this.state.separator
                                                   + this.state.words[+settings.typeIsEnabled(key)]
                      : entryData.type == 'slider' ? ': ' + config[key] + entryData.labelSuffix || ''
                      : entryData.status ? ` ‚Äî ${entryData.status}` : '' }`
                return GM_registerMenuCommand(menuLabel, () => {
                    settings.save(key, !config[key]) ; syncConfigToUI({ updatedKey: key })
                    notify(`${entryData.label}: ${this.state.words[+settings.typeIsEnabled(key)]}`)
                }, env.scriptManager.supportsTooltips ? { title: entryData.helptip || ' ' } : undefined)
            })

            // Add About entry
            this.entryIDs.push(GM_registerMenuCommand(
                `üí° ${app.msgs.menuLabel_about} ${app.msgs.appName}`, () => modals.open('about'),
                env.scriptManager.supportsTooltips ? { title: ' ' } : undefined
            ))
        }
    }

    window.updateCheck = () => {
        xhr({
            method: 'GET', url: `${app.urls.update.gm}?t=${Date.now()}`,
            headers: { 'Cache-Control': 'no-cache' },
            onload: ({ responseText }) => {

                // Compare versions, alert if update found
                app.latestVer = /@version +(.*)/.exec(responseText)?.[1]
                if (app.latestVer) for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(app.version.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(app.latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) // if outdated
                        return modals.open('update', 'available')
                }

                // Alert to no update found, nav back to About
                modals.open('update', 'unavailable') ; modals.open('about')
        }})
    }

    // Define FEEDBACK functions

    function notify(msg, pos = '', notifDuration = '', shadow = '') {

        // Strip state word to append colored one later
        const foundState = toolbarMenu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, pos, notifDuration, shadow || env.ui.scheme == 'light')
        const notif = document.querySelector('.chatgpt-notif:last-child')

        // Append styled state word
        if (foundState) {
            const stateStyles = {
                on: {
                    light: 'color: #5cef48 ; text-shadow: rgba(255,250,169,0.38) 2px 1px 5px',
                    dark:  'color: #5cef48 ; text-shadow: rgb(55,255,0) 3px 0 10px'
                },
                off: {
                    light: 'color: #ef4848 ; text-shadow: rgba(255,169,225,0.44) 2px 1px 5px',
                    dark:  'color: #ef4848 ; text-shadow: rgba(255, 116, 116, 0.87) 3px 0 9px'
                }
            }
            const styledStateSpan = dom.create.elem('span')
            styledStateSpan.style.cssText = stateStyles[
                foundState == toolbarMenu.state.words[0] ? 'off' : 'on'][env.ui.scheme]
            styledStateSpan.append(foundState) ; notif.append(styledStateSpan)
        }
    }

    // Define MODAL functions

    const modals = {
        stack: [], // of types of undismissed modals
        class: `${app.slug}-modal`,

        about() {

            // Show modal
            const labelStyles = 'text-transform: uppercase ; font-size: 17px ; font-weight: bold ;'
                              + `color: ${ env.ui.scheme == 'dark' ? 'white' : '#494141' }`
            const aboutModal = modals.alert(
                `${app.symbol} ${app.msgs.appName}`, // title
                `<span style="${labelStyles}">üß† ${app.msgs.about_author}:</span> `
                    + `<a href="${app.author.url}">${app.msgs.appAuthor}</a> ${app.msgs.about_and}`
                        + ` <a href="${app.urls.contributors}">${app.msgs.about_contributors}</a>\n`
                + `<span style="${labelStyles}">üè∑Ô∏è ${app.msgs.about_version}:</span> `
                    + `<span class="about-em">${app.version}</span>\n`
                + `<span style="${labelStyles}">üìú ${app.msgs.about_openSourceCode}:</span> `
                    + `<a href="${app.urls.github}" target="_blank" rel="nopener">`
                        + app.urls.github + '</a>\n'
                + `<span style="${labelStyles}">üöÄ ${app.msgs.about_latestChanges}:</span> `
                    + `<a href="${app.urls.github}/commits" target="_blank" rel="nopener">`
                        + `${app.urls.github}/commits</a>\n`
                + `<span style="${labelStyles}">‚ö° ${app.msgs.about_poweredBy}:</span> `
                    + `<a href="${app.urls.chatgptjs}" target="_blank" rel="noopener">chatgpt.js</a>`
                        + ` v${app.chatgptjsVer}`,
                [ // buttons
                    function checkForUpdates() { updateCheck() },
                    function getSupport(){},
                    function discuss(){},
                    function moreAIextensions(){}
                ], '', 691 // set width
            )

            // Format text
            aboutModal.querySelector('h2').style.cssText = `
                text-align: center ; font-size: 51px ; line-height: 46px ; padding: 15px 0`
            aboutModal.querySelector('p').style.cssText = `
                text-align: center ; overflow-wrap: anywhere ;
                margin: ${ env.browser.isPortrait ? '6px 0 -16px' : '3px 0 29px' }`

            // Hack buttons
            aboutModal.querySelectorAll('button').forEach(btn => {
                btn.style.cssText = 'height: 58px ; min-width: 136px ; text-align: center'

                // Replace link buttons w/ clones that don't dismiss modal
                if (/support|discuss|extensions/i.test(btn.textContent)) {
                    btn.replaceWith(btn = btn.cloneNode(true))
                    btn.onclick = () => modals.safeWinOpen(app.urls[
                        btn.textContent.includes(app.msgs.btnLabel_getSupport) ? 'support'
                      : btn.textContent.includes(app.msgs.btnLabel_discuss) ? 'discuss' : 'relatedExtensions'
                    ])
                }

                // Prepend emoji + localize labels
                if (/updates/i.test(btn.textContent))
                    btn.textContent = `üöÄ ${app.msgs.btnLabel_checkForUpdates}`
                else if (/support/i.test(btn.textContent))
                    btn.textContent = `üß† ${app.msgs.btnLabel_getSupport}`
                else if (/discuss/i.test(btn.textContent))
                    btn.textContent = `üó®Ô∏è ${app.msgs.btnLabel_discuss}`
                else if (/extensions/i.test(btn.textContent))
                    btn.textContent = `ü§ñ ${app.msgs.btnLabel_moreAIextensions}`

                // Hide Dismiss button
                else btn.style.display = 'none' // hide Dismiss button
            })

            return aboutModal
        },

        alert(title = '', msg = '', btns = '', checkbox = '', width = '') { // generic one from chatgpt.alert()
            const alertID = chatgpt.alert(title, msg, btns, checkbox, width),
                  alert = document.getElementById(alertID).firstChild
            this.init(alert) // add classes + rising particles bg
            return alert
        },

        init(modal) {
            if (!this.styles) this.stylize() // to init/append stylesheet
            modal.classList.add(this.class) ; modal.parentNode.classList.add(`${this.class}-bg`)
            dom.addRisingParticles(modal)
        },

        observeRemoval(modal, modalType, modalSubType) { // to maintain stack for proper nav
            const modalBG = modal.parentNode
            new MutationObserver(([mutation], obs) => {
                mutation.removedNodes.forEach(removedNode => { if (removedNode == modalBG) {
                    if (modals.stack[0].includes(modalSubType || modalType)) { // new modal not launched so nav back
                        modals.stack.shift() // remove this modal type from stack 1st
                        const prevModalType = modals.stack[0]
                        if (prevModalType) { // open it
                            modals.stack.shift() // remove type from stack since re-added on open
                            modals.open(prevModalType)
                        }
                    }
                    obs.disconnect()
                }})
            }).observe(modalBG.parentNode, { childList: true, subtree: true })
        },

        open(modalType, modalSubType) {
            const modal = modalSubType ? this[modalType][modalSubType]() : this[modalType]() // show modal
            if (!modal) return // since no div returned
            this.stack.unshift(modalSubType ? `${modalType}_${modalSubType}` : modalType) // add to stack
            this.init(modal) // add classes + rising particles bg
            this.observeRemoval(modal, modalType, modalSubType) // to maintain stack for proper nav
        },

        safeWinOpen(url) { open(url, '_blank', 'noopener') }, // to prevent backdoor vulnerabilities

        stylize() {
            if (!this.styles) document.head.append(this.styles = dom.create.elem('style'))
            this.styles.textContent = (
                `.${this.class} { /* modals */
                    user-select: none ; -webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none ;
                    font-family: -apple-system, system-ui, BlinkMacSystemFont, Segoe UI, Roboto,
                        Oxygen-Sans, Ubuntu, Cantarell, Helvetica Neue, sans-serif ;
                    padding: 20px 25px 24px 25px !important ; font-size: 20px ;
                    color: ${ env.ui.scheme == 'dark' ? 'white' : 'black' } !important ;
                    background-image: linear-gradient(180deg, ${
                       env.ui.scheme == 'dark' ? '#99a8a6 -200px, black 200px' : '#b6ebff -296px, white 171px' }) }
                .${this.class} [class*=modal-close-btn] {
                    position: absolute !important ; float: right ; top: 14px !important ; right: 16px !important ;
                    cursor: pointer ; width: 33px ; height: 33px ; border-radius: 20px }
                .${this.class} [class*=modal-close-btn] svg { height: 10px }
                .${this.class} [class*=modal-close-btn] path {
                    ${ env.ui.scheme == 'dark' ? 'stroke: white ; fill: white'
                                               : 'stroke: #9f9f9f ; fill: #9f9f9f' }}
                ${ env.ui.scheme == 'dark' ? // invert dark mode hover paths
                    `.${this.class} [class*=modal-close-btn]:hover path { stroke: black ; fill: black }` : '' }
                .${this.class} [class*=modal-close-btn]:hover { background-color: #f2f2f2 } /* hover underlay */
                .${this.class} [class*=modal-close-btn] svg { margin: 11.5px } /* center SVG for hover underlay */
                .${this.class} a { color: #${ env.ui.scheme == 'dark' ? '00cfff' : '1e9ebb' } !important }
                .${this.class} h2 { font-weight: bold }
                .${this.class} button {
                  --btn-transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out ;
                    font-size: 14px ; text-transform: uppercase ; /* shrink/uppercase labels */
                    border-radius: 0 !important ; /* square borders */
                    transition: var(--btn-transition) ; /* smoothen hover fx */
                       -webkit-transition: var(--btn-transition) ; -moz-transition: var(--btn-transition) ;
                       -o-transition: var(--btn-transition) ; -ms-transition: var(--btn-transition) ;
                    cursor: pointer !important ; /* add finger cursor */
                    border: 1px solid ${ env.ui.scheme == 'dark' ? 'white' : 'black' } !important ;
                    padding: 8px !important ; min-width: 102px } /* resize */
                .${this.class} button:hover { /* add zoom, re-scheme */
                    transform: scale(1.055) ; color: black !important ;
                    background-color: #${ env.ui.scheme == 'dark' ? '00cfff' : '9cdaff' } !important }
                ${ env.browser.isMobile ? '' : `.${this.class} .modal-buttons { margin-left: -13px !important }` }
                .about-em { color: ${ env.ui.scheme == 'dark' ? 'white' : 'green' } !important }`
            )
        },

        update: {
            width: 377,

            available() {

                // Show modal
                const updateAvailModal = modals.alert(`üöÄ ${app.msgs.alert_updateAvail}!`, // title
                    `${app.msgs.alert_newerVer} ${app.msgs.appName} ` // msg
                        + `(v${app.latestVer}) ${app.msgs.alert_isAvail}!  `
                        + '<a target="_blank" rel="noopener" style="font-size: 0.7rem" href="'
                            + `${app.urls.github}/commits/main/greasemonkey/${app.slug}.user.js`
                        + `">${app.msgs.link_viewChanges}</a>`,
                    function update() { // button
                        modals.safeWinOpen(`${app.urls.update.gm}?t=${Date.now()}`)
                    }, '', modals.update.width
                )

                // Localize button labels if needed
                if (!env.browser.language.startsWith('en')) {
                    const updateBtns = updateAvailModal.querySelectorAll('button')
                    updateBtns[1].textContent = app.msgs.btnLabel_update
                    updateBtns[0].textContent = app.msgs.btnLabel_dismiss
                }

                return updateAvailModal
            },

            unavailable() {
                return modals.alert(`${app.msgs.alert_upToDate}!`, // title
                    `${app.msgs.appName} (v${app.version}) ${app.msgs.alert_isUpToDate}!`, // msg
                    '', '', modals.update.width
                )
            }
        }
    }

    // Define PLAY functions

    function getLastMoreOptionsBtn() {
        const moreOptionsBtns = document.querySelectorAll(selectors.btns.moreOptions)
        return moreOptionsBtns[moreOptionsBtns.length -1]
    }

    function getTalkingMsgDiv() {
        return getLastMoreOptionsBtn()?.closest('article')?.querySelector(selectors.replyDiv)
    }

    function openLastMoreOptionsMenu() {
        const lastMoreOptionsBtn = getLastMoreOptionsBtn()
        if (!lastMoreOptionsBtn
            || lastMoreOptionsBtn.getAttribute('data-testid') == 'conversation-options-button' // skip master btn
        ) return
        lastMoreOptionsBtn.dispatchEvent(new KeyboardEvent('keydown', { key: 'Enter', bubbles: true }))
    }

    function outlineText() {
        if (!config.outlineText) return
        const talkingMsgDiv = getTalkingMsgDiv() ; if (!talkingMsgDiv) return
        const durations = { iniDelay: 500 /* ms */, pulse: 5 /* s */ }
        const outlineColor = chatgpt.isDarkMode() ? 'rgba(223, 225, 227, 0.7)'
                                                  : 'rgba(0, 157, 255, 0.7)'
        setTimeout(() => talkingMsgDiv.style.cssText = `
            box-shadow: 0 0 0 0 ${outlineColor} ;
            animation: pulse-glow ${durations.pulse}s ease-in-out ; border-radius: 8px`,
        durations.iniDelay)
        ;(window.pulseGlowKeyframes ||= dom.create.style()).textContent = `
            @keyframes pulse-glow {
                0%   { box-shadow: 0 0 0 0   ${outlineColor} }
                50%  { box-shadow: 0 0 0 8px rgba(59, 130, 246, 0) }
                100% { box-shadow: 0 0 0 0   rgba(59, 130, 246, 0) }
            }`
        if (!window.pulseGlowKeyframes.isConnected) document.head.append(window.pulseGlowKeyframes)
    }

    function playLastMsg() {
        openLastMoreOptionsMenu()
        dom.get.loadedElem(selectors.btns.play, { timeout: 1000 }).then(playBtn => {
            playBtn.click() ; document.querySelector('textarea')?.click() ; outlineText() })
    }

    async function stopPlayingMsg() {
        openLastMoreOptionsMenu()
        const actionBtn = await Promise.race([
            dom.get.loadedElem(selectors.btns.stop),
            dom.get.loadedElem(selectors.btns.play),
            new Promise(resolve => setTimeout(resolve, 1000))
        ])
        if (actionBtn?.matches?.(selectors.btns.stop)) {
            actionBtn.click() // stop playing
            if (config.outlineText) { // rid outline
                const talkingMsgDiv = getTalkingMsgDiv()
                if (talkingMsgDiv) talkingMsgDiv.style.cssText = ''
            }
        }
        document.querySelector('textarea')?.click()
    }

    // Define UI functions

    function getScheme() {
        return /\b(light|dark)\b/.exec(document.documentElement.className)?.[1]
            || ( window.matchMedia?.('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' )
    }

    function syncConfigToUI(options) {
        if (/autoTalkDisabled|toggleHidden/.test(options.updatedKey)) {
            toggles.sidebar.update.state()
            if (options.updatedKey == 'autoTalkDisabled') {
                if (config.autoTalkDisabled) stopPlayingMsg() ; else playLastMsg() }
        }
        toolbarMenu.refresh() // prefixes/suffixes
    }

    const toggles = {

        sidebar: {
            class: `${app.slug}-sidebar-toggle`,

            create() {

                // Init toggle elems
                this.div = dom.create.elem('div', { class: this.class })
                this.navicon = dom.create.elem('img')
                this.toggleInput = dom.create.elem('input')
                this.toggleLabel = dom.create.elem('label')
                this.switchSpan = dom.create.elem('span')
                this.knobSpan = dom.create.elem('span')

                // Assemble elems into parent div
                this.switchSpan.append(this.knobSpan)
                this.div.append(this.navicon, this.toggleInput, this.toggleLabel, this.switchSpan)

                // Stylize elems
                this.stylize() // create/append stylesheet

                // Update scheme/state
                this.update.scheme() ; this.update.state()

                // Add hover/click listeners
                this.div.onmouseover = this.div.onmouseout = ({ type }) => // trigger OpenAI hover overlay
                    this.div.style.setProperty('--item-background-color',
                        `var(--sidebar-surface-${ type == 'mouseover' ? 'secondary' : 'primary' })`)
                this.div.onclick = () => {
                    settings.save('autoTalkDisabled', this.toggleInput.checked)
                    syncConfigToUI({ updatedKey: 'autoTalkDisabled' })
                    notify(`${app.msgs.mode_autoTalk}: ${toolbarMenu.state.words[+!config.autoTalkDisabled]}`)
                }
            },

            stylize() { // requires lib/<chatgpt|dom>.js + env
                const firstLink = chatgpt.getNewChatLink()
                if (firstLink && !this.classesBorrowed) { // borrow/assign classes from sidebar elems
                    const firstIcon = firstLink.querySelector('div:first-child'),
                        firstLabel = firstLink.querySelector('div:nth-child(2)')
                    this.div.classList.add(...firstLink.classList, ...(firstLabel?.classList || []))
                    this.div.querySelector('img')?.classList.add(...(firstIcon?.classList || []))
                    this.classesBorrowed = true
                }
                this.styles ||= dom.create.style(
                    `:root { /* vars */
                      --switch-enabled-bg-color: #ad68ff ; --switch-disabled-bg-color: #ccc ;
                      --switch-enabled-box-shadow: 1px 2px 8px #d8a9ff ;
                      --switch-enabled-hover-box-shadow: 0 1px 10px #9b5ad1 ;
                      --knob-box-shadow: rgba(0,0,0,0.3) 0 1px 2px 0 ;
                      --knob-box-shadow-dark: rgba(0,0,0,0.3) 0 1px 2px 0, rgba(0,0,0,0.15) 0 3px 6px 2px }`

                    // Element styles
                  + `.${this.class} { /* parent div */
                        width: auto ; max-height: 37px ; padding: 0 5px ; user-select: none ; cursor: pointer ;
                        opacity: 1 !important } /* overcome OpenAI click-dim */
                    .${this.class} > img { /* navicon */
                        width: 1.25rem ; height: 1.25rem ; margin-left: 2px ; margin-right: 4px }
                    .${this.class} > input { display: none } /* hide checkbox */
                    .${this.class} > span { /* switch span */
                        position: relative ; width: 30px ; height: 15px ; border-radius: 28px ;
                        background-color: var(--switch-disabled-bg-color) ;
                        bottom: ${ firstLink ? '0.5px' : '-0.15em' } ;
                        transition: 0.4s ; -webkit-transition: 0.4s ; -moz-transition: 0.4s ;
                           -o-transition: 0.4s ; -ms-transition: 0.4s }
                    .${this.class} > span.enabled { /* switch on */
                        background-color: var(--switch-enabled-bg-color) ;
                        box-shadow: var(--switch-enabled-box-shadow) ;
                           -webkit-box-shadow: var(--switch-enabled-box-shadow) ;
                           -moz-box-shadow: var(--switch-enabled-box-shadow) ;
                        transition: 0.15s ; -webkit-transition: 0.15s ; -moz-transition: 0.15s ;
                           -o-transition: 0.15s ; -ms-transition: 0.15s }
                    .${this.class}:hover > span.enabled { /* switch on when hover on parent div */
                        box-shadow: var(--switch-enabled-hover-box-shadow) ;
                       -webkit-box-shadow: var(--switch-enabled-hover-box-shadow) ;
                       -moz-box-shadow: var(--switch-enabled-hover-box-shadow) }
                    .${this.class} > span.disabled { /* switch off */
                        background-color: var(--switch-disabled-bg-color) ; box-shadow: none }
                    .${this.class} > span > span { /* knob span */
                        position: absolute ; width: 12px ; height: 12px ; content: "" ; border-radius: 28px ;
                        background-color: white ; left: 2px ; bottom: 1.25px ;
                        box-shadow: var(--knob-box-shadow) ;
                           -webkit-box-shadow: var(--knob-box-shadow) ; -moz-box-shadow: var(--knob-box-shadow) ;
                        transition: 0.4s ; -webkit-transition: 0.4s ; -moz-transition: 0.4s ;
                           -o-transition: 0.4s ; -ms-transition: 0.4s }
                    .${this.class} > label { /* toggle label */
                        cursor: pointer ; overflow: hidden ; text-overflow: ellipsis ; white-space: nowrap ;
                        color: black ; padding: 0 3px ; flex-grow: 1 ; font-size: var(--text-sm) }`

                    // Dark scheme mods
                  + `.${this.class}.dark > span.enabled { /* switch on */
                        background-color: var(--switch-enabled-bg-color) ;
                        box-shadow: var(--switch-enabled-hover-box-shadow) ; /* use hover style instead */
                           -webkit-box-shadow: var(--switch-enabled-hover-box-shadow) ;
                           -moz-box-shadow: var(--switch-enabled-hover-box-shadow) }
                    .${this.class}.dark:hover > span.enabled { /* switch on when hover on parent div */
                        box-shadow: var(--switch-enabled-box-shadow) ; /* use regular style instead */
                           -webkit-box-shadow: var(--switch-enabled-box-shadow) ;
                           -moz-box-shadow: var(--switch-enabled-box-shadow) }
                    .${this.class}.dark > span > span { /* knob span */
                        box-shadow: var(--knob-box-shadow-dark) ; /* make 3D-er */
                           -webkit-box-shadow: var(--knob-box-shadow-dark) ;
                           -moz-box-shadow: var(--knob-box-shadow-dark) }
                    .${this.class}.dark > label { color: white } /* toggle label */`
                )
                if (!this.styles.isConnected) document.head.append(this.styles)
            },

            insert() { // requires lib/<chatgpt|dom>.min.js
                const sidebar = document.querySelector(chatgpt.selectors.sidebar)
                if (!sidebar || this.status?.startsWith('insert') || document.querySelector(`.${this.class}`)) return
                this.status = 'inserting' ; if (!this.div) this.create()
                const sidebarHeader = sidebar.querySelector('div#sidebar-header')
                if (sidebarHeader) { sidebarHeader.after(this.div) ; this.status = 'inserted' }
                else {
                    this.status = 'waitingForSidebar'
                    dom.get.loadedElem('div#sidebar-header').then(header => {
                        header.after(this.div) ; this.stylize() ; this.status = 'inserted'
                    }).catch((err) => { this.status = 'failed' ; console.error('toggles.sidebar.insert()', err) })
                }
            },

            update: {

                navicon({ preload } = {}) {
                    const baseURL = `${
                        app.urls.resourceHost.replace(/@\w+/, '@397297d')}/assets/images/icons/soundwave`
                    const stateMap = { enabled: 'tall', disabled: '' }, schemeMap = { light: 'black', dark: 'white' }
                    if (preload)
                        Object.keys(stateMap).forEach(state => Object.keys(schemeMap).forEach(scheme =>
                            new Image().src = `${baseURL}/${stateMap[state]}/${schemeMap[scheme]}.svg`))
                    else toggles.sidebar.navicon.src = baseURL
                        + `/${ stateMap[config.autoTalkDisabled ? 'disabled' : 'enabled'] }`
                        + `/${ schemeMap[env.ui.scheme] }.svg`
                },

                scheme() { // to match UI scheme
                    toggles.sidebar.div.classList.remove('dark', 'light')
                    toggles.sidebar.div.classList.add(env.ui.scheme)
                    toggles.sidebar.update.navicon()
                },

                state() {
                    if (!toggles.sidebar.div) return // since toggle never created = sidebar missing
                    toggles.sidebar.div.style.display = config.toggleHidden ? 'none' : 'flex'
                    toggles.sidebar.toggleInput.checked = !config.autoTalkDisabled
                    toggles.sidebar.toggleLabel.textContent = `${app.msgs.mode_autoTalk} `
                        + app.msgs[`state_${ toggles.sidebar.toggleInput.checked ? 'enabled' : 'disabled' }`]
                    requestAnimationFrame(() => {
                        toggles.sidebar.switchSpan.className = toggles.sidebar.toggleInput.checked ? 'enabled'
                                                                                                   : 'disabled'
                        toggles.sidebar.knobSpan.style.transform = `translateX(${
                            toggles.sidebar.toggleInput.checked ? 13 : 0 }px)`
                    }) // to trigger 1st transition fx
                    toggles.sidebar.update.navicon()
                }
            }
        }
    }

    // Run MAIN routine

    toolbarMenu.register() // create browser toolbar menu
    toggles.sidebar.update.navicon({ preload: true }) // preload sidebar NAVICON variants
    await Promise.race([chatgpt.isLoaded(), new Promise(resolve => setTimeout(resolve, 5000))]) // initial UI loaded
    ;['rpg', 'rpw'].forEach(cssType => // add Rising Particles styles
        document.head.append(dom.create.style(GM_getResourceText(`${cssType}CSS`))))
    toggles.sidebar.insert()

    // Observe body for need to AUTO-PLAY response
    let locationPath = location.pathname // to track nav
    const selectors = {
        btns: {
            moreOptions: 'button:has(path[d^="M15.498"])',
            play: 'div[data-testid*=voice-play]',
            stop: 'div:has(> svg > path[d^="M10 2.08496C14.3713"])'
        },
        replyDiv: 'div[data-message-author-role]'
    }
    new MutationObserver(mutations => {
        if (config.autoTalkDisabled
            || !navigator.userActivation?.hasBeenActive // auto-play not allowed by browser
            || location.search == '?temporary-chat=true' // ChatGPT fails to play msg
            || document.querySelector(chatgpt.selectors.btns.login) // no Play btn
        ) return
        if (locationPath != location.pathname) { // nav'd to diff page, play last msg if convo page
            locationPath = location.pathname ; if (/\/c\/[\w-]+$/.test(locationPath)) playLastMsg()
        } else for (const { addedNodes } of mutations) for (const node of addedNodes) { // look for options btns created
            if (node.tagName != 'DIV'
                || !node.querySelector(selectors.btns.moreOptions)?.closest('article') // ignore convo options
            ) continue
            playLastMsg()
        }
    }).observe(document.body, { childList: true, subtree: true })

    // Monitor NODE CHANGES to maintain sidebar toggle visibility
    new MutationObserver(() => {
        if (!config.toggleHidden && document.querySelector(chatgpt.selectors.sidebar)
            && !document.querySelector(`.${toggles.sidebar.class}`)
            && toggles.sidebar.status != 'inserting'
        ) { toggles.sidebar.status = 'missing' ; toggles.sidebar.insert() }
    }).observe(document.body, { attributes: true, subtree: true })

    // Monitor SCHEME PREF changes to update sidebar toggle + modal colors
    new MutationObserver(handleSchemePrefChange).observe( // for site scheme pref changes
        document.documentElement, { attributes: true, attributeFilter: ['class'] })
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener( // for browser/system scheme pref changes
        'change', () => requestAnimationFrame(handleSchemePrefChange))
    function handleSchemePrefChange() {
        const displayedScheme = getScheme()
        if (env.ui.scheme != displayedScheme) {
            env.ui.scheme = displayedScheme ; toggles.sidebar.update.scheme() ; modals.stylize() }
    }

})()
