// ==UserScript==
// @name                ChatGPT Infinity ∞
// @name:af             ChatGPT Oneindig ∞
// @name:ar             دردشةGPT إنفينيتي ∞
// @name:az             ChatGPT Sonsuzluq ∞
// @name:be             ChatGPT Бясконцасць ∞
// @name:bg             ChatGPT Безкрайност ∞
// @name:bn             ChatGPT ইনফিনিটি ∞
// @name:bo             ChatGPT དག་སྐྱེས་ཡོད་པ་ ∞
// @name:bs             ChatGPT Beskrajnost ∞
// @name:ca             ChatGPT Infinit ∞
// @name:ckb            ChatGPT نەپێندییە ∞
// @name:cs             ChatGPT Nekonečno ∞
// @name:cy             ChatGPT Anfeidredd ∞
// @name:da             ChatGPT Uendelighed ∞
// @name:de             ChatGPT Unendlichkeit ∞
// @name:dv             ChatGPT ނުވަތަ ބާވައްޖޭގެން ∞
// @name:dz             ChatGPT རྩེད་སྒྲིབ་གཉིས་ ∞
// @name:el             ChatGPT Άπειρο ∞
// @name:eo             ChatGPT Infinito ∞
// @name:es             ChatGPT Infinito ∞
// @name:et             ChatGPT Lõpmatus ∞
// @name:eu             ChatGPT Infinitua ∞
// @name:fa             ChatGPT بینهایت ∞
// @name:fi             ChatGPT Ääretön ∞
// @name:fo             ChatGPT Óendanlighed ∞
// @name:fr             ChatGPT Infini ∞
// @name:fr-CA          ChatGPT Infini ∞
// @name:gl             ChatGPT Infinito ∞
// @name:gu             ChatGPT અનંત ∞
// @name:haw            ChatGPT Māhina ʻole ∞
// @name:he             ChatGPT אינסוף ∞
// @name:hi             ChatGPT अनंत ∞
// @name:hr             ChatGPT Beskrajnost ∞
// @name:hu             ChatGPT Végtelenség ∞
// @name:hy             ChatGPT Անվերջ ∞
// @name:id             ChatGPT Infinity ∞
// @name:is             ChatGPT Óendanleiki ∞
// @name:it             ChatGPT Infinito ∞
// @name:ja             ChatGPT 無限 ∞
// @name:ka             ChatGPT უსასრულობა ∞
// @name:km             ChatGPT អនឡាញ ∞
// @name:kn             ChatGPT ಅನಂತ ∞
// @name:ko             ChatGPT 무한 ∞
// @name:ku             ChatGPT Pêşangeh ∞
// @name:ky             ChatGPT Ички ∞
// @name:la             ChatGPT Infinitas ∞
// @name:lb             ChatGPT Unendlechkeet ∞
// @name:lo             ChatGPT ບໍ່ໄປສູ່ຈັກຂອງສາມຫວ່າງ ∞
// @name:lt             ChatGPT Begalybė ∞
// @name:lv             ChatGPT Bezgalība ∞
// @name:mk             ChatGPT Бесконечност ∞
// @name:ml             ChatGPT അനന്തത ∞
// @name:mn             ChatGPT Тэгш бус ∞
// @name:mt             ChatGPT Infinità ∞
// @name:my             ChatGPT မြင်ကွင်း ∞
// @name:ne             ChatGPT अनंत ∞
// @name:nl             ChatGPT Oneindigheid ∞
// @name:no             ChatGPT Uendelighet ∞
// @name:pa             ChatGPT ਇਨਫਿਨਿਟੀ ∞
// @name:pl             ChatGPT Nieskończoność ∞
// @name:ps             ChatGPT لامکان ∞
// @name:pt             ChatGPT Infinito ∞
// @name:pt-BR          ChatGPT Infinito ∞
// @name:ro             ChatGPT Infinitate ∞
// @name:ru             ChatGPT Бесконечность ∞
// @name:si             ChatGPT අනන්තය ∞
// @name:sk             ChatGPT Nekonečno ∞
// @name:sl             ChatGPT Neskončnost ∞
// @name:so             ChatGPT Qaybtiisa ∞
// @name:sr             ChatGPT Бескрајност ∞
// @name:sv             ChatGPT Oändlighet ∞
// @name:ta             ChatGPT முடிவிலிருந்து ∞
// @name:te             ChatGPT అనంతత ∞
// @name:tg             ChatGPT Беоҳӣ ∞
// @name:th             ChatGPT อนันต์ ∞
// @name:ti             ChatGPT መደመር ∞
// @name:tk             ChatGPT Sonsuzluk ∞
// @name:tr             ChatGPT Sonsuzluk ∞
// @name:uk             ChatGPT Нескінченність ∞
// @name:ur             ChatGPT بے انتہا ∞
// @name:vi             ChatGPT Vô cùng ∞
// @name:yi             ChatGPT אינפיניטי ∞
// @name:zh             ChatGPT 无限 ∞
// @name:zh-CN          ChatGPT 无限 ∞
// @name:zh-HK          ChatGPT 無限 ∞
// @name:zh-SG          ChatGPT 无限 ∞
// @name:zh-TW          ChatGPT 無限 ∞
// @description         Generate endless answers from all-knowing ChatGPT (in any language!)
// @description:af      Genereer eindelose antwoorde van die alwetende ChatGPT (in enige taal!)
// @description:am      ሓበሬታይ ኣይነበርና መልእኽቲ ኣለኹም ኣሎኻዊ ያልኣይት ChatGPT (በቋንቋ!)
// @description:ar      قم بتوليد إجابات لا نهائية من ChatGPT المعرف بكل شيء (بأي لغة!)
// @description:az      Hər şeyi bilən ChatGPT-dən sonsuz cavablar yaradın (hər hansı bir dil ilə!)
// @description:be      Стварыце бясконцы адказы ад ўсеведучага ChatGPT (на любой мове!)
// @description:bem     Pamene mwaposa mafolosho a mʌnoze ChatGPT (mu lupiya lwa ndalama!)
// @description:bg      Генерирайте безкрайни отговори от всезнайния ChatGPT (на всяк език!)
// @description:bn      সর্বজ্ঞ চ্যাটজিপিটি থেকে অসীম উত্তর তৈরি করুন (যে কোন ভাষায়!)
// @description:bo      བཟོས་པ་བརྗོད་པའི་ChatGPTགི་གྲོས་པར་འགྲུབ་འདེམས་བསྐྱེད་མི་འོངས་པ། (ལས་སྐབས་ཀྱི་སྐད་ཡིག་གི་སྐད་!)
// @description:bs      Generišite beskonačne odgovore od sveznajućeg ChatGPT (na bilo kom jeziku!)
// @description:ca      Genereu respostes infinites des de l'omniscient ChatGPT (en qualsevol idioma!)
// @description:ceb     Sukdagon ang walay katapusan nga mga tubag gikan sa tanan-mahibaw-anong ChatGPT (sa bisan unsang pinulongan!)
// @description:ckb     پێشبینی چاتگپتەکە دیارییەکانی پێکراوەکان بنووسە (بە هەر زمانێکی دیکە!)
// @description:cs      Generujte nekonečné odpovědi od vševědoucího ChatGPT (v jakémkoli jazyce!)
// @description:cy      Cynhyrchwch atebion diddiwedd o ChatGPT y gŵr sy'n gwybod popeth (mewn unrhyw iaith!)
// @description:da      Generer endeløse svar fra den altvidende ChatGPT (på hvilket som helst sprog!)
// @description:de      Generieren Sie endlose Antworten von dem allwissenden ChatGPT (in beliebiger Sprache!)
// @description:dv      އެހެނދުކަޗެއްވެސީ ޗެއްސިސްޓޯނަށް ނިޔަލައިފައިވަނީ ސުރުކޮށް ފީހުން (ކަންއެވެސް ހަމަވެސް!)
// @description:dz      ཆགས་ཀྱིས་ལ་བརྟེན་གང་རུང་གི་ChatGPTགི་ཚོགས་པའི་སྐད་ཡིག་གྱི་སྐད་ཡིག་བྱེད་པ། (བླ་མའི་སྐད་ཡིག་!)
// @description:el      Δημιουργήστε ατελείωτες απαντήσεις από το γνώστη ChatGPT (σε οποιαδήποτε γλώσσα!)
// @description:eo      Kreu nesfinaĵajn respondojn el la ĉio-scianta ChatGPT (en ajn lingvo!)
// @description:es      Genera respuestas infinitas desde el ChatGPT omnisciente (¡en cualquier idioma!)
// @description:et      Loo lõputuid vastuseid kõike-teadvast ChatGPT-st (mis tahes keeles!)
// @description:eu      Sortu erantzun infinituak guztiz-arduratsuaren ChatGPT-tik (edozein hizkuntzan!)
// @description:fa      پاسخهای بیپایانی را از ChatGPT همهدانا تولید کنید (به هر زبانی!)
// @description:fi      Luo loputtomia vastauksia kaikkitietävästä ChatGPT:stä (millä tahansa kielellä!)
// @description:fo      Skapa endalaus svør frá altvitandi ChatGPT (á hvørjum málrøð!)
// @description:fr      Générez des réponses infinies à partir de ChatGPT qui sait tout (dans n'importe quelle langue!)
// @description:fr-CA   Générez des réponses infinies à partir de ChatGPT qui sait tout (dans n'importe quelle langue!)
// @description:gd      Cruthaich freagairtean gun crìoch à ChatGPT a tha a' faighneachd gach càil (ann an sam bith cànan!)
// @description:gl      Xere as respostas infinitas do ChatGPT que todo o sabe (en calquera lingua!)
// @description:gu      જ્ઞાનવાન ChatGPT થી અનંત જવાબો ઉત્પન કરો (કોઈ પણ ભાષામાં!)
// @description:haw     Haleleʻa i nā ʻōlelo pālulelo mai ke kupa ʻike loa o ChatGPT (i loko o kēlā ʻōlelo aku aʻe!)
// @description:he      יצרו תשובות אינסופיות מה-ChatGPT המבין הכל (בכל שפה!)
// @description:hi      सभी-जाननेवाले चैटजीपीटी से अनंत उत्तरों का उत्पादन करें (किसी भी भाषा में!)
// @description:hr      Generirajte beskrajne odgovore iz sveznajućeg ChatGPT-a (na bilo kojem jeziku!)
// @description:ht      Jenere repons san fen soti nan ChatGPT k-ap konnen tout bagay yo (nan nenpòt lang!)
// @description:hu      Végtelen válaszokat generáljon a mindentudó ChatGPT-ből (bármely nyelven!)
// @description:hy      Ստեղծեք անսահմանափակ պատասխաններ ամենագիտական ChatGPT-ից (ցանկացած լեզուն մեջ!)
// @description:id      Hasilkan jawaban tak terbatas dari ChatGPT yang tahu segalanya (dalam bahasa apa pun!)
// @description:is      Búið til endalaus svör frá allvissu ChatGPT (á hvaða tungumáli sem er!)
// @description:it      Genera risposte infinite dall'onnisciente ChatGPT (in qualsiasi lingua!)
// @description:ja      あらゆる言語で全知のChatGPTから無限の回答を生成します！
// @description:jv      Mbukak panggung jawaban saka ChatGPT kang suwénéh kabèh (kénging basa apapun!)
// @description:ka      შექმენით უსასრულო პასუხები ყველგანაწილებული ChatGPT-დან (ნელა ენაზე!)
// @description:kab     Kkes-as yidir seg yisem-asen n tafriqt ara ddunnit ChatGPT (di tifrat ara ddunit!)
// @description:kk      Барлық тілде бар білген ChatGPT-ден шексіз жауаптар жасау (қандай да тілде!)
// @description:km      បង្កើតចម្លើយមិនឃើញចប់ពី ChatGPT ដែលចែកសង្ស័យទាំងអស់ (ជាន់គ្រប់ភាសា!)
// @description:kn      ಎಲ್ಲರು ತಿಳಿದಿರುವ ಚಾಟ್ಜಿಪಿಟಿಯಿಂದ ಅನಂತ ಉತ್ತರಗಳನ್ನು ರಚಿಸಿ (ಯಾವುದೇ ಭಾಷೆಯಲ್ಲಿ!)
// @description:ko      어떤 언어로든지 무궁무진한 답변을 만들어내는 ChatGPT입니다!
// @description:ku      Ji ChatGPT-ê, ku hemî tiştan dizane, bersiva li serbazên li dor qewî yên hilbijartin (bi hertiştî zimanek!)
// @description:ky      Түз билимдүү ChatGPT боюнча чыгармаларды жаса
// @description:la      Genera infinitas responsiones de ChatGPT omniscio (in qualibet lingua!)
// @description:lb      Generéiert endlos Äntwerten vum allwëssende ChatGPT (op jiddere Sprooch!)
// @description:lo      ສ້າງຜົນສົດທີ່ສາມາດເລືອກຈາກພາສາທີ່ຮູ້ບຸກກຳລັງ ChatGPT (ໃນພາສາໃດໜຶ່ງ!)
// @description:lt      Sugeneruokite begalinį atsakymų kiekį iš visai žinoančio ChatGPT (bet kuria kalba!)
// @description:lv      Ģenerē nebeidzamus atbilžu variantus no vissapratīgā ChatGPT (jebkurā valodā!)
// @description:mg      Mandoza ny valiny miaraka amin'ny ChatGPT mahalala ny zavatra rehetra (amin'ny fiteny iray kokoa!)
// @description:mi      Whakapūmau i ngā whakautu kore mutunga mai i te ChatGPT matau i ngā reo katoa!
// @description:mk      Генерирајте безброј одговори од сèзнаената ChatGPT (на било кој јазик!)
// @description:ml      എന്നെഴുതാൻ അനന്യനായ ChatGPT (ഏതെങ്കിലും ഭാഷയിൽ) ഇന്നേക്കും വേണ്ടി അവസാനിപ്പിക്കുക!
// @description:mn      Сүүлд үлдсэнээсээ хайрцаг болох ChatGPT (ямар ч хэл дээр) дээрхээр ярих
// @description:ms      Cipta pelbagai jawapan daripada ChatGPT yang tahu segala-galanya (dalam apa-apa bahasa!)
// @description:mt      Iġġenera risposti infiniti mill-ChatGPT li kollha jaf (f'xi lingwa!)
// @description:my      အားလုံးကိုသင်ရိုးရိုးဆွဲနိုင်သည့် ChatGPT (တစ်ခုမှာယူသုံးရန်!)
// @description:ne      सबै-ज्ञानी ChatGPT बाट अनंत उत्तरहरू उत्पन्न गर्नुहोस् (कुनै पनि भाषामा!)
// @description:nl      Genereer eindeloze antwoorden van alwetende ChatGPT (in elke taal!)
// @description:no      Generer endeløse svar fra allvitende ChatGPT (på hvilket som helst språk!)
// @description:ny      Galimoto mabwino a mtendere zosiyanasiyana kuchokera ku ChatGPT woyankhula zonse! (muyankhulitsa chilichonse!)
// @description:pa      ਸਭ ਜਾਣ ਵਾਲੇ ChatGPT ਤੋਂ ਲੰਬੇ ਉੱਤਰਾਂ ਨੂੰ ਬਣਾਓ (ਕਿਸੇ ਵੀ ਭਾਸ਼ਾ ਵਿੱਚ!)
// @description:pap     Hasi respuesta sinfin di ChatGPT ku tur sabi (na kua idioma!)
// @description:pl      Generuj nieskończone odpowiedzi od wszechwiedzącego ChatGPT (w dowolnym języku!)
// @description:ps      د هغوی چټکال ChatGPT لخوا نهایت جوابونه جوړه کړئ (د هر یوه ژبه کی!)
// @description:pt      Gere respostas infinitas do ChatGPT onisciente (em qualquer idioma!)
// @description:pt-BR   Gere respostas infinitas do ChatGPT onisciente (em qualquer idioma!)
// @description:rn      Basha inzira nk'itandukanye z'uko ChatGPT uzi (mu rurimi rwose!)
// @description:ro      Generează răspunsuri infinite de la ChatGPT omniscient (în orice limbă!)
// @description:ru      Генерируйте бесконечные ответы от всезнающего ChatGPT (на любом языке!)
// @description:rw      Banda inama z'imirimo isigaye zose z'umuco wa ChatGPT (mu rurimi rwose!)
// @description:sg      Tia ngamana nga mbetela ti ChatGPT tozuwa mitayi mingi (po wundi ndimi yo ngambo!)
// @description:si      සියළු දැනටමත් සහතිකපත්කරන තවත් සිතියම් සැකසුම් ලබා දෙන්නාවූ ChatGPT සෑදීම (ඕනෑම භාෂාවෙන්ම!)
// @description:sk      Generujte nekonečné odpovede od vševietajúceho ChatGPT (v akomkoľvek jazyku!)
// @description:sl      Generirajte neskončne odgovore iz vsevednega ChatGPT (v katerem koli jeziku!)
// @description:sm      Faia se faiga tele i le ChatGPT eseese (i nisi gagana!)
// @description:sn      Simudza mhinduro dzakawanda kubva kune ChatGPT ichiwanikwa chisarudzo! (mune rimwe nguva!)
// @description:so      Kor u qaado jawaabo kala duwan oo ka soo saar ChatGPT (luuqad ka mid ah!)
// @description:sr      Генеришите безброј одговора од свемоћног ChatGPT (на било ком језику!)
// @description:sv      Generera oändliga svar från allvetande ChatGPT (på valfritt språk!)
// @description:sw      Toa majibu yasiyokuwa na mwisho kutoka kwa ChatGPT mwenye maarifa yote (katika lugha yoyote!)
// @description:ta      அனைத்து தகவலையும் அறியப்பட்ட சொந்தமான ChatGPT இலிருந்து முடிவுகளை உருவாக்கவும் (எந்த மொழியிலும்!)
// @description:te      అన్నింటినీకింట మాటలు రాయండి ChatGPT గురించి అనేక జవాబాలను సృష్టించండి (ఏదైనా భాషలో!)
// @description:tg      Ҷавобҳои бесуданни ChatGPTи ҳамаифақат (дар як забони муайяни!)
// @description:th      สร้างคำตอบไม่สิ้นสุดจาก ChatGPT ที่รู้ทุกสิ่ง (ในภาษาใดก็ได้!)
// @description:ti      ክርስትን ለማውጣት ከገጽታውን ChatGPT የተከሳሽ አስተካክል አስተካክሎት (በእውነት ቋንቋ!)
// @description:tk      Şeýle anlaşylýan ChatGPT (her hili üçin) arasyndan bäşmüňhat jawaplar döret
// @description:tn      Hlela zitsha zwine zwiṱhiselela kha ChatGPT vhufudziṱe (muvhili wo vha u ite!)
// @description:to      Fakatonutonu ʻihe ngāuekesi mei he ChatGPT fakaongoongo toenga (i he lea faka-Tonga ia!)
// @description:tpi     Sanapim hamamasples long save olsem ChatGPT i masples (long wanpela tok ples!)
// @description:tr      Bilge ChatGPT'den sonsuz cevaplar üret (herhangi bir dilde!)
// @description:uk      Генеруйте безкінечні відповіді від усезнаючого ChatGPT (на будь-якій мові!)
// @description:ur      سب جاننے والے ChatGPT سے لامتناہی جوابات پیدا کریں (کسی بھی زبان میں!)
// @description:uz      Barcha biladigan ChatGPT dan cheklovli javoblar oling (hech qanday tilda ham)!
// @description:vi      Tạo ra vô số câu trả lời từ ChatGPT thông minh (bằng bất kỳ ngôn ngữ nào!)
// @description:xh      Bhala izinto ezingekwaziyo eziyimfihlo kusuka ku ChatGPT (ngolwimi lwanyanetha!)
// @description:yi      דזשענערייט סאָף ענטפֿערס פֿון אַלע-געוויסן ChatGPT (אין קיין שפּראַך!)
// @description:zh      从无所不知的 ChatGPT 生成无穷无尽的答案 (用任何语言!)
// @description:zh-CN   从无所不知的 ChatGPT 生成无穷无尽的答案 (用任何语言!)
// @description:zh-HK   從無所不知的 ChatGPT 生成無窮無盡的答案 (用任何語言!)
// @description:zh-SG   从无所不知的 ChatGPT 生成无穷无尽的答案 (用任何语言!)
// @description:zh-TW   從無所不知的 ChatGPT 生成無窮無盡的答案 (用任何語言!)
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2025.7.31.1
// @license             MIT
// @icon                data:image/svg+xml,%3Csvg xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width%3D"48" height%3D"48" viewBox%3D"0 0 512 512"%3E%3Cstyle%3E%3Aroot %7B --fill%3A %23000 %7D %40media (prefers-color-scheme%3A dark) %7B %3Aroot %7B --fill%3A %23fff %7D%7D%3C%2Fstyle%3E%3Cpath fill%3D"var(--fill)" d%3D"M501.98 206.15c-9.769-23.023-25.998-42.56-46.458-56.389a126.583 126.583 0 0 0-33.536-16.068c-12.009-3.809-24.842-5.798-38.088-5.798-16.982 0-33.294 3.316-48.197 9.365a42.49 42.49 0 0 0-3.558 1.568c-13.416 5.879-25.675 14.16-36.188 24.017a132.947 132.947 0 0 0-9.858 10.432c-5.709 6.542-11.588 14.079-17.305 21.696-1.157 1.568-2.402 3.226-3.558 4.804-3.146 4.302-33.212 48.358-38.509 56.226-2.652 3.97-5.798 8.442-9.195 13.327a285.658 285.658 0 0 1-2.393 3.396c-5.636 8.031-11.928 16.481-17.726 23.937-2.895 3.72-5.798 7.197-8.281 10.1-2.563 2.976-4.884 5.378-6.542 6.954-7.116 6.704-15.486 12.171-24.672 15.899-9.194 3.728-19.214 5.798-29.816 5.798a79.047 79.047 0 0 1-20.944-2.815 70.885 70.885 0 0 1-9.939-3.477c-14.248-5.968-26.419-16.068-34.95-28.74-4.302-6.372-7.699-13.327-10.019-20.783-2.233-7.456-3.558-15.316-3.558-23.597 0-11.014 2.24-21.365 6.21-30.892 6.049-14.24 16.149-26.329 28.821-34.942 6.372-4.31 13.326-7.618 20.782-9.939 7.448-2.321 15.316-3.638 23.597-3.638 10.602.08 20.622 2.07 29.816 5.79 9.187 3.808 17.556 9.194 24.672 15.898 1.658 1.577 3.979 4.059 6.542 6.962 4.472 5.216 9.769 11.92 15.074 18.964a777.12 777.12 0 0 1 6.21 8.523c7.949-11.588 21.858-31.959 29.144-42.48-1.237-1.658-2.482-3.307-3.72-4.965-3.316-4.23-6.631-8.281-9.938-12.009-3.316-3.809-6.462-7.205-9.858-10.432-11.426-10.772-24.922-19.545-39.746-25.586-14.904-6.049-31.222-9.365-48.196-9.365-17.637 0-34.53 3.566-49.927 10.108-23.022 9.688-42.487 25.918-56.316 46.369-6.873 10.19-12.332 21.527-16.141 33.536C1.989 229.997 0 242.75 0 256.004c0 17.637 3.558 34.53 10.02 49.846 9.768 23.104 25.998 42.569 46.369 56.397a131.27 131.27 0 0 0 33.624 16.141c12.008 3.728 24.842 5.717 38.088 5.717 16.974 0 33.293-3.316 48.196-9.356 14.824-6.049 28.239-14.824 39.666-25.506l.08-.081c3.397-3.146 6.543-6.631 9.858-10.44 5.709-6.542 11.588-14.071 17.305-21.689 1.157-1.577 2.402-3.154 3.558-4.723 3.146-4.391 44.307-64.758 47.696-69.642.752-1.076 1.577-2.232 2.401-3.396 5.637-7.95 11.928-16.48 17.726-23.928 2.895-3.728 5.798-7.206 8.281-10.101 2.564-2.984 4.885-5.386 6.542-6.962 7.116-6.704 15.486-12.09 24.673-15.898 2.24-.906 4.472-1.649 6.792-2.402 7.286-2.15 14.984-3.307 23.023-3.388 11.013.08 21.446 2.232 30.882 6.291 14.241 5.96 26.42 16.06 34.943 28.732 4.31 6.38 7.706 13.335 10.019 20.782 2.321 7.456 3.566 15.324 3.566 23.605a79.463 79.463 0 0 1-6.21 30.883c-6.049 14.24-16.149 26.419-28.821 34.942-6.372 4.31-13.326 7.707-20.782 9.939a78.53 78.53 0 0 1-23.597 3.648c-10.602 0-20.622-2.07-29.816-5.798-9.187-3.728-17.557-9.195-24.673-15.899-1.658-1.577-3.979-4.059-6.542-6.954-4.472-5.135-9.776-11.928-15.074-18.963-2.15-2.815-4.221-5.718-6.291-8.613-.663.994-1.326 1.99-2.07 3.065-13.666 20.039-22.279 32.71-26.994 39.576 1.237 1.658 2.483 3.235 3.72 4.893 3.316 4.221 6.631 8.281 9.938 12 3.234 3.808 6.462 7.294 9.858 10.44 11.426 10.763 24.923 19.538 39.746 25.587 14.904 6.04 31.215 9.356 48.197 9.356 17.636 0 34.53-3.558 49.846-10.019 23.103-9.769 42.56-25.999 56.396-46.458 6.866-10.181 12.421-21.446 16.141-33.536 3.73-12.009 5.72-24.842 5.72-38.088 0-17.637-3.558-34.53-10.02-49.854z"%2F%3E%3C%2Fsvg%3E
// @icon64              data:image/svg+xml,%3Csvg xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width%3D"64" height%3D"64" viewBox%3D"0 0 512 512"%3E%3Cstyle%3E%3Aroot %7B --fill%3A %23000 %7D %40media (prefers-color-scheme%3A dark) %7B %3Aroot %7B --fill%3A %23fff %7D%7D%3C%2Fstyle%3E%3Cpath fill%3D"var(--fill)" d%3D"M501.98 206.15c-9.769-23.023-25.998-42.56-46.458-56.389a126.583 126.583 0 0 0-33.536-16.068c-12.009-3.809-24.842-5.798-38.088-5.798-16.982 0-33.294 3.316-48.197 9.365a42.49 42.49 0 0 0-3.558 1.568c-13.416 5.879-25.675 14.16-36.188 24.017a132.947 132.947 0 0 0-9.858 10.432c-5.709 6.542-11.588 14.079-17.305 21.696-1.157 1.568-2.402 3.226-3.558 4.804-3.146 4.302-33.212 48.358-38.509 56.226-2.652 3.97-5.798 8.442-9.195 13.327a285.658 285.658 0 0 1-2.393 3.396c-5.636 8.031-11.928 16.481-17.726 23.937-2.895 3.72-5.798 7.197-8.281 10.1-2.563 2.976-4.884 5.378-6.542 6.954-7.116 6.704-15.486 12.171-24.672 15.899-9.194 3.728-19.214 5.798-29.816 5.798a79.047 79.047 0 0 1-20.944-2.815 70.885 70.885 0 0 1-9.939-3.477c-14.248-5.968-26.419-16.068-34.95-28.74-4.302-6.372-7.699-13.327-10.019-20.783-2.233-7.456-3.558-15.316-3.558-23.597 0-11.014 2.24-21.365 6.21-30.892 6.049-14.24 16.149-26.329 28.821-34.942 6.372-4.31 13.326-7.618 20.782-9.939 7.448-2.321 15.316-3.638 23.597-3.638 10.602.08 20.622 2.07 29.816 5.79 9.187 3.808 17.556 9.194 24.672 15.898 1.658 1.577 3.979 4.059 6.542 6.962 4.472 5.216 9.769 11.92 15.074 18.964a777.12 777.12 0 0 1 6.21 8.523c7.949-11.588 21.858-31.959 29.144-42.48-1.237-1.658-2.482-3.307-3.72-4.965-3.316-4.23-6.631-8.281-9.938-12.009-3.316-3.809-6.462-7.205-9.858-10.432-11.426-10.772-24.922-19.545-39.746-25.586-14.904-6.049-31.222-9.365-48.196-9.365-17.637 0-34.53 3.566-49.927 10.108-23.022 9.688-42.487 25.918-56.316 46.369-6.873 10.19-12.332 21.527-16.141 33.536C1.989 229.997 0 242.75 0 256.004c0 17.637 3.558 34.53 10.02 49.846 9.768 23.104 25.998 42.569 46.369 56.397a131.27 131.27 0 0 0 33.624 16.141c12.008 3.728 24.842 5.717 38.088 5.717 16.974 0 33.293-3.316 48.196-9.356 14.824-6.049 28.239-14.824 39.666-25.506l.08-.081c3.397-3.146 6.543-6.631 9.858-10.44 5.709-6.542 11.588-14.071 17.305-21.689 1.157-1.577 2.402-3.154 3.558-4.723 3.146-4.391 44.307-64.758 47.696-69.642.752-1.076 1.577-2.232 2.401-3.396 5.637-7.95 11.928-16.48 17.726-23.928 2.895-3.728 5.798-7.206 8.281-10.101 2.564-2.984 4.885-5.386 6.542-6.962 7.116-6.704 15.486-12.09 24.673-15.898 2.24-.906 4.472-1.649 6.792-2.402 7.286-2.15 14.984-3.307 23.023-3.388 11.013.08 21.446 2.232 30.882 6.291 14.241 5.96 26.42 16.06 34.943 28.732 4.31 6.38 7.706 13.335 10.019 20.782 2.321 7.456 3.566 15.324 3.566 23.605a79.463 79.463 0 0 1-6.21 30.883c-6.049 14.24-16.149 26.419-28.821 34.942-6.372 4.31-13.326 7.707-20.782 9.939a78.53 78.53 0 0 1-23.597 3.648c-10.602 0-20.622-2.07-29.816-5.798-9.187-3.728-17.557-9.195-24.673-15.899-1.658-1.577-3.979-4.059-6.542-6.954-4.472-5.135-9.776-11.928-15.074-18.963-2.15-2.815-4.221-5.718-6.291-8.613-.663.994-1.326 1.99-2.07 3.065-13.666 20.039-22.279 32.71-26.994 39.576 1.237 1.658 2.483 3.235 3.72 4.893 3.316 4.221 6.631 8.281 9.938 12 3.234 3.808 6.462 7.294 9.858 10.44 11.426 10.763 24.923 19.538 39.746 25.587 14.904 6.04 31.215 9.356 48.197 9.356 17.636 0 34.53-3.558 49.846-10.019 23.103-9.769 42.56-25.999 56.396-46.458 6.866-10.181 12.421-21.446 16.141-33.536 3.73-12.009 5.72-24.842 5.72-38.088 0-17.637-3.558-34.53-10.02-49.854z"%2F%3E%3C%2Fsvg%3E
// @compatible          chrome
// @compatible          firefox
// @compatible          edge
// @compatible          opera
// @compatible          brave
// @compatible          vivaldi
// @compatible          waterfox
// @compatible          librewolf
// @compatible          ghost
// @compatible          qq
// @compatible          whale
// @match               *://chatgpt.com/*
// @connect             cdn.jsdelivr.net
// @connect             gm.chatgptinfinity.com
// @connect             raw.githubusercontent.com
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.8.2/dist/chatgpt.min.js#sha256-eo9NbR9z1wtCKV279LzVIkWkm60gbud2VFhAiBiaaB4=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@09e04e0/chromium/extension/components/modals.js#sha256-hN+jB/TqMnrCM7EB3LuKIodb9M4604pfLWr+d3Qp/VI=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@6d883cc/chromium/extension/components/toggles.js#sha256-/4whFl+BxZilD7/ofr9MrIoJiZCa1sva28V4F/IAMVg=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@62b5899/chromium/extension/lib/browser.js#sha256-7teBecqrjkazKH6oetGyxKlBkAk5U9ota/LNCB3Q+Jw=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@c323a40/chromium/extension/lib/dom.min.js#sha256-IGNj9Eoecq7QgY7SAs75wONajgN9Wg0NmCjKTCfu9CY=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@3372987/chromium/extension/lib/infinity.js#sha256-MN1pC8s+N3Rqqj+2TmKB3Q3DyjNMmFSmdZD/4FusqyE=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@6145c0f/chromium/extension/lib/settings.js#sha256-7xKPZWrfHF2ZIlRtgcjKFLoh3NxVcXGchigmitQHPoQ=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@fdb7c91/chromium/extension/lib/styles.js#sha256-MTt9alQNJ4jyuFB+Lt6K/D1kLGwIvfgu5WJ628ZJ03s=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@c040d5d/chromium/extension/lib/sync.js#sha256-XA2p7A8i2R0MHsO4J0R2hwHSaAC/orytT3POQfeNY0I=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@8156513/chromium/extension/lib/ui.js#sha256-2yuQbliwz+uaCxUIEeTMWIH5JADHgjDBZD4/8I2T8rE=
// @resource rpgCSS     https://cdn.jsdelivr.net/gh/adamlui/ai-web-extensions@727feff/assets/styles/rising-particles/dist/gray.min.css#sha256-48sEWzNUGUOP04ur52G5VOfGZPSnZQfrF3szUr4VaRs=
// @resource rpwCSS     https://cdn.jsdelivr.net/gh/adamlui/ai-web-extensions@727feff/assets/styles/rising-particles/dist/white.min.css#sha256-6xBXczm7yM1MZ/v0o1KVFfJGehHk47KJjq8oTktH4KE=
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_getResourceText
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://gm.chatgptinfinity.com
// @updateURL           https://gm.chatgptinfinity.com
// @homepageURL         https://www.chatgptinfinity.com
// @supportURL          https://support.chatgptinfinity.com
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// Documentation: https://docs.chatgptinfinity.com
// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org
//  © 2023–2025 KudoAI & contributors under the MIT license.

(async () => {

    // Init ENV context
    window.env = {
        browser: {
            language: chatgpt.getUserLanguage(), isFF: chatgpt.browser.isFirefox(), isMobile: chatgpt.browser.isMobile()
        },
        scriptManager: {
            name: (() => { try { return GM_info.scriptHandler } catch (err) { return 'unknown' }})(),
            version: (() => { try { return GM_info.version } catch (err) { return 'unknown' }})()
        },
        ui: { scheme: ui.getScheme() }
    }
    env.browser.isPortrait = env.browser.isMobile && ( innerWidth < innerHeight )
    env.scriptManager.supportsTooltips = env.scriptManager.name == 'Tampermonkey'
                                      && parseInt(env.scriptManager.version.split('.')[0]) >= 5
    const xhr = typeof GM != 'undefined' && GM.xmlHttpRequest || GM_xmlhttpRequest

    // Init APP data
    window.app = {
        version: GM_info.script.version, chatgptjsVer: /chatgpt\.js@([\d.]+)/.exec(GM_info.scriptMetaStr)[1],
        commitHashes: { app: '261e68d' } // for cached <app|messages>.json
    }
    app.urls = { resourceHost: `https://cdn.jsdelivr.net/gh/adamlui/chatgpt-infinity@${app.commitHashes.app}` }
    const remoteData = {
        app: await new Promise(resolve => xhr({
            method: 'GET', url: `${app.urls.resourceHost}/assets/data/app.json`,
            onload: resp => resolve(JSON.parse(resp.responseText))
        })),
        msgs: await new Promise(resolve => {
            const msgHostDir = app.urls.resourceHost + '/chromium/extension/_locales/',
                  msgLocaleDir = ( env.browser.language ? env.browser.language.replace('-', '_') : 'en' ) + '/'
            let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs)  // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try original/region-stripped/EN only
                    msgHref = env.browser.language.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/(_locales\/[^_]+)_[^_]+(\/)/, '$1$2') // ...strip region before retrying
                            : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
    }
    Object.assign(app, { ...remoteData.app, urls: { ...app.urls, ...remoteData.app.urls }, msgs: remoteData.msgs })

    // Init SETTINGS
    settings.load(Object.keys(settings.controls).filter(key => key != 'infinityMode')) // exclude infinityMode...
    settings.save('infinityMode', false) // ...to always init as false
    if (!config.replyLanguage) settings.save('replyLanguage', env.browser.language) // init reply language if unset
    if (!config.replyTopic) settings.save('replyTopic', app.msgs.menuLabel_all) // init reply topic if unset
    if (!config.replyInterval) settings.save('replyInterval', 7) // init refresh interval to 7 secs if unset

    // Define MENU functions

    window.toolbarMenu = {
        state: {
            symbols: ['❌', '✔️'], separator: env.scriptManager.name == 'Tampermonkey' ? ' — ' : ': ',
            words: [app.msgs.state_off.toUpperCase(), app.msgs.state_on.toUpperCase()]
        },

        refresh() {
            if (typeof GM_unregisterMenuCommand == 'undefined') return
            for (const id of this.entryIDs) { GM_unregisterMenuCommand(id) } this.register()
        },

        register() {
            const re_all = new RegExp(`^(${app.msgs.menuLabel_all}|all|any|every)$`, 'i')

            // Show "Disabled (extension active)"
            this.entryIDs = env.extensionActive ? [
                GM_registerMenuCommand(`${this.state.symbols[0]} ${
                        toTitleCase(app.msgs.state_disabled)} (${app.msgs.menuLabel_extensionActive})`,
                    () => modals.open('about'), env.scriptManager.supportsTooltips ? { title: ' ' } : undefined )
            ]

            // ...or add settings entries
            : Object.keys(settings.controls).map(key => {
                const ctrl = settings.controls[key]
                const menuLabel = `${
                    ctrl.symbol || this.state.symbols[+settings.typeIsEnabled(key)] } ${ctrl.label} ${
                        ctrl.type == 'toggle' ? this.state.separator + this.state.words[+settings.typeIsEnabled(key)]
                                              : ctrl.status ? ` — ${ctrl.status}` : '' }`
                return GM_registerMenuCommand(menuLabel, () => {
                    if (ctrl.type == 'toggle') {
                        settings.save(key, !config[key])
                        notify(`${ctrl.label}: ${this.state.words[+settings.typeIsEnabled(key)]}`)
                    } else if (key == 'replyLanguage') {
                        while (true) {
                            let replyLang = prompt(
                                `${app.msgs.prompt_updateReplyLang}:`, config.replyLanguage)
                            if (replyLang == null) break // user cancelled so do nothing
                            else if (!/\d/.test(replyLang)) { // valid reply language set
                                replyLang = ( // auto-case for menu/alert aesthetics
                                    replyLang.length < 4 || replyLang.includes('-') ? replyLang.toUpperCase()
                                        : toTitleCase(replyLang) )
                                settings.save('replyLanguage', replyLang || env.browser.language)
                                modals.alert(( app.msgs.alert_replyLangUpdated ) + '!', // title
                                    ( app.msgs.appName ) + ' ' // msg
                                        + ( app.msgs.alert_willReplyIn ) + ' '
                                        + ( replyLang || app.msgs.alert_yourSysLang) + '.'
                                )
                                break
                            }
                        }
                    } else if (key == 'replyTopic') {
                        let replyTopic = prompt(( app.msgs.prompt_updateReplyTopic )
                            + ' (' + ( app.msgs.prompt_orEnter ) + ' \'ALL\'):', config.replyTopic)
                        if (replyTopic != null) { // user didn't cancel
                            replyTopic = toTitleCase(replyTopic.toString()) // for menu/alert aesthetics
                            settings.save('replyTopic',
                                !replyTopic || re_all.test(replyTopic) ? app.msgs.menuLabel_all : replyTopic)
                            modals.alert(`${app.msgs.alert_replyTopicUpdated}!`,
                                `${app.msgs.appName} ${app.msgs.alert_willAnswer} `
                                    + ( !replyTopic || re_all.test(replyTopic) ? app.msgs.alert_onAllTopics
                                        : `${app.msgs.alert_onTopicOf} ${replyTopic}` )
                                    + '!'
                            )
                        }
                    } else if (key == 'replyInterval') {
                        while (true) {
                            const replyInterval = prompt(
                                `${app.msgs.prompt_updateReplyInt}:`, config.replyInterval)
                            if (replyInterval == null) break // user cancelled so do nothing
                            else if (!isNaN(parseInt(replyInterval, 10)) && parseInt(replyInterval, 10) > 4) {
                                settings.save('replyInterval', parseInt(replyInterval, 10))
                                modals.alert(( app.msgs.alert_replyIntUpdated ) + '!', // title
                                    ( app.msgs.appName ) + ' ' // msg
                                        + ( app.msgs.alert_willReplyEvery ) + ' '
                                        + replyInterval + ' ' + ( app.msgs.unit_seconds ) + '.'
                                )
                                break
                            }
                        }
                    }
                    sync.configToUI({ updatedKey: key })
                }, env.scriptManager.supportsTooltips ? { title: ctrl.helptip || ' ' } : undefined)
            });

            // Add About/Donate entries
            ['about', 'donate'].forEach(entryType => {
                if (entryType == 'donate' && env.extensionActive) return
                this.entryIDs.push(GM_registerMenuCommand(
                    `${ entryType == 'about' ? '💡' : '💖' } ${
                        app.msgs[`menuLabel_${entryType}`]} ${ entryType == 'about' ? app.msgs.appName : '' }`,
                    () => entryType == 'about' ? modals.open(entryType) : modals.safeWinOpen(app.urls.donate['ko-fi']),
                    env.scriptManager.supportsTooltips ? { title: ' ' } : undefined
                ))
            })
        }
    }

    window.updateCheck = () => xhr({
        method: 'GET', url: `${app.urls.update.gm}?t=${Date.now()}`,
        headers: { 'Cache-Control': 'no-cache' },
        onload: resp => {

            // Compare versions, alert if update found
            app.latestVer = /@version +(.*)/.exec(resp.responseText)?.[1]
            if (app.latestVer) for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                const currentSubVer = parseInt(app.version.split('.')[i], 10) || 0,
                        latestSubVer = parseInt(app.latestVer.split('.')[i], 10) || 0
                if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                else if (latestSubVer > currentSubVer) // if outdated
                    return modals.open('update', 'available')
            }

            // Alert to no update found, nav back to About
            modals.open('update', 'unavailable')
    }})

    function toTitleCase(str) {
        if (!str) return ''
        const words = str.toLowerCase().split(' ')
        for (let i = 0 ; i < words.length ; i++) // for each word
            words[i] = words[i][0].toUpperCase() + words[i].slice(1) // title-case it
        return words.join(' ') // join'em back together
    }

    // Define FEEDBACK functions

    window.notify = function(msg, pos = '', notifDuration = '', shadow = '') {
        if (!styles.toast.node) styles.update({ key: 'toast' })
        if (config.notifDisabled
            && !new RegExp(`${app.msgs.menuLabel_show} ${app.msgs.menuLabel_notifs}`, 'i').test(msg)
        ) return

        // Strip state word to append colored one later
        const foundState = toolbarMenu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, pos, notifDuration, shadow || env.ui.scheme == 'light')
        const notif = document.querySelector('.chatgpt-notif:last-child')
        notif.classList.add(app.slug) // for styles.toast

        // Append styled state word
        if (foundState) {
            const stateStyles = {
                on: {
                    light: 'color: #5cef48 ; text-shadow: rgba(255,250,169,0.38) 2px 1px 5px',
                    dark:  'color: #5cef48 ; text-shadow: rgb(55,255,0) 3px 0 10px'
                },
                off: {
                    light: 'color: #ef4848 ; text-shadow: rgba(255,169,225,0.44) 2px 1px 5px',
                    dark:  'color: #ef4848 ; text-shadow: rgba(255, 116, 116, 0.87) 3px 0 9px'
                }
            }
            const styledStateSpan = dom.create.elem('span')
            styledStateSpan.style.cssText = stateStyles[
                foundState == toolbarMenu.state.words[0] ? 'off' : 'on'][env.ui.scheme]
            styledStateSpan.append(foundState) ; notif.append(styledStateSpan)
        }
    }

    // Define UI functions

    chatgpt.isIdle = function() { // replace waiting for chat to start in case of interrupts
        return new Promise(resolve => { // when stop btn missing
            new MutationObserver((_, obs) => {
                if (!chatgpt.getStopBtn()) { obs.disconnect(); resolve() }
            }).observe(document.body, { childList: true, subtree: true })
        })
    }

    // Run MAIN routine

    // Preload sidebar NAVICON variants
    toggles.sidebar.update.navicon({ preload: true })

    // Init EXTENSION ACTIVE state
    postMessage({ action: 'getExtensionInfo', source: `${app.slug}.user.js` }, location.origin)
    addEventListener('message', handleMsgResp)
    function handleMsgResp(resp) {
        if (resp.origin != location.origin) return
        const sender = resp.data.source
        env.extensionActive = sender.includes(app.slug) && /extension/i.test(sender)
    }
    await new Promise(resolve => setTimeout(resolve, 100)) // wait for extension response
    removeEventListener('message', handleMsgResp)

    // Create browser TOOLBAR MENU + DISABLE SCRIPT if extension active
    toolbarMenu.register() ; if (env.extensionActive) return

    // Init BROWSER/UI props
    await Promise.race([chatgpt.isLoaded(), new Promise(resolve => setTimeout(resolve, 5000))]) // initial UI loaded

    // Add LISTENER to auto-disable Infinity Mode
    if ('hidden' in document) // ...if Page Visibility API supported
        document.onvisibilitychange = () => {
            if (config.infinityMode) {
                settings.save('infinityMode', false) ; sync.configToUI({ updatedKey: 'infinityMode' }) }
        }

    // Add RISING PARTICLES styles
    ['rpg', 'rpw'].forEach(cssType => document.head.append(dom.create.style(GM_getResourceText(`${cssType}CSS`))))

    toggles.sidebar.insert()

    // Auto-start if enabled
    if (config.autoStart) {
        settings.save('infinityMode', true) ; sync.configToUI({ updatedKey: 'infinityMode' })
        notify(`${app.msgs.menuLabel_autoStart}: ${app.msgs.state_on.toUpperCase()}`)
    }

    // Monitor NODE CHANGES to maintain sidebar toggle visibility
    new MutationObserver(() => {
        if (!config.toggleHidden && document.querySelector(chatgpt.selectors.sidebar)
            && !document.querySelector(`.${toggles.sidebar.class}`)
            && toggles.sidebar.status != 'inserting'
        ) { toggles.sidebar.status = 'missing' ; toggles.sidebar.insert() }
    }).observe(document.body, { attributes: true, subtree: true })

    // Monitor SCHEME PREF changes to update sidebar toggle + modal colors
    new MutationObserver(handleSchemePrefChange).observe( // for site scheme pref changes
        document.documentElement, { attributes: true, attributeFilter: ['class'] })
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener( // for browser/system scheme pref changes
        'change', () => requestAnimationFrame(handleSchemePrefChange))
    function handleSchemePrefChange() {
        const displayedScheme = ui.getScheme()
        if (env.ui.scheme != displayedScheme) {
            env.ui.scheme = displayedScheme ; toggles.sidebar.update.scheme() ; modals.stylize() }
    }

    // Disable distracting SIDEBAR CLICK-ZOOM effect
    if (!document.documentElement.hasAttribute('sidebar-click-zoom-observed')) {
        new MutationObserver(mutations => mutations.forEach(({ target }) => {
            if (target.closest('[class*=sidebar]') // include sidebar elems
                && !target.closest('[class*=sidebar-toggle]') // exclude our toggles.sidebar's elems
                && target.style.transform != 'none' // click-zoom occurred
            ) target.style.transform = 'none'
        })).observe(document.body, { attributes: true, subtree: true, attributeFilter: ['style'] })
        document.documentElement.setAttribute('sidebar-click-zoom-observed', true)
    }

})()
