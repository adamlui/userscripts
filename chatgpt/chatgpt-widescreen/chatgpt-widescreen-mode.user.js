// ==UserScript==
// @name                ChatGPT Widescreen Mode ðŸ–¥ï¸
// @name:af             ChatGPT Widescreen Modus ðŸ–¥ï¸
// @name:ar             ChatGPT ÙˆØ¶Ø¹ Ø´Ø§Ø´Ø© Ø¹Ø±ÙŠØ¶Ø© ðŸ–¥ï¸
// @name:az             ChatGPT GeniÅŸ Ekran Rejimi ðŸ–¥ï¸
// @name:be             ChatGPT Ð ÑÐ¶Ñ‹Ð¼ ÑˆÑ‹Ñ€Ð¾ÐºÐ°Ð³Ð° ÑÐºÑ€Ð°Ð½Ð° ðŸ–¥ï¸
// @name:bg             ChatGPT Ð¨Ð¸Ñ€Ð¾ÐºÐ¾ÐµÐºÑ€Ð°Ð½ÐµÐ½ Ñ€ÐµÐ¶Ð¸Ð¼ ðŸ–¥ï¸
// @name:bn             ChatGPT à¦‰à¦‡à¦¡à¦¸à§à¦•à§à¦°à¦¿à¦¨ à¦®à§‹à¦¡ ðŸ–¥ï¸
// @name:bo             ChatGPT à½¢à¾’à¾±à½´à¼‹à½†à½ºà½“à¼‹à½‚à½žà½²à¼‹à½–à½¦à¾’à¾²à½´à½–à¼‹ à½¢à¾’à¾±à½£à¼‹à½–à½¤à½‘à¼ ðŸ–¥ï¸
// @name:bs             ChatGPT ReÅ¾im Å¡irokog ekrana ðŸ–¥ï¸
// @name:ca             ChatGPT Mode de pantalla ampla ðŸ–¥ï¸
// @name:ckb            ChatGPT Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ Ú†ÙˆØ§Ø±Ú†ÛŽÙˆÛ•ÛŒ Ú•ÙˆÙˆÚ©Ø§Ø±ÛŒ ðŸ–¥ï¸
// @name:cs             ChatGPT ReÅ¾im Å¡irokoÃºhlÃ© obrazovky ðŸ–¥ï¸
// @name:cy             ChatGPT Mod Sgrin Lled ðŸ–¥ï¸
// @name:da             ChatGPT Bredformat-tilstand ðŸ–¥ï¸
// @name:de             ChatGPT Breitbildmodus ðŸ–¥ï¸
// @name:dv             ChatGPT ÞˆÞ¨ÞÞ°Þ‚ÞªÞˆÞ¬Þ‡Þ° Þ‰Þ¯Þ‘Þ¨ ðŸ–¥ï¸
// @name:dz             ChatGPT à½ à½–à¾²à½ºà½£à¼‹à½–à¼‹à½‚à½žà½´à½„à¼‹à½£à½¦à¼‹à½¦à¾¤à¾±à½²à¼‹à½šà½¼à½‚à½¦à¼‹à½‚à¾³à½ºà½„à¼‹à¼ ðŸ–¥ï¸
// @name:el             ChatGPT Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± ÎµÏ…ÏÎµÎ¯Î±Ï‚ Î¿Î¸ÏŒÎ½Î·Ï‚ ðŸ–¥ï¸
// @name:eo             ChatGPT LarÄekrana reÄimo ðŸ–¥ï¸
// @name:es             ChatGPT Modo de pantalla panorÃ¡mica ðŸ–¥ï¸
// @name:et             ChatGPT Laiarakenduse reÅ¾iim ðŸ–¥ï¸
// @name:eu             ChatGPT Pantaila Zabalaren Modua ðŸ–¥ï¸
// @name:fa             ChatGPT Ø­Ø§Ù„Øª ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ†ÛŒ ðŸ–¥ï¸
// @name:fi             ChatGPT Laajakuva-tila ðŸ–¥ï¸
// @name:fo             ChatGPT BÃºÃ°arformaÃ°ur hÃ¡ttur ðŸ–¥ï¸
// @name:fr             ChatGPT Mode Ã‰cran Large ðŸ–¥ï¸
// @name:fr-CA          ChatGPT Mode Ã‰cran Large ðŸ–¥ï¸
// @name:gd             ChatGPT Dreach-sgrÃ¬n Leud ðŸ–¥ï¸
// @name:gl             ChatGPT Modo de pantalla ancha ðŸ–¥ï¸
// @name:gu             ChatGPT àªªà«àª°àª¶àª¾àª‚àª¤ àª¸à«àª•à«àª°à«€àª¨ àª®à«‹àª¡ ðŸ–¥ï¸
// @name:he             ChatGPT ×ž×¦×‘ ×ž×¡×š ×¨×—×‘ ðŸ–¥ï¸
// @name:hi             ChatGPT à¤šà¤¹à¤šà¤Ÿà¤œà¥€à¤ªà¤Ÿà¥€ à¤µà¤¾à¤‡à¤¡à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤®à¥‹à¤¡ ðŸ–¥ï¸
// @name:hr             ChatGPT NaÄin Å¡irokog zaslona ðŸ–¥ï¸
// @name:ht             ChatGPT Mod Fomat Gwo ðŸ–¥ï¸
// @name:hu             ChatGPT SzÃ©lesvÃ¡sznÃº mÃ³d ðŸ–¥ï¸
// @name:hy             ChatGPT Õ¬Õ¡ÕµÕ¶Õ§Õ¯Ö€Õ¡Õ¶Õ¡Õ¶Õ·Õ¡Õ¶Õ« Õ¼Õ¥ÕªÕ«Õ´ ðŸ–¥ï¸
// @name:id             ChatGPT Mode Layar Lebar ðŸ–¥ï¸
// @name:is             ChatGPT BreiÃ°skjÃ¡sstilling ðŸ–¥ï¸
// @name:it             ChatGPT ModalitÃ  schermo panoramica ðŸ–¥ï¸
// @name:ja             ChatGPT ãƒ¯ã‚¤ãƒ‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰ ðŸ–¥ï¸
// @name:jv             ChatGPT Mode Layar Lebar ðŸ–¥ï¸
// @name:ka             ChatGPT áƒ¤áƒáƒœáƒ¢áƒ¡áƒáƒ áƒ˜áƒ¨áƒ˜áƒ¡ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜ ðŸ–¥ï¸
// @name:kab            ChatGPT Amezwaru n Tikliwin Isellalen ðŸ–¥ï¸
// @name:kk             ChatGPT ÐšÓ©Ð»ÐµÒ£ÐºÐµÑÐºÐµÐ½ Ñ‚Ò¯Ñ€Ñ– ðŸ–¥ï¸
// @name:km             ChatGPT ážšáž”áŸ€áž”áž”áž„áŸ’áž¢ážŸáŸ’ážŸáž˜áž½áž™áž’áŸ’ážœáž¾ážŠáŸ†áž”áž¼áž„ ðŸ–¥ï¸
// @name:kn             ChatGPT ChatGPT à²µà³ˆà²¡à³à²¸à³à²•à³à²°à³€à²¨à³ à²®à³‹à²¡à³ ðŸ–¥ï¸
// @name:ko             ChatGPT ì™€ì´ë“œ ìŠ¤í¬ë¦° ëª¨ë“œ ðŸ–¥ï¸
// @name:ku             ChatGPT Moda PÃªlÃªn DirÃªj ðŸ–¥ï¸
// @name:ky             ChatGPT Ð–Ð¾Ð³Ð¾Ñ€ÐºÑƒ Ð­ÐºÑ€Ð°Ð½Ð´Ñ‹Ðº Ð ÐµÐ¶Ð¸Ð¼ ðŸ–¥ï¸
// @name:la             ChatGPT Modus Latus Plenus ðŸ–¥ï¸
// @name:lb             ChatGPT Breitbild-Modus ðŸ–¥ï¸
// @name:lo             ChatGPT àº®àº¹àºšà»àºšàºšà»‚àº›àº£àºŸàº­àº™à»ƒàº«àºà»ˆ ðŸ–¥ï¸
// @name:lt             ChatGPT IÅ¡plÄ—stojo ekrano reÅ¾imas ðŸ–¥ï¸
// @name:lv             ChatGPT PlaÅ¡Ä ekrÄna reÅ¾Ä«ms ðŸ–¥ï¸
// @name:mg             ChatGPT Tarehimarika tamin'ny Widescreen ðŸ–¥ï¸
// @name:mi             ChatGPT Ä€hua WhÄtika Ä-Raupapa ðŸ–¥ï¸
// @name:mk             ChatGPT Ð ÐµÐ¶Ð¸Ð¼ Ð½Ð° ÑˆÐ¸Ñ€Ð¾Ðº ÐµÐºÑ€Ð°Ð½ ðŸ–¥ï¸
// @name:ml             ChatGPT à´µàµˆà´¡àµà´¸àµà´•àµà´°àµ€àµ» à´®àµ‹à´¡àµ ðŸ–¥ï¸
// @name:mn             ChatGPT Ð–Ð¸Ð½Ñ…ÑÐ½Ñ Ð­ÐºÑ€Ð°Ð½Ð½Ñ‹ ÐÑ€Ð³Ð° ðŸ–¥ï¸
// @name:ms             ChatGPT Mod Skrin Lebar ðŸ–¥ï¸
// @name:mt             ChatGPT ModalitÃ  Widescreen ðŸ–¥ï¸
// @name:my             ChatGPT á€¡á€™á€»á€¬á€¸á€”á€¾á€¯á€”á€ºá€¸á€€á€»á€±á€¬á€ºá€˜á€¯á€¶ ðŸ–¥ï¸
// @name:ne             ChatGPT à¤µà¤¿à¤¸à¥à¤¤à¥ƒà¤¤ à¤ªà¥à¤°à¤¾à¤£à¥à¤¡à¤µà¤¿à¤• à¤ªà¤¦à¥à¤§à¤¤à¤¿ ðŸ–¥ï¸
// @name:nl             ChatGPT Breedbeeldmodus ðŸ–¥ï¸
// @name:no             ChatGPT Bredskjermmodus ðŸ–¥ï¸
// @name:ny             ChatGPT Mawonekedwe Wathandiza ðŸ–¥ï¸
// @name:pa             ChatGPT à¨µà¨¾à¨‡à¨¡à¨¸à¨•à©à¨°à©€à¨¨ à¨®à©‹à¨¡ ðŸ–¥ï¸
// @name:pl             ChatGPT Tryb szerokoekranowy ðŸ–¥ï¸
// @name:ps             ChatGPT Ø¯ Ú‰ÛŒØ³Ù¾Ù„Û Ù…ÙˆÚ‰ ðŸ–¥ï¸
// @name:pt             ChatGPT Modo Tela Larga ðŸ–¥ï¸
// @name:pt-BR          ChatGPT Modo Tela Larga ðŸ–¥ï¸
// @name:ro             ChatGPT Mod ecran lat ðŸ–¥ï¸
// @name:ru             ChatGPT Ð ÐµÐ¶Ð¸Ð¼ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð½Ð¾Ð³Ð¾ ÑÐºÑ€Ð°Ð½Ð° ðŸ–¥ï¸
// @name:rw             ChatGPT Ibindi by'umuhondo bw'ishusho ðŸ–¥ï¸
// @name:sg             ChatGPT Mode Ã‰cran Large ðŸ–¥ï¸
// @name:si             ChatGPT à·€à·’à·à·šà·‚à·à¶‚à¶œ à¶´à·™à·…à¶šà·Šà·‚à·à·€ ðŸ–¥ï¸
// @name:sk             ChatGPT ReÅ¾im Å¡irokouhlÃ©ho displeja ðŸ–¥ï¸
// @name:sl             ChatGPT NaÄin Å¡irokega zaslona ðŸ–¥ï¸
// @name:sm             ChatGPT Laititi Fuamatala ðŸ–¥ï¸
// @name:sn             ChatGPT Zvimwe Zvitsva Mode ðŸ–¥ï¸
// @name:so             ChatGPT hab Widescreen Mode ðŸ–¥ï¸
// @name:sr             ChatGPT Ð ÐµÐ¶Ð¸Ð¼ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ð³ ÐµÐºÑ€Ð°Ð½Ð° ðŸ–¥ï¸
// @name:sv             ChatGPT BredbildslÃ¤ge ðŸ–¥ï¸
// @name:sw             ChatGPT Njia ya Skrini Panoramio ðŸ–¥ï¸
// @name:ta             ChatGPT à®µà®¿à®°à®¿à®µà®¾à®© à®¤à®¿à®°à¯ˆ à®®à¯à®±à¯ˆ ðŸ–¥ï¸
// @name:te             ChatGPT ChatGPT à°µà±ˆà°¡à± à°¸à±à°•à±à°°à±€à°¨à± à°®à±‹à°¡à± ðŸ–¥ï¸
// @name:tg             ChatGPT Ð’Ð¾Ð·Ð°Ñ‡Ð¸ Ð ÐµÐ¶Ð°Ð¸ Ð”Ð¸ÑÐ¿Ð»ÐµÐ¸ Ð‘Ð°Ñ€Ð½Ð¾Ð¼Ð° ðŸ–¥ï¸
// @name:th             ChatGPT à¹‚à¸«à¸¡à¸”à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹à¸šà¸šà¹€à¸•à¹‡à¸¡à¸ˆà¸­ ðŸ–¥ï¸
// @name:ti             á‰»á‰µáŒ‚á’á‰² á‹‹á‹­á‹µáˆµáŠ­áˆªáŠ• áˆžá‹µ ðŸ–¥ï¸
// @name:tk             ChatGPT GiÅˆ Ekran Tertibi ðŸ–¥ï¸
// @name:tn             ChatGPT Nyemba Yemba Mzizo ðŸ–¥ï¸
// @name:to             ChatGPT Moli Ê»o e Ngaahi Fatongi Ê»o HaÊ»aneesi ðŸ–¥ï¸
// @name:tr             ChatGPT GeniÅŸ Ekran Modu ðŸ–¥ï¸
// @name:uk             ChatGPT Ð ÐµÐ¶Ð¸Ð¼ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ð³Ð¾ ÐµÐºÑ€Ð°Ð½Ð° ðŸ–¥ï¸
// @name:ur             ChatGPT ÙˆØ§Ø¦Úˆ Ø§Ø³Ú©Ø±ÛŒÙ† Ù…ÙˆÚˆ ðŸ–¥ï¸
// @name:uz             ChatGPT Keng ekranga rejim ðŸ–¥ï¸
// @name:vi             ChatGPT Cháº¿ Ä‘á»™ MÃ n hÃ¬nh Rá»™ng ðŸ–¥ï¸
// @name:xh             ChatGPT Indlela ye-Widescreen Mode ðŸ–¥ï¸
// @name:yi             ChatGPT ×•×•×™×“×¢×¡×§×¨×¢×¢×Ÿ ×ž×Ö¸×“×¢ ðŸ–¥ï¸
// @name:zh             ChatGPT å®½å±æ¨¡å¼ ðŸ–¥ï¸
// @name:zh-CN          ChatGPT å®½å±æ¨¡å¼ ðŸ–¥ï¸
// @name:zh-HK          ChatGPT å¯¬èž¢å¹•æ¨¡ ðŸ–¥ï¸
// @name:zh-SG          ChatGPT å®½å±æ¨¡å¼ ðŸ–¥ï¸
// @name:zh-TW          ChatGPT å¯¬èž¢å¹•æ¨¡ ðŸ–¥ï¸
// @name:zu             ChatGPT Isimo sokudlalwa emkhumbini ðŸ–¥ï¸
// @description         Adds Widescreen + Fullscreen modes to chatgpt.com + perplexity.ai + poe.com for enhanced viewing + reduced scrolling
// @description:af      Voeg Widescreen + Volledige skermmodusse by chatgpt.com + perplexity.ai + poe.com vir verbeterde kyk + verminderde skrol
// @description:am      á‹¨áˆ«áˆµ áˆ˜áŒ áŠ• á‰  chatgpt.com + perplexity.ai + poe.com á‹áˆµáŒ¥ á‹¨á‰°áŠ¨áˆá‰°á‹áŠ• á‹ˆá‹° á‰µáŠ•á‰¢á‰µ áˆ›á‹µáˆ¨áŒ + á‹µáˆá… áŠ¥áŠ•á‹²á‰³á‰µáŠ“
// @description:ar      Ø¥Ø¶Ø§ÙØ© ÙˆØ¶Ø¹ÙŠ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø¹Ø±ÙŠØ¶Ø© + Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ø¥Ù„Ù‰ chatgpt.com + perplexity.ai + poe.com Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¶ + ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ±
// @description:az      chatgpt.com + perplexity.ai + poe.com Ã¼Ã§Ã¼n GeniÅŸ Ekran + Tam Ekran rejimlÉ™ri É™lavÉ™ etmÉ™k, gÃ¶rÃ¼ntÃ¼nÃ¼ yaxÅŸÄ±laÅŸdÄ±rmaq + sÉ™lahÉ™tÉ™n keÃ§irmÉ™ni azaltmaq
// @description:be      Ð”Ð°Ð´Ð°Ðµ Ñ€ÑÐ¶Ñ‹Ð¼Ñ‹ ÑˆÑ‹Ñ€Ð¾ÐºÐ°Ð³Ð° ÑÐºÑ€Ð°Ð½Ð° + Ð¿Ð¾ÑžÐ½Ð°Ð³Ð° ÑÐºÑ€Ð°Ð½Ð° Ð´Ð° chatgpt.com + perplexity.ai + poe.com Ð´Ð»Ñ Ð¿Ð°Ð»ÑÐ¿ÑˆÑÐ½Ð°Ð³Ð° Ð¿Ñ€Ð°Ð³Ð»ÑÐ´Ñƒ + Ð·Ð¼ÑÐ½ÑˆÑÐ½Ð½Ñ ÑÐºÑ€Ð¾Ð»Ñ–Ð½Ð³Ñƒ
// @description:bem     Ena Mode ya Widescreen + ya Fullscreen ku chatgpt.com + perplexity.ai + poe.com pa kuongeza kulandila + ukukonda scrolling
// @description:bg      Ð”Ð¾Ð±Ð°Ð²Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð¸ Ð½Ð° Ð¨Ð¸Ñ€Ð¾Ðº ÐµÐºÑ€Ð°Ð½ + ÐŸÑŠÐ»ÐµÐ½ ÐµÐºÑ€Ð°Ð½ ÐºÑŠÐ¼ chatgpt.com + perplexity.ai + poe.com Ð·Ð° Ð¿Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¾ Ð³Ð»ÐµÐ´Ð°Ð½Ðµ + Ð½Ð°Ð¼Ð°Ð»ÐµÐ½Ð¾ Ð¿Ð»ÑŠÐ·Ð³Ð°Ð½Ðµ
// @description:bn      à¦à¦•à§à¦¸ à¦à¦—à§à¦°à¦¿à¦¸à¦¿à¦­ à¦¦à§‡à¦–à¦¾à¦° à¦œà¦¨à§à¦¯ chatgpt.com + perplexity.ai + poe.com-à¦ à¦“à¦¯à¦¼à¦¾à¦‡à¦¡à¦¸à§à¦•à§à¦°à¦¿à¦¨ + à¦«à§à¦²à¦¸à§à¦•à§à¦°à¦¿à¦¨ à¦®à§‹à¦¡ à¦¯à§à¦•à§à¦¤ à¦•à¦°à§‡ + à¦¸à§à¦•à§à¦°à¦²à¦¿à¦‚ à¦¹à§à¦°à¦¾à¦¸ à¦•à¦°à§‡
// @description:bo      à½–à½…à½ à¼‹à½‘à¾²à½´à½‚à¼‹à½¢à¾’à¾±à½´à½¦à¼‹à½”à¼‹+ à½–à½‘à½ºà¼‹à½†à½ºà½“à¼‹à½¢à¾’à¾±à½´à½¦à¼‹à½”à¼‹à½ à½‘à½²à¼‹chatgpt.com + perplexity.ai + poe.comà¼‹à½“à½„à¼‹à½£à½¦à¼‹à½–à½¦à¾’à¾²à½‚à½¦à¼‹à½–à½žà½‚à¼‹à½–à½ à½²à¼‹à½£à¾·à½‚à¼‹à½”à¼‹à½žà½²à½‚à¼‹à½à½˜à½¦à¼‹à½”à½ à½²à¼‹à½–à½¢à¾Ÿà½‚à¼‹à½žà½²à½–à¼‹à½–à½…à½¼à¼‹à½¦à¾’à¾²à½²à½‚à¼‹à½ à½‘à½´à½‚
// @description:bs      Dodaje Widescreen + Fullscreen reÅ¾ime chatgpt.com + perplexity.ai + poe.com-u za poboljÅ¡ani prikaz + smanjenje klizanja
// @description:ca      Afegeix els modes de pantalla ampla + pantalla completa a chatgpt.com + perplexity.ai + poe.com per a una visualitzaciÃ³ millorada + reducciÃ³ de desplaÃ§ament
// @description:ceb     Gidugang ang Mga Modo sa Widescreen + Fullscreen sa chatgpt.com + perplexity.ai + poe.com alang sa labaw nga pagtan-aw + paggamot sa pag-scroll
// @description:ckb     Mode Widescreen + Mode Fullscreen bo chatgpt.com + perplexity.ai + poe.com zÃªde bike ji bo nÃªzÃ®kbÃ»na baÅŸkirinÃª + kam kirina birevandinÃª
// @description:cs      PÅ™idÃ¡vÃ¡ reÅ¾imy Widescreen + Fullscreen do chatgpt.com + perplexity.ai + poe.com pro zlepÅ¡enÃ© zobrazenÃ­ + snÃ­Å¾enÃ­ posouvÃ¡nÃ­
// @description:cy      Ychwanega dulliau Sgrin Llydan + Sgrin Lawn i chatgpt.com + perplexity.ai + poe.com ar gyfer gwylio well + lleihau sgrolio
// @description:da      TilfÃ¸jer Widescreen + Fuldscreen-tilstande til chatgpt.com + perplexity.ai + poe.com for forbedret visning + reduceret rulning
// @description:de      FÃ¼gt Widescreen + Vollbildmodus zu chatgpt.com + perplexity.ai + poe.com fÃ¼r verbesserte Ansicht + reduziertes Scrollen hinzu
// @description:dv      chatgpt.com + perplexity.ai + poe.com Þ„Þ®Þ“Þ®Þ„Þ­ÞÞ© + ÞŠÞ¦Þ‚Þ°ÞˆÞ¦Þ‡Þ¨Þ‹Þ§ Þ‰Þ¯Þ‘Þ¨Þ‡ÞªÞÞ°Þ‡Þ¦Þ¤Þ° Þ€Þ¬Þ‹ÞªÞ‰Þ¦ÞÞ° Þ†Þ¦Þ‚Þ‘ÞªÞŽÞ¬Þ‚Þ°Þ‚Þ¦ÞˆÞ¦Þ‚Þ° + ÞƒÞªÞÞ¦Þ„Þ° Þ„Þ¬Þ‚Þ°Þ†ÞªÞƒÞªÞ‰Þ¦ÞÞ°ÞˆÞ¬Þ‡Þ°Þ–Þ¬
// @description:dz      chatgpt.com + perplexity.ai + poe.com à½¦à¾’à¾²à½´à½–à¼‹à½à½–à½¦à¼‹ + à½˜à½²à½„à¼‹à½‘à½”à¾±à½‘à¼‹à½†à½ºà½¦à¼‹à½‘à½„à¼‹à½”à¼‹à½¡à½¼à½„à½¦à¼‹à½€à¾±à½²à¼‹à½£à¾·à½‚à¼‹à½”à¼‹à½à¾±à½–à¼‹à½£à¼‹à½‰à½¼à¼‹à½‚à½¢à¼‹à½–à½žà½‚à¼‹à½”à¼‹à½‘à½„à¼‹à½–à½‘à½ºà½“à¼‹à½”à½¦à¼‹à½†à½ºà½‘à¼‹à½”à¼‹à½‘à½„à¼‹à½šà½²à½‚à¼‹à½¢à¾à¾±à½„à¼‹à½£à¼‹à½˜à½‚à½¼à¼‹à½“à½²à¼‹
// @description:el      Î ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯ÎµÏ‚ Widescreen + Fullscreen ÏƒÏ„Î¿ chatgpt.com + perplexity.ai + poe.com Î³Î¹Î± Î²ÎµÎ»Ï„Î¹Ï‰Î¼Î­Î½Î· Ï€ÏÎ¿Î²Î¿Î»Î® + Î¼ÎµÎ¯Ï‰ÏƒÎ· Ï„Î·Ï‚ ÎºÏÎ»Î¹ÏƒÎ·Ï‚
// @description:eo      Aldonas larÄekranajn + plenekranajn reÄimojn al chatgpt.com + perplexity.ai + poe.com por plibonigita vidado + malpliigo de Åovado
// @description:es      Agrega modos de pantalla panorÃ¡mica + pantalla completa a chatgpt.com + perplexity.ai + poe.com para una visualizaciÃ³n mejorada + desplazamiento reducido
// @description:et      Lisab chatgpt.com + perplexity.ai + poe.com-le Widescreen + TÃ¤isekraani reÅ¾iimid parema vaatamise ja vÃ¤henenud kerimisega
// @description:eu      Gehitu Widescreen + Pantaila oso moduak chatgpt.com + perplexity.ai + poe.com-ra ikusmen hobetu + mugimendua gutxituz
// @description:fa      Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø­Ø§Ù„Øª Ù‡Ø§ÛŒ ÙˆØ§ÛŒØ¯ Ø§Ø³Ú©Ø±ÛŒÙ† + ØªÙ…Ø§Ù… ØµÙØ­Ù‡ Ø¨Ù‡ chatgpt.com + perplexity.ai + poe.com Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¨Ù‡ØªØ± + Ú©Ø§Ù‡Ø´ Ø§Ø³Ú©Ø±ÙˆÙ„
// @description:fi      LisÃ¤Ã¤ Widescreen + Koko nÃ¤ytÃ¶n tilat chatgpt.com + perplexity.ai + poe.com:hen paremman katselun + vÃ¤hentyneen vierityksen ansiosta
// @description:fo      Leggur til Widescreen + Fullscreen hamrar Ã¡ chatgpt.com + perplexity.ai + poe.com fyri bÃ¦tta sÃ½ning + minnka skÃºvsetan
// @description:fr      Ajoute les modes Ã©cran large + plein Ã©cran Ã  chatgpt.com + perplexity.ai + poe.com pour une meilleure visualisation + un dÃ©filement rÃ©duit
// @description:fr-CA   Ajoute les modes Ã©cran large + plein Ã©cran Ã  chatgpt.com + perplexity.ai + poe.com pour une meilleure visualisation + un dÃ©filement rÃ©duit
// @description:gd      Cuir gnÃ¨ithean Leudachaidh + Faidhlichean sÃ bhaladh sgrÃ¹dair gu chatgpt.com + perplexity.ai + poe.com airson sealladh air Ã rdachadh + sgroladh lag
// @description:gl      Engade os modos de pantalla panorÃ¡mica + pantalla completa a chatgpt.com + perplexity.ai + poe.com para unha visualizaciÃ³n mellorada + desprazamento reducido
// @description:gu      àªàª¨à«àª¹àª¾àª¨à«‹ àªœà«‹àª¡àª¾àª£ àª•àª°à«‹ àªµàª¾àªˆàª¡àª¸à«àª•à«àª°à«€àª¨ + àª«à«àª²àª¸à«àª•à«àª°à«€àª¨ àª®à«‹àª¡ àª¤à«‡àª®àªœ chatgpt.com + perplexity.ai + poe.com àª®àª¾àªŸà«‡ àª¸à«àª§àª¾àª°à«‡àª² àªœà«‹àªˆàª¨à«àªŸ àªªà«àª°àª¦àª°à«àª¶àª¨ + àª•àª®à«‡àª²à«€ àª¸à«àª•à«àª°à«‹àª²àª¿àª‚àª— àª®àª¾àªŸà«‡
// @description:haw     KÄlele i nÄ Ao Waiwai + Ao Piha i loko o chatgpt.com + perplexity.ai + poe.com no ka ho'ohana'ana ikaika + ka'u hÄ'ule 'ana
// @description:he      ×ž×•×¡×™×£ ×ž×¦×‘×™ ×ž×¡×š ×ž×•×¨×—×‘ + ×ž×¡×š ×ž×œ× ×œÖ¾chatgpt.com + perplexity.ai + poe.com ×œ×©×™×¤×•×¨ ×ª×¦×•×’×” + ×”×¤×—×ª×ª ×’×œ×™×œ×”
// @description:hi      à¤¬à¤¢à¤¼à¤¿à¤¯à¤¾ à¤¦à¥ƒà¤¶à¥à¤¯ + à¤•à¤® à¤¸à¥à¤•à¥à¤°à¥‹à¤²à¤¿à¤‚à¤— à¤•à¥‡ à¤²à¤¿à¤ chatgpt.com + perplexity.ai + poe.com à¤®à¥‡à¤‚ à¤µà¤¾à¤‡à¤¡à¤¸à¥à¤•à¥à¤°à¥€à¤¨ + à¤«à¥à¤²à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤®à¥‹à¤¡ à¤œà¥‹à¤¡à¤¼à¤¤à¤¾ à¤¹à¥ˆ
// @description:hr      Dodaje Widescreen + Fullscreen naÄine na chatgpt.com + perplexity.ai + poe.com za poboljÅ¡ani prikaz + smanjenje klizanja
// @description:ht      Ajoute modes Widescreen + Fullscreen nan chatgpt.com + perplexity.ai + poe.com pou amelyore gade + redui defileman
// @description:hu      HozzÃ¡adja a Widescreen + Teljes kÃ©pernyÅ‘ mÃ³dokat a chatgpt.com + perplexity.ai + poe.com-hoz jobb megtekintÃ©s + gÃ¶rgetÃ©s csÃ¶kkentÃ©se Ã©rdekÃ©ben
// @description:hy      Ô±Õ¾Õ¥Õ¬Õ¡ÖÕ¶Õ¸Ö‚Õ´ Õ§ Widescreen + Fullscreen Õ¼Õ¥ÕªÕ«Õ´Õ¶Õ¥Ö€Õ¨ chatgpt.com + perplexity.ai + poe.com-Õ¸Ö‚Õ´ Õ¢Õ¡Ö€Õ¥Õ¬Õ¡Õ¾Õ¾Õ¡Õ® Õ¤Õ«Õ¿Õ¸Ö‚Õ´Õ« Õ°Õ¡Õ´Õ¡Ö€ + Õ½Õ¡Õ°Õ´Õ¡Õ¶Õ¡ÖƒÕ¡Õ¯Õ¸Ö‚Õ´Õ¨
// @description:id      Menambahkan mode Widescreen + Layar Penuh ke chatgpt.com + perplexity.ai + poe.com untuk penampilan yang lebih baik + pengurangan pengguliran
// @description:is      BÃ¦tir viÃ° Widescreen + FullskjÃ¡rshamra Ã­ chatgpt.com + perplexity.ai + poe.com til aÃ° bÃ¦ta sÃ½n + draga Ãºr skruni
// @description:it      Aggiunge le modalitÃ  Widescreen + Schermo intero a chatgpt.com + perplexity.ai + poe.com per una visualizzazione migliorata + riduzione dello scorrimento
// @description:ja      chatgpt.com + perplexity.ai + poe.comã®è¡¨ç¤ºã‚’å‘ä¸Šã™ã‚‹ãŸã‚ã«ã€ãƒ¯ã‚¤ãƒ‰ã‚¹ã‚¯ãƒªãƒ¼ãƒ³+ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™
// @description:jv      Nambahi Modus Widescreen + Fullscreen menyang chatgpt.com + perplexity.ai + poe.com kanggo tampilan sing ditingkatake + ngecilake scrolling
// @description:ka      áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ¡ Widescreen + Fullscreen áƒ áƒ”áƒŸáƒ˜áƒ›áƒ”áƒ‘áƒ¡ chatgpt.com + perplexity.ai + poe.com-áƒ¨áƒ˜ áƒ’áƒáƒ£áƒ›áƒ¯áƒáƒ‘áƒ”áƒ¡áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒœáƒáƒ®áƒ•áƒ + áƒ’áƒáƒ›áƒáƒ™áƒšáƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ’áƒáƒ“áƒáƒ“áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ–áƒœáƒ˜áƒ—
// @description:kk      chatgpt.com + perplexity.ai + poe.com-Ð³Ðµ Widescreen + Fullscreen Ñ€ÐµÐ¶Ð¸Ð¼Ð´ÐµÑ€Ñ–Ð½ Ò›Ð¾ÑÑƒ Ð°Ñ€Ò›Ñ‹Ð»Ñ‹ ÐºÓ©Ñ€Ñ–Ð½Ñ–Ñ Ò¯Ð·Ð´Ñ–ÐºÑ‚ÐµÐ¼ÐµÐ»ÐµÑƒ + ÑÐºÑ€Ð¾Ð»Ð»Ð°ÑƒÐ´Ñ‹ ÐºÐµÐ¼Ñ–Ñ‚Ñƒ
// @description:km      áž”áž“áŸ’ážáŸ‚áž˜ážšáž”áŸ€áž” Widescreen + Fullscreen áž‘áŸ…áž€áŸ’áž“áž»áž„ chatgpt.com + perplexity.ai + poe.com ážŸáž˜áŸ’ážšáž¶áž”áŸ‹áž€áž¶ážšáž˜áž¾áž›áž¡áž¾áž„áž”áŸ’ážšáž áŸ‚áž›áž‡áž¶áž€áŸ’ážšáž»áž˜áž áŸŠáž»áž“ + áž€áž¶ážšážšáž„áž…áž¶áŸ†ážáŸ’áž›áž½áž“áž¯áž„áž”áŸ‰áž»ážŽáŸ’ážŽáŸ„áŸ‡
// @description:kn      à²…à²­à³à²¯à²¾à²¸à²•à³à²°à²®à²¦ à²¦à³ƒà²·à³à²Ÿà²¿à²—à³† à²…à²¨à³à²—à³à²£à²µà²¾à²—à²¿ Widescreen + Fullscreen à²®à³‹à²¡à³à²—à²³à²¨à³à²¨à³ chatgpt.com + perplexity.ai + poe.comà²—à³† à²¸à³‡à²°à²¿à²¸à³à²¤à³à²¤à²¦à³†
// @description:ko      chatgpt.com + perplexity.ai + poe.comì— ì™€ì´ë“œìŠ¤í¬ë¦° + ì „ì²´í™”ë©´ ëª¨ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ê°œì„ ëœ í™”ë©´ í‘œì‹œ + ìŠ¤í¬ë¡¤ ê°ì†Œ
// @description:ku      DihÃªnÃ®ne modÃªn Widescreen + FullscreenÃª bo chatgpt.com + perplexity.ai + poe.comÃª ji bo pÃªÅŸÃ®nkirina nÃ®ÅŸandina + kÃªmkirina kayanÃ®nÃª
// @description:ky      chatgpt.com + perplexity.ai + poe.com-Ð³Ð¾ Widescreen + Fullscreen Ñ€ÐµÐ¶Ð¸Ð¼Ð´Ð¾Ñ€Ñƒ ÐºÐ¾ÑˆÐ¾ Ð°Ñ€ÐºÑ‹Ð»ÑƒÑƒ Ð¶Ð°ÐºÑˆÑ‹ ÐºÓ©Ñ€Ò¯Ð½Ò¯ÑˆÑ‚Ò¯ + ÑÐºÑ€Ð¾Ð»Ð»Ð¾Ð¾ Ð¶Ð¾Ð³Ð¾Ñ‚ÑƒÑƒ
// @description:la      TV + Fullscreen modos addit chatgpt.com + perplexity.ai + poe.com ad augendam viewing + reducta scrolling
// @description:lb      FÃ¼Ã¼gt Widescreen + Fullscreen Modi dem chatgpt.com + perplexity.ai + poe.com bÃ¤i fir verbessert Visioun + reduzÃ©iert Scrollen
// @description:lo      à»€àºžàºµà»ˆàº¡àº®àº¹àºšà»àºšàºš Widescreen + Fullscreen à»ƒàº«à»‰à»„àº”à»‰àº®àº½àº™ chatgpt.com + perplexity.ai + poe.com àºªàº³à»€àº¥àº±àº”àº‚àº­àº‡àºàº²àº™àºªàº°à»àº”àº‡àº­à»‰àº²àº‡àº§à»ˆàº²àº‡ + àºàº²àº™àº›àº°à»€àº¡àºµàº”à»ƒàº«à»‰àº™à»‰à»àº²àº‚àº²àºàº«àº™à»‰àº²
// @description:lt      Prideda Widescreen + Fullscreen reÅ¾imus Ä¯ chatgpt.com + perplexity.ai + poe.com, siekiant pagerinti perÅ¾iÅ«rÄ… ir sumaÅ¾inti slinkimÄ…
// @description:lv      Pievieno Widescreen + Fullscreen reÅ¾Ä«mus chatgpt.com + perplexity.ai + poe.com, lai uzlabotu skatÄ«Å¡anos + samazinÄtu ritinÄÅ¡anu
// @description:mg      Mametraka ny fomba Widescreen + Fullscreen amin'ny chatgpt.com + perplexity.ai + poe.com mba handresy ny fandefasana + famindrampoana ny firotsahana
// @description:mi      Ka whakarite ana i ngÄ Ähuatanga Widescreen + Fullscreen ki te chatgpt.com + perplexity.ai + poe.com mÅ te whakaatu whakapai ake + te whakaiti i te whakararuraru
// @description:mk      Ð”Ð¾Ð´Ð°Ð²Ð° Ñ€ÐµÐ¶Ð¸Ð¼Ð¸ Ð½Ð° Widescreen + Fullscreen Ð²Ð¾ chatgpt.com + perplexity.ai + poe.com Ð·Ð° Ð¿Ð¾Ð´Ð¾Ð±Ñ€ÑƒÐ²Ð°ÑšÐµ Ð½Ð° Ð¿Ñ€Ð¸ÐºÐ°Ð·Ð¾Ñ‚ + Ð½Ð°Ð¼Ð°Ð»ÑƒÐ²Ð°ÑšÐµ Ð½Ð° ÑÐºÑ€Ð¾Ð»Ð¸Ñ€Ð°ÑšÐµÑ‚Ð¾
// @description:ml      à´µà´¾à´¯àµà´¡àµà´¸àµà´•àµà´°àµ€àµ» + à´ªàµ‚àµ¼à´£àµà´£à´¸àµà´•àµà´°àµ€àµ» à´®àµ‹à´¡àµà´•àµ¾ à´šàµ‡àµ¼à´•àµà´•àµà´¨àµà´¨àµ chatgpt.com + perplexity.ai + poe.com-à´¯à´¿àµ½ à´®à´¿à´•àµà´•à´µà´¾à´±àµà´‚ à´•à´¾à´´àµà´šà´ªàµà´ªà´¾à´Ÿàµ + à´•àµà´±à´µàµ à´¤à´¿à´°à´¿à´•àµà´•àµ½ à´šàµ†à´¯àµà´¯àµà´¨àµà´¨à´¤à´¿à´¨àµ
// @description:mn      Widescreen + Fullscreen Ð³Ð¾Ñ€Ð¸Ð¼ÑƒÑƒÐ´Ñ‹Ð³ chatgpt.com + perplexity.ai + poe.com Ñ€Ò¯Ò¯ Ð½ÑÐ¼ÑÑ… Ð½ÑŒ Ð´ÑÐ»Ð³ÑÑ†ÑÐ½Ð´ Ñ…ÑƒÐ²Ñ†Ð°ÑÐ»Ð°Ð½ + Ð³Ò¯Ð¹Ð»Ð³ÑÑÐ½Ð¸Ð¹ ÑÐ²Ð´Ñ€ÑÐ»Ð´ÑÑ Ñ…ÑÐ½Ð°Ñ…Ñ‹Ð³ Ð¾Ñ€ÑƒÑƒÐ»Ð½Ð°
// @description:mr      à¤µà¥à¤¹à¤¾à¤‡à¤¡à¤¸à¥à¤•à¥à¤°à¥€à¤¨ + à¤«à¥à¤²à¤¸à¥à¤•à¥à¤°à¥€à¤¨ à¤®à¥‹à¤¡à¥à¤¸ à¤šà¥‡ chatgpt.com + perplexity.ai + poe.comà¤®à¤§à¥à¤¯à¥‡ à¤œà¥‹à¤¡à¤²à¥‡ à¤œà¤¾à¤¤à¤¾à¤¤ à¤µ à¤ªà¤¾à¤¹à¤£à¥€ à¤µà¤¾à¤¢à¤µà¤¿à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤¸à¥à¤•à¥à¤°à¥‹à¤²à¤¿à¤‚à¤— à¤•à¤®à¥€ à¤•à¤°à¤¤à¤¾à¤¤
// @description:ms      Menambah mod Widescreen + Layar Penuh ke chatgpt.com + perplexity.ai + poe.com untuk tampilan yang lebih baik + pengurangan penatalan
// @description:mt      Jiddoqq modes Widescreen + Fullscreen gÄ§al chatgpt.com + perplexity.ai + poe.com gÄ§all-viÅ¼walizzazzjoni miÄ¡Ä¡ielda + qasam it-telf
// @description:my      á€•á€­á€¯á€™á€­á€¯á€€á€±á€¬á€„á€ºá€¸á€™á€½á€”á€ºá€žá€±á€¬á€€á€¼á€Šá€·á€ºá€›á€¾á€¯á€›á€”á€ºá€¡á€á€½á€€á€º chatgpt.com + perplexity.ai + poe.com á€á€½á€„á€º Widescreen + á€™á€»á€€á€ºá€”á€¾á€¬á€•á€¼á€„á€ºá€¡á€•á€¼á€Šá€·á€ºá€™á€¯á€’á€ºá€™á€»á€¬á€¸á€€á€­á€¯ á€‘á€Šá€·á€ºá€žá€½á€„á€ºá€¸á€‘á€¬á€¸á€žá€Šá€ºá‹
// @description:ne      à¤¸à¥à¤§à¤¾à¤°à¤¿à¤à¤•à¥‹ à¤¦à¥ƒà¤¶à¥à¤¯ + à¤•à¤® à¤¸à¥à¤•à¥à¤°à¥‹à¤²à¤¿à¤‚à¤—à¤•à¤¾ à¤²à¤¾à¤—à¤¿ à¤µà¤¾à¤‡à¤¡à¤¸à¥à¤•à¥à¤°à¤¿à¤¨ + à¤«à¥à¤²à¤¸à¥à¤•à¥à¤°à¤¿à¤¨ à¤®à¥‹à¤¡à¤¹à¤°à¥‚à¤²à¤¾à¤ˆ chatgpt.com + perplexity.ai + poe.comà¤®à¤¾ à¤¥à¤ªà¥à¤¦à¤›
// @description:nl      Voegt Widescreen + Fullscreen modi toe aan chatgpt.com + perplexity.ai + poe.com voor verbeterde weergave + verminderd scrollen
// @description:no      Legger til Widescreen + Fullskjerm-moduser i chatgpt.com + perplexity.ai + poe.com for forbedret visning + redusert rulling
// @description:ny      Ndiwonetsa zolengedwa + Zomwe zosowa ndi chatgpt.com + perplexity.ai + poe.com kwa kudzaza kuona + kuchotsa kupinda
// @description:pa      à¨µà¨¿à¨¸à¨¤à©à¨°à¨¿à¨¤ à¨¦à©‡à¨–à¨£ à¨²à¨ˆ chatgpt.com + perplexity.ai + poe.com à¨µà¨¿à©±à¨š à¨µà¨¾à¨ˆà¨¡à¨¸à¨•à©à¨°à©€à¨¨ + à¨«à©à©±à¨²à¨¸à¨•à©à¨°à©€à¨¨ à¨®à©‹à¨¡ à¨¸à¨¼à¨¾à¨®à¨² à¨•à¨°à¨¦à¨¾ à¨¹à©ˆ + à¨˜à¨Ÿà©€ à¨¹à©‹à¨ˆ à¨¸à¨•à©à¨°à©Œà¨²à¨¿à©°à¨—
// @description:pl      Dodaje tryby Widescreen + Fullscreen do chatgpt.com + perplexity.ai + poe.com dla lepszej widocznoÅ›ci + zmniejszonego przewijania
// @description:ps      ÚØ§Ù†Ú«Ú“Û + Ù¼ÙˆÙ„Û Ù¾Ø±Ø¯Ù‡ Ù¾Ù‡ chatgpt.com + perplexity.ai + poe.com Ú©Û Ø§Ø¶Ø§ÙÙ‡ Ú©Ú“ÙŠ Ù„Ù¾Ø§Ø±Ù‡ Ù„Ø§Ø³Ø±Ø³ÛŒ ØªØ±Ù„Ø§Ø³Ù‡ Ú©Ú“ÙŠ + Ú©ÙˆÚšÚšÙˆÙ„ Ù¾Ù‡ Ú©Ù…ØªÙ‡
// @description:pt      Adiciona modos Widescreen + Tela cheia ao chatgpt.com + perplexity.ai + poe.com para visualizaÃ§Ã£o aprimorada + rolagem reduzida
// @description:pt-BR   Adiciona modos Widescreen + Tela cheia ao chatgpt.com + perplexity.ai + poe.com para visualizaÃ§Ã£o aprimorada + rolagem reduzida
// @description:ro      AdaugÄƒ modurile Widescreen + Ecran complet la chatgpt.com + perplexity.ai + poe.com pentru vizualizare Ã®mbunÄƒtÄƒÈ›itÄƒ + defilare redusÄƒ
// @description:ru      Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹ Widescreen + Fullscreen Ð² chatgpt.com + perplexity.ai + poe.com Ð´Ð»Ñ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° + ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð½Ð¾Ð¹ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ¸
// @description:rw      Ongeraho Mugari Mugari + Byuzuye Mugaragaza kuri chatgpt.com + perplexity.ai + poe.com kugirango ubone kureba neza + kugabanya umuzingo
// @description:sg      Ajoute les modes Ã©cran large + plein Ã©cran Ã  chatgpt.com + perplexity.ai + poe.com pour une meilleure visualisation + un dÃ©filement rÃ©duit
// @description:si      chatgpt.com + perplexity.ai + poe.com à·ƒà¶³à·„à· Widescreen + Fullscreen à¶´à·Šâ€à¶»à¶¯à¶»à·Šà·à¶±à¶ºà¶šà·Š à¶‘à¶šà·Š à¶šà¶»à¶ºà·’ à¶­à·€à¶­à·Š à¶´à·™à¶±à·Šà·€à¶±à·Šà¶±à·š à¶¯à·à¶±à·Š à·ƒà·’à¶­à·–à·€à·à·ƒà·’à¶šà·à¶»à¶šà·Šà·‚à¶š à·€à·’à·ƒà·’à¶±à·Š à·ƒà·„ à¶šà·™à·ƒà·šà¶¯à·à¶ºà·’ à¶‡à¶­à·’ à¶…à¶œà¶ºà¶±à·Š à·„à·”à·ƒà·Šà¶¸ à¶šà·Šâ€à¶»à·’à¶ºà·à·€à¶½à·’à¶ºà¶šà·’
// @description:sk      PridÃ¡va Widescreen + Fullscreen reÅ¾imy do chatgpt.com + perplexity.ai + poe.com pre vylepÅ¡enÃ© zobrazenie + znÃ­Å¾enie posÃºvania
// @description:sl      Dodaja Widescreen + Fullscreen naÄine v chatgpt.com + perplexity.ai + poe.com za izboljÅ¡an prikaz + zmanjÅ¡ano premikanje
// @description:sm      Faamauina Widescreen + Fullscreen faavae i le chatgpt.com + perplexity.ai + poe.com mo le faailoga faapea le mafaufau + le auina faavaivai
// @description:sn      Ongorora Mutaundi wa Widescreen + Fullscreen muchatgpt.com + perplexity.ai + poe.com kutora dzokubvumidzwa + kusha kusweropfuura
// @description:so      Wax ka beddelaa Hababka Widescreen + Fullscreen ee chatgpt.com + perplexity.ai + poe.com si aad u fiirsato + si aad u yaraato garaabinta
// @description:sq      Shton modalitete Widescreen + Fullscreen nÃ« chatgpt.com + perplexity.ai + poe.com pÃ«r pamje tÃ« pÃ«rmirÃ«suar + ulje tÃ« skrollimit
// @description:sr      Ð”Ð¾Ð´Ð°Ñ˜Ðµ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ ÑˆÐ¸Ñ€Ð¾ÐºÐ¾Ð³ ÐµÐºÑ€Ð°Ð½Ð° + Ñ†ÐµÐ»Ð¾Ð³ ÐµÐºÑ€Ð°Ð½Ð° Ð½Ð° chatgpt.com + perplexity.ai + poe.com Ð·Ð° Ð¿Ð¾Ð±Ð¾Ñ™ÑˆÐ°Ð½Ð¾ Ð³Ð»ÐµÐ´Ð°ÑšÐµ + ÑÐ¼Ð°ÑšÐµÐ½Ð¾ Ð¿Ð¾Ð¼ÐµÑ€Ð°ÑšÐµ
// @description:st      E ngolisitsoe mokhabo Widescreen + Fullscreen ho chatgpt.com + perplexity.ai + poe.com bakeng sa mofuta ona le ho fokotsa liphalantere
// @description:sv      LÃ¤gger till Widescreen + Fullscreen-lÃ¤gen i chatgpt.com + perplexity.ai + poe.com fÃ¶r fÃ¶rbÃ¤ttrad visning + minskad scrollning
// @description:sw      Inaongeza modes Widescreen + Fullscreen kwenye chatgpt.com + perplexity.ai + poe.com kwa kuimarisha kuonyesha + kupunguza kusokota
// @description:ta      chatgpt.com + perplexity.ai + poe.com à®•à¯à®•à¯ à®…à®•à®²à®¤à¯à®¤à®¿à®°à¯ˆ + à®®à¯à®´à¯à®¤à¯à®¤à®¿à®°à¯ˆ à®®à¯à®±à¯ˆà®•à®³à¯ˆà®šà¯ à®šà¯‡à®°à¯à®•à¯à®•à®¿à®±à®¤à¯ + à®®à¯‡à®®à¯à®ªà®Ÿà¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®Ÿ à®ªà®¾à®°à¯à®µà¯ˆà®•à¯à®•à¯ + à®•à¯à®±à¯ˆà®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿ à®¸à¯à®•à¯à®°à¯‹à®²à®¿à®™à¯
// @description:te      Widescreen + Fullscreen à°®à±‹à°¡à±à°²à°¨à± chatgpt.com + perplexity.ai + poe.comà°•à°¿ à°šà±‡à°°à±à°šà±à°•à±‹à°µà°¡à°‚à°¤à±‹ à°šà°‚à°ªà±à°•à±à°¨à±‡ à°µà±€à°•à±à°·à°£ à°•à°¨à°¿à°ªà°¿à°‚à°šà°¡à°¾à°¨à°¿à°•à°¿ à°¸à±à°•à±à°°à±‹à°²à± à°¤à°•à±à°•à±à°µà°—à°¾ à°®à°¾à°°à±à°šà°‚à°¡à°¿
// @description:tg      ÐœÐ°Ð²Ð¾Ð´Ð¸Ò³Ð¾Ð¸ Widescreen + Fullscreen-Ñ€Ð¾ Ð±Ð° chatgpt.com + perplexity.ai + poe.com Ð¸Ð»Ð¾Ð²Ð° Ð¼ÐµÐºÑƒÐ½Ð°Ð´, Ð±Ð°Ñ€Ð¾Ð¸ ÐºÓ¯Ò³Ð½Ð°ÑˆÑƒÐ´Ð°Ð¸ Ð½Ð°Ð¼Ð¾Ð¸Ñˆ + ÐºÐ°Ð¼ ÐºÐ°Ñ€Ð´Ð°Ð½Ð¸ ÑÐºÑ€Ð¾Ð»Ð»Ð°Ñˆ
// @description:th      à¹€à¸žà¸´à¹ˆà¸¡à¹‚à¸«à¸¡à¸”à¸ˆà¸­à¹à¸šà¸š Widescreen + Fullscreen à¹ƒà¸™ chatgpt.com + perplexity.ai + poe.com à¸ªà¸³à¸«à¸£à¸±à¸šà¸à¸²à¸£à¸”à¸¹à¸—à¸µà¹ˆà¸”à¸µà¸‚à¸¶à¹‰à¸™ + à¸à¸²à¸£à¹€à¸¥à¸·à¹ˆà¸­à¸™à¸¥à¸”à¸¥à¸‡
// @description:ti      áŠ•á‹áˆˆá‹“áˆˆ áˆáˆ­áŠ£á‹­ + áˆáŒ‰á‹³áˆ áˆá‹á‹‹áˆ­ áŠ£á‰¥ chatgpt.com + perplexity.ai + poe.com Widescreen + Fullscreen modes á‹­á‹áˆµáŠ½
// @description:tk      GiÅˆeldilen gÃ¶rmek + peseltmek Ã¼Ã§in chatgpt.com + perplexity.ai + poe.com-Ã¤ giÅˆ ekran + Doly ekran reesimlerini goÅŸÃ½ar
// @description:tl      Nagdaragdag ng mga mode ng Widescreen + Fullscreen sa chatgpt.com + perplexity.ai + poe.com para sa pinabuting pagtingin + pinaikling pag-scroll
// @description:tn      Inowedzera Widescreen + Fullscreen modes kuchatgpt.com + perplexity.ai + poe.com yekuwedzera kutarisa + kuderedzwa kupuruzira
// @description:to      HoÊ»ohui i ka Widescreen + Fullscreen modes i chatgpt.com + perplexity.ai + poe.com no ka hoÊ»onui Ê»ia Ê»ana o ka nÄnÄ Ê»ana + hoÊ»emi i ka Ê»Åwili Ê»ana
// @description:tr      GeliÅŸtirilmiÅŸ gÃ¶rÃ¼ntÃ¼leme + azaltÄ±lmÄ±ÅŸ kaydÄ±rma iÃ§in chatgpt.com + perplexity.ai + poe.com'ye Widescreen + Fullscreen modlarÄ± ekler
// @description:tt      chatgpt.com + perplexity.ai + poe.com-Ð³Ð° Widescreen + Fullscreen Ñ€Ó™Ð¶Ð¸Ð¼Ð»Ó™Ñ€ÐµÐ½ Ó©ÑÑ‚Ó™Ó™Ð´ÐµÐ³ÐµÐ·Ð³Ó™, ÐºÒ¯Ñ€Ò¯Ð»Ó™ÑˆÑ‚ÐµÒ£Ð»Ó™Ñ€Ð¸ Ò¯Ñ‚ÐºÓ™Ñ€Ð³Ó™ + ÑÐºÑ€Ð¾Ð»Ð»Ð°ÑƒÐ½Ñ‹ Ð±ÑƒÑÐ½Ñ‚Ð°Ñ€Ñ‚Ð°Ñ€Ð³Ð°
// @description:ug      chatgpt.com + perplexity.ai + poe.comØºØ§ Widescreen + Fullscreen ÙƒÛ†Ø±ÛˆÙ†Ù…Û• Ù¾Û•Ø³Û•Ù†Ø¯ Ù‚Ù‰Ù„Ù‰Ø´+ÙŠÙ‰ØªÙ‰Ù¾ Ø¦Ø§Ø¬Ø±Ø§ Ù‚Ù‰Ù„Ù‰Ø´ Ù…Û†Ú†Ù‰ÙŠÙ‰
// @description:uk      Ð”Ð¾Ð´Ð°Ñ” Ñ€ÐµÐ¶Ð¸Ð¼Ð¸ Widescreen + Fullscreen Ð´Ð¾ chatgpt.com + perplexity.ai + poe.com Ð´Ð»Ñ Ð¿Ð¾Ð»Ñ–Ð¿ÑˆÐµÐ½Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÐ³Ð»ÑÐ´Ñƒ + Ð·Ð¼ÐµÐ½ÑˆÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ¸
// @description:ur      ØªØ±Ù‚ÛŒ ÛŒØ§ÙØªÛ Ø¯ÛŒÚ©Ú¾Ø§Ø¦ÛŒ Ú©Û’ Ù„Ø¦Û’ chatgpt.com + perplexity.ai + poe.com Ù…ÛŒÚº ÙˆØ§Ø¦Úˆ Ø§Ø³Ú©Ø±ÛŒÙ† + Ù¾ÙˆØ±ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ† Ù…ÙˆÚˆØ² Ø´Ø§Ù…Ù„ Ú©Ø±ØªØ§ ÛÛ’
// @description:uz      chatgpt.com + perplexity.ai + poe.com-ga Widescreen + Fullscreen rejimlarini qo'shadi, ko'rishni yaxshilash + aylantirishni kamaytirish uchun
// @description:vi      ThÃªm cháº¿ Ä‘á»™ Widescreen + Fullscreen vÃ o chatgpt.com + perplexity.ai + poe.com Ä‘á»ƒ cáº£i thiá»‡n hiá»ƒn thá»‹ + giáº£m cuá»™n trang
// @description:wo      BÃ«gg na Ã±iis-Ã±iis Widescreen + Fullscreen ci chatgpt.com + perplexity.ai + poe.com buÃ± leen waxtu dib lu jÃ mm + Ã±aari jÃ«m
// @description:xh      Enza izimvo Widescreen + Fullscreen kwakuhlanganiselelwa kwichatgpt.com + perplexity.ai + poe.com ukuze kube khona okukhulu + kokucima kwesithombe
// @description:yi      ×ž×•×¡×™×£ Widescreen + Fullscreen ×ž×Ö¸×“×¢×¡ ×¦×• chatgpt.com + perplexity.ai + poe.com ×¤Ö¿×Ö·×¨ ×™×ž×¤Ö¼×¨×•×•×•×“ ×•×•×™×•×™× ×’ + ×¨×™×“×•×¡×˜ ×¡×§×¨×Ö¸×œ×œ×™× ×’
// @description:yo      Fi Ã wá»n ohun á»rá» Widescreen + Fullscreen si chatgpt.com + perplexity.ai + poe.com fun iwá»le aiyewo + iwá»le ififunwá»le
// @description:zh      å‘ chatgpt.com + perplexity.ai + poe.com æ·»åŠ å®½å± + å…¨å±æ¨¡å¼ä»¥å¢žå¼ºæŸ¥çœ‹æ•ˆæžœ + å‡å°‘æ»šåŠ¨
// @description:zh-CN   å‘ chatgpt.com + perplexity.ai + poe.com æ·»åŠ å®½å± + å…¨å±æ¨¡å¼ä»¥å¢žå¼ºæŸ¥çœ‹æ•ˆæžœ + å‡å°‘æ»šåŠ¨
// @description:zh-HK   å‘ chatgpt.com + perplexity.ai + poe.com æ·»åŠ å¯¬å± + å…¨å±æ¨¡å¼ä»¥å¢žå¼·æŸ¥çœ‹æ•ˆæžœ + æ¸›å°‘æ»¾å‹•
// @description:zh-SG   å‘ chatgpt.com + perplexity.ai + poe.com æ·»åŠ å®½å± + å…¨å±æ¨¡å¼ä»¥å¢žå¼ºæŸ¥çœ‹æ•ˆæžœ + å‡å°‘æ»šåŠ¨
// @description:zh-TW   å‘ chatgpt.com + perplexity.ai + poe.com æ·»åŠ å¯¬å± + å…¨å±æ¨¡å¼ä»¥å¢žå¼·æŸ¥çœ‹æ•ˆæžœ + æ¸›å°‘æ»¾å‹•
// @description:zu      Yengeza Isikrini Esibanzi + Izindlela Zesikrini Esigcwele ku-chatgpt.com + perplexity.ai + poe.com ukuze uthole ukubuka okuthuthukisiwe + okuncishisiwe ukuskrola
// @author              Adam Lui
// @namespace           https://github.com/adamlui
// @version             2024.12.24
// @license             MIT
// @icon                https://media.chatgptwidescreen.com/images/icons/widescreen-robot-emoji/icon48.png?9a393be
// @icon64              https://media.chatgptwidescreen.com/images/icons/widescreen-robot-emoji/icon64.png?9a393be
// @compatible          chrome
// @compatible          firefox
// @compatible          edge
// @compatible          opera
// @compatible          brave
// @compatible          vivaldi
// @compatible          librewolf
// @compatible          ghost
// @compatible          qq
// @match               *://chatgpt.com/*
// @match               *://chat.openai.com/*
// @match               *://*.perplexity.ai/*
// @match               *://poe.com/*
// @connect             cdn.jsdelivr.net
// @connect             update.greasyfork.org
// @require             https://cdn.jsdelivr.net/npm/@kudoai/chatgpt.js@3.4.0/dist/chatgpt.min.js#sha256-LfB3mqeB6Xiq2BDub1tn3BtvEiMcaWEp+I094MFpA+Q=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-widescreen@a150549768c6b8e2166935cd4fb61425b0c2cd4c/chrome/extension/components/modals.js#sha256-cxFJumnsUSk/+OfBmv6nShkyfs1hiPOyf/Adb69nCM8=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-widescreen@7556b05e60686664ff88cacbf237a1ae7c48510b/chrome/extension/lib/dom.js#sha256-mMUljWP1ZlSgzGCVZmMLv4LAiKHeE190CHpMPlIaX9s=
// @require             https://cdn.jsdelivr.net/gh/adamlui/chatgpt-widescreen@0682da4cc061f16f702acb20851f0fa97ad7c337/chrome/extension/lib/settings.js#sha256-ejX+5oDVL+zTmvJBOUFXV81aT2Xgi4X9A7I03k713v8=
// @resource brsCSS     https://assets.aiwebextensions.com/styles/rising-stars/dist/black.min.css?v=0cde30f9ae3ce99ae998141f6e7a36de9b0cc2e7#sha256-4nbm81/JSas4wmxFIdliBBzoEEHRZ057TpzNX1PoQIs=
// @resource wrsCSS     https://assets.aiwebextensions.com/styles/rising-stars/dist/white.min.css?v=0cde30f9ae3ce99ae998141f6e7a36de9b0cc2e7#sha256-pW8xWWV6tm8Q6Ms+HWZv6+QzzTLJPyL1DyE18ywpVaE=
// @grant               GM_setValue
// @grant               GM_getValue
// @grant               GM_registerMenuCommand
// @grant               GM_unregisterMenuCommand
// @grant               GM_getResourceText
// @grant               GM_xmlhttpRequest
// @grant               GM.xmlHttpRequest
// @noframes
// @downloadURL         https://update.greasyfork.org/scripts/461473/chatgpt-widescreen.user.js
// @updateURL           https://update.greasyfork.org/scripts/461473/chatgpt-widescreen.meta.js
// @homepageURL         https://www.chatgptwidescreen.com
// @supportURL          https://support.chatgptwidescreen.com
// @contributionURL     https://github.com/sponsors/adamlui
// ==/UserScript==

// Documentation: https://docs.chatgptwidescreen.com
// NOTE: This script relies on the powerful chatgpt.js library @ https://chatgpt.js.org
//  Â© 2023â€“2024 KudoAI & contributors under the MIT license.

(async () => {

    // Init ENV context
    const env = {
        browser: {
            language: chatgpt.getUserLanguage(), isFF: chatgpt.browser.isFirefox(), isMobile: chatgpt.browser.isMobile()
        },
        scriptManager: {
            name: (() => { try { return GM_info.scriptHandler } catch (err) { return 'unknown' }})(),
            version: (() => { try { return GM_info.version } catch (err) { return 'unknown' }})()
        },
        site: /([^.]+)\.[^.]+$/.exec(location.hostname)[1], ui: {}
    }
    env.browser.isPortrait = env.browser.isMobile && (window.innerWidth < window.innerHeight)
    env.ui.scheme = getScheme()
    const xhr = typeof GM != 'undefined' && GM.xmlHttpRequest || GM_xmlhttpRequest

    // Init APP data
    const app = {
        version: GM_info.script.version, configKeyPrefix: `${env.site} Widescreen`,
        chatgptJSver: /chatgpt\.js@([\d.]+)/.exec(GM_info.scriptMetaStr)[1], urls: {},
        latestAssetCommitHash: '1f340c6' // for cached app.json + sites.json + messages.json
    }
    app.urls.assetHost = `https://cdn.jsdelivr.net/gh/adamlui/chatgpt-widescreen@${app.latestAssetCommitHash}`
    const remoteAppData = await new Promise(resolve => xhr({
        method: 'GET', url: `${app.urls.assetHost}/data/app.json`,
        onload: resp => resolve(JSON.parse(resp.responseText))
    }))
    Object.assign(app, { ...remoteAppData, urls: { ...app.urls, ...remoteAppData.urls }})
    app.urls.update = app.urls.greasyFork.replace('https://', 'https://update.')
        .replace(/(\d+)-?([a-z-]*)$/i, (_, id, name) => `${id}/${ name || 'script' }.meta.js`)
    app.msgs = {
        appName: app.name,
        appAuthor: app.author.name,
        appDesc: 'Adds Widescreen + Fullscreen modes to ChatGPT for enhanced viewing + reduced scrolling',
        menuLabel_fullerWins: 'Fuller Windows',
        menuLabel_tallerChatbox: 'Taller Chatbox',
        menuLabel_widerChatbox: 'Wider Chatbox',
        menuLabel_newChatBtn: 'New Chat Button',
        menuLabel_hiddenHeader: 'Hidden Header',
        menuLabel_hiddenFooter: 'Hidden Footer',
        menuLabel_btnAnimations: 'Button Animations',
        menuLabel_modeNotifs: 'Mode Notifications',
        menuLabel_about: 'About',
        menuLabel_donate: 'Please send a donation',
        menuLabel_disabled: 'Disabled (extension installed)',
        about_version: 'Version',
        about_poweredBy: 'Powered by',
        about_openSourceCode: 'Open source code',
        mode_wideScreen: 'Wide screen',
        mode_fullWindow: 'Full-window',
        mode_fullScreen: 'Full screen',
        tooltip_wideScreenON: 'Wide screen',
        tooltip_wideScreenOFF: 'Exit wide screen',
        tooltip_fullWindowON: 'Full-window mode',
        tooltip_fullWindowOFF: 'Exit full window',
        tooltip_fullScreenON: 'Full screen',
        tooltip_fullScreenOFF: 'Exit full screen',
        tooltip_newChat: 'New chat',
        helptip_fullerWins: 'Also activate Wide Screen when activating Full-Window',
        helptip_tallerChatbox: 'Expand the chatbox vertically',
        helptip_widerChatbox: 'Expand the chatbox horizontally in Wide Screen mode',
        helptip_newChatBtn: 'Show New Chat button in chatbox',
        helptip_hiddenFooter: 'Hide site footer',
        helptip_hiddenHeader: 'Hide site header',
        helptip_btnAnimations: 'Animate chatbar buttons on hover',
        helptip_modeNotifs: 'Show notifications when toggling modes/settings',
        alert_choosePlatform: 'Choose a platform',
        alert_updateAvail: 'Update available',
        alert_newerVer: 'An update to',
        alert_isAvail: 'is available',
        alert_upToDate: 'Up-to-date',
        alert_isUpToDate: 'is up-to-date',
        alert_showYourSupport: 'Show your support',
        alert_isOSS: 'is open-source software built & maintained for free through 100% volunteer efforts',
        alert_despiteAffliction: 'Despite being severely afflicted by',
        alert_longCOVID: 'long COVID',
        alert_since2020: 'since 2020',
        alert_byDonatingResults: 'by donating, you help me to continue improving, fixing bugs, adding new features, and making the software even better',
        alert_yourContrib: 'Your contribution',
        alert_noMatterSize: 'no matter the size',
        alert_directlySupports: 'directly supports my unpaid efforts to ensure this project remains free and open for all to use',
        alert_tyForSupport: 'Thank you for your support',
        alert_author: 'author',
        alert_pressF11: 'Press F11 to exit full screen',
        alert_f11reason: 'F11 was used to enter full screen, and due to browser security reasons, the same key must be used to exit it',
        btnLabel_moreAIextensions: 'More AI Extensions',
        btnLabel_rateUs: 'Rate Us',
        btnLabel_getSupport: 'Get Support',
        btnLabel_checkForUpdates: 'Check for Updates',
        btnLabel_update: 'Update',
        btnLabel_dismiss: 'Dismiss',
        link_viewChanges: 'View changes',
        state_on: 'on',
        state_off: 'off'
    }

    // LOCALIZE app.msgs for non-English users
    if (!env.browser.language.startsWith('en')) {
        const localizedMsgs = await new Promise(resolve => {
            const msgHostDir = app.urls.assetHost + '/chrome/extension/_locales/',
                  msgLocaleDir = ( env.browser.language ? env.browser.language.replace('-', '_') : 'en' ) + '/'
            let msgHref = msgHostDir + msgLocaleDir + 'messages.json', msgXHRtries = 0
            function fetchMsgs() { xhr({ method: 'GET', url: msgHref, onload: handleMsgs })}
            function handleMsgs(resp) {
                try { // to return localized messages.json
                    const msgs = JSON.parse(resp.responseText), flatMsgs = {}
                    for (const key in msgs) // remove need to ref nested keys
                        if (typeof msgs[key] == 'object' && 'message' in msgs[key])
                            flatMsgs[key] = msgs[key].message
                    resolve(flatMsgs)
                } catch (err) { // if bad response
                    msgXHRtries++ ; if (msgXHRtries == 3) return resolve({}) // try original/region-stripped/EN only
                    msgHref = env.browser.language.includes('-') && msgXHRtries == 1 ? // if regional lang on 1st try...
                        msgHref.replace(/([^_]+_[^_]+)_[^/]*(\/.*)/, '$1$2') // ...strip region before retrying
                            : ( msgHostDir + 'en/messages.json' ) // else use default English messages
                    fetchMsgs()
                }
            }
            fetchMsgs()
        })
        Object.assign(app.msgs, localizedMsgs)
    }

    // Init SITE profiles
    const sites = Object.assign(Object.create(null), await new Promise(resolve => xhr({
        method: 'GET', url: `${app.urls.assetHost}/data/sites.json`,
        onload: resp => resolve(JSON.parse(resp.responseText))
    })))
    sites.openai = { ...sites.chatgpt } // shallow copy to cover old domain

    // Export DEPENDENCIES to imported resources
    dom.dependencies.import({ env }) // for env.ui.scheme
    modals.dependencies.import({ app, env, updateCheck }) // for app data + env.ui.scheme + modals.about
    settings.dependencies.import({ app }) // for app.msgs + app.configKeyPrefix refs

    // Init SETTINGS
    settings.load(sites[env.site].availFeatures)

    // Define MENU functions

    const menu = {
        ids: [], state: {
            symbols: ['âŒ', 'âœ”ï¸'], separator: env.scriptManager.name == 'Tampermonkey' ? ' â€” ' : ': ',
            words: [app.msgs.state_off.toUpperCase(), app.msgs.state_on.toUpperCase()]
        },

        register() {
            const tooltipsSupported = env.scriptManager.name == 'Tampermonkey'
                                   && parseInt(env.scriptManager.version.split('.')[0]) >= 5

            // Show "Disabled (extension installed)"
            if (env.extensionInstalled)
                GM_registerMenuCommand(`${menu.state.symbols[0]} ${app.msgs.menuLabel_disabled}`,
                    () => modals.open('about'), tooltipsSupported ? { title: ' ' } : undefined )

            // ...or add settings toggles
            else Object.keys(settings.controls).forEach(key => {
                if (sites[env.site].availFeatures.includes(key)) {
                    const settingIsEnabled = config[key] ^ key.includes('Disabled')
                    const menuLabel = `${ settings.controls[key].symbol || menu.state.symbols[+settingIsEnabled] } `
                                    + settings.controls[key].label
                                    + menu.state.separator + menu.state.words[+settingIsEnabled]
                    menu.ids.push(GM_registerMenuCommand(menuLabel, () => {
                        settings.save(key, !config[key]) ; sync.configToUI({ updatedKey: key })
                        notify(`${settings.controls[key].label}: ${
                            menu.state.words[+(key.includes('Disabled') ^ config[key])]}`)
                    }, tooltipsSupported ? { title: settings.controls[key].helptip || ' ' } : undefined))
                }
            });

            // Add About/Donate entries
            ['about', 'donate'].forEach(entryType => {
                if (entryType === 'donate' && env.extensionInstalled) return
                menu.ids.push(GM_registerMenuCommand(
                    `${ entryType == 'about' ? 'ðŸ’¡' : 'ðŸ’–' }`
                        + ` ${app.msgs[`menuLabel_${entryType}`]} ${ entryType == 'about' ? app.msgs.appName : '' }`,
                    () => modals.open(entryType), tooltipsSupported ? { title: ' ' } : undefined
                ))
            })
        },

        refresh() {
            if (typeof GM_unregisterMenuCommand == 'undefined') return
            for (const id of menu.ids) { GM_unregisterMenuCommand(id) } menu.register()
        }
    }

    function updateCheck() {
        xhr({
            method: 'GET', url: app.urls.update + '?t=' + Date.now(),
            headers: { 'Cache-Control': 'no-cache' },
            onload: resp => {

                // Compare versions, alert if update found
                app.latestVer = /@version +(.*)/.exec(resp.responseText)[1]
                for (let i = 0 ; i < 4 ; i++) { // loop thru subver's
                    const currentSubVer = parseInt(app.version.split('.')[i], 10) || 0,
                          latestSubVer = parseInt(app.latestVer.split('.')[i], 10) || 0
                    if (currentSubVer > latestSubVer) break // out of comparison since not outdated
                    else if (latestSubVer > currentSubVer) // if outdated
                        return modals.open('update', 'available')
                }

                // Alert to no update found, nav back to About
                modals.open('update', 'unavailable')
        }})
    }

    // Define FEEDBACK functions

    function notify(msg, pos = '', notifDuration = '', shadow = '') {
        if (config.notifDisabled && !msg.includes(app.msgs.menuLabel_modeNotifs)) return

        // Strip state word to append colored one later
        const foundState = menu.state.words.find(word => msg.includes(word))
        if (foundState) msg = msg.replace(foundState, '')

        // Show notification
        chatgpt.notify(`${app.symbol} ${msg}`, pos, notifDuration, shadow || env.ui.scheme == 'dark' ? '' : 'shadow')
        const notif = document.querySelector('.chatgpt-notif:last-child')

        // Append styled state word
        if (foundState) {
            const styledStateSpan = dom.create.elem('span')
            styledStateSpan.style.cssText = `color: ${
                foundState == menu.state.words[0] ? '#ef4848 ; text-shadow: rgba(255, 169, 225, 0.44) 2px 1px 5px'
                                                  : '#5cef48 ; text-shadow: rgba(255, 250, 169, 0.38) 2px 1px 5px' }`
            styledStateSpan.append(foundState) ; notif.append(styledStateSpan)
        }
    }

    // Define CHATBAR functions

    const chatbar = {

        get() {
            let chatbar = document.querySelector(sites[env.site].selectors.input)
            const lvlsToParent = /chatgpt|openai/.test(env.site) ? 3 : 2
            for (let i = 0 ; i < lvlsToParent ; i++) chatbar = chatbar?.parentNode
            return chatbar
        },

        tweak() {
            if (!/chatgpt|openai/.test(env.site)) return
            const chatbarDiv = chatbar.get() ; if (!chatbarDiv) return
            const inputArea = chatbarDiv.querySelector(sites[env.site].selectors.input) ; if (!inputArea) return
            if (chatgpt.canvasIsOpen()) inputArea.parentNode.style.width = '100%'
            else if (!env.tallChatbar) { // narrow it to not clash w/ buttons
                const widths = { chatbar: chatbarDiv.getBoundingClientRect().width }
                const visibleBtnTypes = [...btns.getVisibleTypes(), 'send']
                visibleBtnTypes.forEach(type =>
                    widths[type] = btns[type]?.getBoundingClientRect().width
                            || document.querySelector(`${sites[env.site].selectors.btns.send}, ${
                                sites[env.site].selectors.btns.stop}`)?.getBoundingClientRect().width || 0 )
                    const totalBtnWidths = visibleBtnTypes.reduce((sum, btnType) => sum + widths[btnType], 0)
                inputArea.parentNode.style.width = `${ // expand to close gap w/ buttons
                    widths.chatbar - totalBtnWidths -( env.browser.isFF ? 60 : 43 )}px`
                inputArea.style.width = '100%' // rid h-scrollbar
            }
        }
    }

    // Define BUTTON props/functions

    const btns = {
        types: [ 'fullScreen', 'fullWindow', 'wideScreen', 'newChat' ], // right-to-left
        class: `${app.name.replace(/ /g, '-').toLowerCase()}-btn`,

        svgElems: {
            fullScreen: {
                off: [
                    dom.create.svgElem('path', { stroke: 'none', d: 'm10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z' }),
                    dom.create.svgElem('path', { stroke: 'none', d: 'm20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z' }),
                    dom.create.svgElem('path', { stroke: 'none', d: 'm24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z' }),
                    dom.create.svgElem('path',
                        { stroke: 'none', d: 'M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z' }) ],
                on: [
                    dom.create.svgElem('path', { stroke: 'none', d: 'm14,14-4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z' }),
                    dom.create.svgElem('path', { stroke: 'none', d: 'm22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z' }),
                    dom.create.svgElem('path', { stroke: 'none', d: 'm20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z' }),
                    dom.create.svgElem('path', { stroke: 'none', d: 'm10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z' }) ]
            },

            fullWin: [
                dom.create.svgElem('rect',
                    { fill: 'none', x: '3', y: '3', width: '17', height: '17', rx: '2', ry: '2' }),
                dom.create.svgElem('line', { x1: '9', y1: '3', x2: '9', y2: '21' })
            ],

            newChat: [ dom.create.svgElem('path', { stroke: 'none', d: 'M22,13h-4v4h-2v-4h-4v-2h4V7h2v4h4V13z' }) ],

            wideScreen: {
                off: [
                    dom.create.svgElem('path', { stroke: 'none', 'fill-rule': 'evenodd',
                        d: 'm28,11 0,14 -20,0 0,-14 z m-18,2 16,0 0,10 -16,0 0,-10 z' }) ],
                on: [
                    dom.create.svgElem('path', { stroke: 'none', 'fill-rule': 'evenodd',
                        d: 'm26,13 0,10 -16,0 0,-10 z m-14,2 12,0 0,6 -12,0 0,-6 z' }) ]
            }
        },

        create() {
            if (/chatgpt|openai/.test(env.site) && chatbar.get()?.nextElementSibling && !env.tallChatbar)
                env.tallChatbar = true
            const validBtnTypes = this.types.filter(type =>
                    !(type == 'fullWindow' && !sites[env.site].hasSidebar)
                 && !(type == 'wideScreen' && chatgpt.canvasIsOpen()))
            const bOffset = env.site == 'poe' ? 1.1  : env.site == 'perplexity' ? -13 : env.tallChatbar ? 31 : -8.85
            const rOffset = env.site == 'poe' ? -6.5 : env.site == 'perplexity' ? -4  : env.tallChatbar ? 48 : -0.25
            validBtnTypes.forEach(async (btnType, idx) => {
                this[btnType] = dom.create.elem('div')
                this[btnType].id = btnType + '-btn' // for toggle.tooltip()
                this[btnType].className = this.class // for update.style.tweaks()
                Object.assign(this[btnType].style, {
                    position: env.tallChatbar ? 'absolute' : 'relative', cursor: 'pointer',
                    right: `${ rOffset + idx * bOffset }px` // position left of prev button
                })
                if (env.tallChatbar) this[btnType].style.bottom = '8.85px'
                else this[btnType].style.top = `${ /chatgpt|openai/.test(env.site) ? -3.25
                                                 : env.site == 'poe' ? ( btnType == 'newChat' ? 0.25 : 3 ) : 0 }px`
                if (/chatgpt|openai|perplexity/.test(env.site)) { // assign classes + tweak styles
                    const btnSelectors = sites[env.site].selectors.btns
                    const rightBtnSelector = `${btnSelectors.send}, ${btnSelectors.voice}`
                    const rightBtn = await new Promise(resolve => {
                        const rightBtn = document.querySelector(rightBtnSelector)
                        if (rightBtn) resolve(rightBtn)
                        else new MutationObserver((_, obs) => {
                            const rightBtn = document.querySelector(rightBtnSelector)
                            if (rightBtn) { obs.disconnect() ; resolve(rightBtn) }
                        }).observe(document.body, { childList: true, subtree: true })
                    })
                    this[btnType].classList.add(...(rightBtn?.classList || []))
                    Object.assign(btns[btnType].style, { // remove dark mode overlay
                        backgroundColor: 'transparent', borderColor: 'transparent' })
                }

                // Add hover/click listeners
                this[btnType].onmouseover = this[btnType].onmouseout = toggle.tooltip
                this[btnType].onclick = () => {
                    if (btnType == 'newChat') {
                        document.querySelector(sites[env.site].selectors.btns.newChat)?.click()
                        tooltipDiv.style.opacity = 0
                    } else toggle.mode(btnType)
                }
            })
        },

        insert() {
            if (this.status?.startsWith('insert') || document.getElementById('fullScreen-btn')) return
            this.status = 'inserting' ; if (!this.wideScreen) this.create()

            // Init elems
            const chatbarDiv = chatbar.get() ; if (!chatbarDiv) return
            const btnTypesToInsert = this.types.slice().reverse() // to left-to-right for insertion order
                .filter(type => !(type == 'fullWindow' && !sites[env.site].hasSidebar)
                             && !(type == 'wideScreen' && chatgpt.canvasIsOpen()))
            const parentToInsertInto = /chatgpt|openai/.test(env.site) ? chatbarDiv.nextElementSibling || chatbarDiv
                                     : chatbarDiv.lastChild // (Perplexity Pro spam toggle or Poe Mic/Send btns) parent
            const elemToInsertBefore = /chatgpt|openai/.test(env.site) ? parentToInsertInto.lastChild
                                     : parentToInsertInto.firstChild // Pro spam toggle or Poe Mic btn
            // Insert buttons
            btnTypesToInsert.forEach(btnType => {
                this.update.svg(btnType) // update icon
                parentToInsertInto.insertBefore(this[btnType], elemToInsertBefore)
            })
            parentToInsertInto.insertBefore(tooltipDiv, elemToInsertBefore) // add tooltips
            setTimeout(() => chatbar.tweak(), 1) ; this.update.color()
            this.status = 'inserted'
        },

        remove() {
            if (!chatbar.get() || !document.getElementById('fullScreen-btn')) return
            this.types.forEach(type => this[type]?.remove()) ; tooltipDiv?.remove()
            this.status = 'missing' // ensure next btns.insert() doesn't return early
        },

        update: {
            color() {
                btns.color = (
                    /chatgpt|openai/.test(env.site) ? (
                        document.querySelector('.dark.bg-black') || env.ui.scheme == 'dark' ? 'white' : '#202123' )
                  : env.site == 'perplexity' ? (
                        document.documentElement.dataset.colorScheme == 'dark' ?
                            'oklch(var(--dark-text-color-100)/var(--tw-text-opacity))'
                          : 'oklch(var(--text-color-100)/var(--tw-text-opacity))' )
                  : 'currentColor' )

                if (btns.wideScreen?.style.fill != btns.color)
                    btns.types.forEach(type => {
                        if (btns[type]) btns[type].style.fill = btns[type].style.stroke = btns.color })
            },

            svg(mode, state = '') {
                if (!btns.wideScreen) btns.create()

                // Pick appropriate button/elements
                const [btn, ONelems, OFFelems] = (
                    mode == 'fullScreen' ? [btns.fullScreen, btns.svgElems.fullScreen.on, btns.svgElems.fullScreen.off]
                  : mode == 'fullWindow' ? [btns.fullWindow, btns.svgElems.fullWin, btns.svgElems.fullWin]
                  : mode == 'wideScreen' ? [btns.wideScreen, btns.svgElems.wideScreen.on, btns.svgElems.wideScreen.off]
                                         : [btns.newChat, btns.svgElems.newChat, btns.svgElems.newChat])
                if (!btn) return

                // Set SVG attributes
                const btnSVG = btn?.querySelector('svg') || dom.create.svgElem('svg')
                if (mode == 'fullWindow') { // stylize full-window button
                    btnSVG.setAttribute('stroke-width', '2')
                    const btnSize = /chatgpt|openai/.test(env.site) ? 17 : 18
                    btnSVG.setAttribute('height', btnSize) ; btnSVG.setAttribute('width', btnSize)
                }
                btnSVG.setAttribute('viewBox', (
                    mode == 'newChat' ? '11 6 ' : mode == 'fullWindow' ? '-2 -0.5 ' : '8 8 ' )
                + ( mode == 'newChat' ? '13 13' : mode == 'fullWindow' ? '24 24' : '20 20' )
                )
                btnSVG.style.pointerEvents = 'none' // prevent triggering tooltips twice
                btnSVG.style.height = btnSVG.style.width = ( // override button resizing
                    /chatgpt|openai/.test(env.site) ? '1.3rem' : 18 )

                // Update SVG elements
                btnSVG.textContent = ''
                const svgElems = config[mode] || state.toLowerCase() == 'on' ? ONelems : OFFelems
                svgElems.forEach(elem => btnSVG.append(elem))

                // Update SVG
                if (!btn.contains(btnSVG)) btn.append(btnSVG)
            }
        },

        getVisibleTypes() { // used in update.tooltip() + chatbar.tweak() for horizontal math
            return this.types.filter(type =>
                !(type == 'fullWindow' && !sites[env.site].hasSidebar)
             && !(type == 'wideScreen' && chatgpt.canvasIsOpen())
             && !(type == 'newChat' && config.ncbDisabled))
        },

        previewAnimations() { // used in sync.configToUI() on Button Animations toggle-on
            const btnHoverStyles = new RegExp(`.${btns.class}:hover\\s*\\{([^}]*)\\}`, 'm')
                .exec(tweaksStyle.innerText)?.[1].trim()
            btns.types.slice().reverse().forEach((btnType, idx) => {
                const btn = btns[btnType] ; if (!btn) return
                setTimeout(() => { // apply/remove fx
                    btn.style.cssText += btnHoverStyles
                    setTimeout(() => btn.style.transform = '', 150) // keep transition for smooth removal
                }, idx *75) // ...staggered @ 75ms interval
            })
        }
    }

    // Define UPDATE functions

    const update = {

        style: {

            chatbar() {
                chatbarStyle.innerText = (
                    /chatgpt|openai/.test(env.site) ? ( config.widerChatbox ? ''
                        : `main form { max-width: ${chatbar.nativeWidth}px !important ; margin: auto }` )
                  : env.site == 'poe' ? ( config.widerChatbox && config.wideScreen ?
                        '[class^=ChatPageMainFooter_footerInner] { width: 98% ; margin-right: 15px }' : '' )
                  : '' )
            },

            tweaks() {
                tweaksStyle.innerText = (
                    ( /chatgpt|openai/.test(env.site) ? (
                            '[id$=-btn]:hover { opacity: 100% !important }' // prevent chatbar btn dim on hover
                          + 'main { overflow: clip !important }' // prevent h-scrollbar...
                                // ...on sync.mode('fullWindow) => delayed chatbar.tweak()
                          + '[class^="@lg/thread"]:has(button[data-testid=close-button]),' // hide Get Plus spam banner
                                + '[class*=bottom]:has(button[data-testid=close-button]) { display: none }'
                    ) : env.site == 'perplexity' ?
                        `.${btns.class} { transition: none }` : '' )) // prevent chatbar btn animation on hover-off
                  + ( config.tcbDisabled == false ? tcbStyle : '' ) // expand text input vertically
                  + ( config.hiddenHeader ? hhStyle : '' ) // hide header
                  + ( config.hiddenFooter ? hfStyle : '' ) // hide footer
                  + `#newChat-btn { display: ${ config.ncbDisabled == true ? 'none' : 'flex' }}`
                  + ( !config.btnAnimationsDisabled ? // zoom chatbar buttons on hover
                        ( `.${btns.class}:hover {`
                            + `transform: scale(${ env.site == 'poe' ? 1.15 : 1.285}) ;`
                            + 'transition: transform 0.15s ease }' ) : ''
                    )
            },

            wideScreen() {
                wideScreenStyle.innerText = (
                    /chatgpt|openai/.test(env.site) ? (
                        '.text-base { max-width: 100% !important }' // widen outer container
                      + ( !env.tallChatbar ? '.text-base:nth-of-type(2) { max-width: 97% !important }' : '' )
                  ) : env.site == 'perplexity' ? (
                        `${sites.perplexity.selectors.header} ~ div,` // outer container
                      + `${sites.perplexity.selectors.header} ~ div > div` // inner container
                          + '{ max-width: 100% }' // ...widen them
                      + '.col-span-8 { width: 154% }' // widen inner-left container
                      + '.col-span-4 { width: 13.5% ; position: absolute ; right: 0 }' // narrow right-bar
                  ) : env.site == 'poe' ? (
                        '[class*=ChatMessagesView] { width: 100% !important }' // widen outer container
                      + '[class^=Message] { max-width: 100% !important }' ) // widen speech bubbles
                  : '' )
            }
        },

        tooltip(btnType) { // text & position
            const visibleBtnTypes = btns.getVisibleTypes()
            const ctrAddend = ( env.site == 'perplexity' ? ( location.pathname == '/' ? 94 : 105 )
                              : env.site == 'poe' ? 35 : 13 ) +25
            const spreadFactor = env.site == 'perplexity' ? 26.5 : env.site == 'poe' ? 28 : 30.55
            const iniRoffset = spreadFactor * ( visibleBtnTypes.indexOf(btnType) +1 ) + ctrAddend
                             + ( env.tallChatbar ? -2 : 4 )
            tooltipDiv.innerText = app.msgs['tooltip_' + btnType + (
                !/full|wide/i.test(btnType) ? '' : (config[btnType] ? 'OFF' : 'ON'))]
            tooltipDiv.style.right = `${ // x-pos
                iniRoffset - tooltipDiv.getBoundingClientRect().width /2 }px`
            tooltipDiv.style.bottom = ( // y-pos
                env.site == 'perplexity' ? ( location.pathname != '/' ? '58px' :
                    ( document.querySelector(sites.perplexity.selectors.btns.settings) ? 'revert-layer' : '50.5vh' ))
                                         : '50px' )
        }
    }

    // Define TOGGLE functions

    const toggle = {

        mode(mode, state = '') {
            switch (state.toUpperCase()) {
                case 'ON' : activateMode(mode) ; break
                case 'OFF' : deactivateMode(mode) ; break
                default : ( mode == 'wideScreen' ? document.head.contains(wideScreenStyle)
                          : mode == 'fullWindow' ? isFullWin() : chatgpt.isFullScreen() ) ? deactivateMode(mode)
                                                                                          : activateMode(mode)
            }

            function activateMode(mode) {
                if (mode == 'wideScreen') { document.head.append(wideScreenStyle) ; sync.mode('wideScreen') }
                else if (mode == 'fullWindow') {
                    const sidebarToggle = document.querySelector(sites[env.site].selectors.btns.sidebarToggle)
                    if (sidebarToggle) sidebarToggle.click()
                    else { document.head.append(fullWinStyle) ; sync.mode('fullWindow') }
                } else if (mode == 'fullScreen') document.documentElement.requestFullscreen()
            }

            function deactivateMode(mode) {
                if (mode == 'wideScreen') {
                    wideScreenStyle.remove() ; sync.mode('wideScreen')
                } else if (mode == 'fullWindow') {
                    const sidebarToggle = document.querySelector(sites[env.site].selectors.btns.sidebarToggle)
                    if (sidebarToggle) sidebarToggle.click()
                    else { fullWinStyle.remove() ; sync.mode('fullWindow') }
                } else if (mode == 'fullScreen') {
                    if (config.f11) modals.alert(app.msgs.alert_pressF11, `${app.msgs.alert_f11reason}.`)
                    else document.exitFullscreen().catch(
                        err => console.error(app.symbol + ' Â» Failed to exit fullscreen', err))
                }
            }
        },

        tooltip(event) {
            update.tooltip(event.currentTarget.id.replace(/-btn$/, ''))
            tooltipDiv.style.opacity = event.type == 'mouseover' ? 1 : 0
        }
    }

    // Define SYNC functions

    const sync = {

        fullerWin() {
            if (config.fullWindow && config.fullerWindows && !config.wideScreen) { // activate fuller windows
                document.head.append(wideScreenStyle) ; btns.update.svg('wideScreen', 'on')
            } else if (!config.fullWindow) { // de-activate fuller windows
                fullWinStyle.remove() // to remove style too so sidebar shows
                if (!config.wideScreen) { // disable widescreen if result of fuller window
                    wideScreenStyle.remove() ; btns.update.svg('wideScreen', 'off')
            }}
        },

        mode(mode) { // setting + icon + tooltip + chatbar
            const state = ( mode == 'wideScreen' ? !!document.getElementById('wideScreen-mode')
                          : mode == 'fullWindow' ? isFullWin()
                                                 : chatgpt.isFullScreen() )
            settings.save(mode, state) ; btns.update.svg(mode) ; update.tooltip(mode)
            if (mode == 'fullWindow') sync.fullerWin()
            if (/chatgpt|openai/.test(env.site)) setTimeout(() => chatbar.tweak(), // update inner width
                mode == 'fullWindow' && ( config.wideScreen || config.fullerWindows )
                    && config.widerChatbox ? 111 : 0) // delay if toggled to/from active WCB to avoid wrong width
            else if (env.site == 'poe' && config.widerChatbox) update.style.chatbar() // sync WCB
            notify(`${app.msgs[`mode_${mode}`]} ${app.msgs[`state_${ state ? 'on' : 'off' }`].toUpperCase()}`)
            config.modeSynced = true ; setTimeout(() => config.modeSynced = false, 100) // prevent repetition
        },

        configToUI(options) { // from toolbar menu toggles
            if (sites[env.site].hasSidebar) sync.fullerWin() // sync FW
            update.style.tweaks() // sync TCB/NCB/HH/HF/BA
            update.style.chatbar() // sync WCB
            chatbar.tweak() // update chatgpt.com chatbar inner width
            menu.refresh() // to update state symbol/suffix
            if (options?.updatedKey == 'btnAnimationsDisabled' && !config.btnAnimationsDisabled) // apply/remove fx
                // ...to visually signal location + preview fx applied by Button Animations toggle-on
                btns.previewAnimations()
        }
    }

    // Define UI functions

    function getScheme() {
        const rootElem = document.documentElement
        return env.site == 'perplexity' ? rootElem.dataset.colorScheme : rootElem.className
            || (window.matchMedia?.('(prefers-color-scheme: dark)')?.matches ? 'dark' : 'light')
    }

    function isFullWin() {
        return env.site == 'poe' ? !!document.getElementById('fullWindow-mode')
            : !sites[env.site].hasSidebar // false if sidebar non-existent
           || /\d+/.exec(getComputedStyle(document.querySelector(
                  sites[env.site].selectors.sidebar))?.width || '')[0] < 100
    }

    chatgpt.canvasIsOpen = function() {
        return document.querySelector('section.popover')?.getBoundingClientRect().top == 0 }

    // Run MAIN routine

    // Create browser TOOLBAR MENU or DISABLE SCRIPT if extension installed
    env.extensionInstalled = await Promise.race([
        new Promise(resolve => {
            (function checkExtensionInstalled() {
                if (document.documentElement.hasAttribute('chatgpt-widescreen-extension-installed')) resolve(true)
                else setTimeout(checkExtensionInstalled, 200)
            })()
        }), new Promise(resolve => setTimeout(() => resolve(false), 1500))])

    menu.register() ; if (env.extensionInstalled) return

    // Init UI props
    if (/chatgpt|openai/.test(env.site)) {
        sites[env.site].hasSidebar = await Promise.race([
            dom.elemIsLoaded(sites[env.site].selectors.btns.sidebarToggle), // true if sidebar toggle loads
            dom.elemIsLoaded(sites[env.site].selectors.btns.login).then(() => false), // false if login button loads
            new Promise(resolve => setTimeout(() => resolve(null), 3000)) // null if 3s passed
        ])
    }

    // Init FULL-MODE states
    config.fullScreen = chatgpt.isFullScreen()
    if (sites[env.site].selectors.btns.sidebarToggle) // site has native FW state
         config.fullWindow = isFullWin() // ...so match it
    else settings.load('fullWindow') // otherwise load CWM's saved state

    // Stylize ALERTS
    if (!document.getElementById('chatgpt-alert-override-style')) {
        const chatgptAlertStyle = dom.create.style()
        chatgptAlertStyle.id = 'chatgpt-alert-override-style'
        chatgptAlertStyle.innerText = (
            ( env.ui.scheme == 'dark' ? '.chatgpt-modal > div { border: 1px solid white }' : '' )
        )
        document.head.append(chatgptAlertStyle)
    }

    // Create/stylize TOOLTIP div
    const tooltipDiv = dom.create.elem('div', { class: 'cwm-tooltip' })
    document.head.append(dom.create.style('.cwm-tooltip {'
        + 'background-color: rgba(0, 0, 0, 0.71) ; padding: 5px ; border-radius: 6px ; border: 1px solid #d9d9e3 ;'
        + 'font-size: 0.85rem ; color: white ;' // font style
        + 'box-shadow: 4px 6px 16px 0 rgb(0 0 0 / 38%) ;' // drop shadow
        + 'position: absolute ; bottom: 58px ; opacity: 0 ; transition: opacity 0.1s ; z-index: 9999 ;' // visibility
        + '-webkit-user-select: none ; -moz-user-select: none ; -ms-user-select: none ; user-select: none }'
    ))

    // Create/apply general style TWEAKS
    const tweaksStyle = dom.create.style()
    const tcbStyle = ( // heighten chatbox
              /chatgpt|openai/.test(env.site) ? `div[class*=prose]:has(${sites[env.site].selectors.input})`
                                              : sites[env.site].selectors.input )
                   + '{ max-height: 68vh }'
    const hhStyle = sites[env.site].selectors.header + '{ display: none !important }' // hide header
                  + ( /chatgpt|openai/.test(env.site) ? 'main { padding-top: 12px }' : '' ) // increase top-padding
    const hfStyle = sites[env.site].selectors.footer + '{ display: none }' // hide footer

    update.style.tweaks() ; document.head.append(tweaksStyle);

    // Add STARS styles
    ['brs', 'wrs'].forEach(cssType => document.head.append(dom.create.style(GM_getResourceText(`${cssType}CSS`))))

    // Create WIDESCREEN style
    const wideScreenStyle = dom.create.style()
    wideScreenStyle.id = 'wideScreen-mode' // for sync.mode()
    if (!chatbar.get()) await dom.elemIsLoaded(sites[env.site].selectors.input)
    if (/chatgpt|openai/.test(env.site)) // store native chatbar width for Wider Chatbox style
        chatbar.nativeWidth = /\d+/.exec(getComputedStyle(document.querySelector('main form')).width)[0]
    update.style.wideScreen()

    // Create FULL-WINDOW style
    const fullWinStyle = dom.create.style()
    fullWinStyle.id = 'fullWindow-mode' // for sync.mode()
    fullWinStyle.innerText = sites[env.site].selectors.sidebar + '{ display: none }'

    // Create/append CHATBAR style
    const chatbarStyle = dom.create.style()
    update.style.chatbar() ; document.head.append(chatbarStyle)

    // Insert BUTTONS
    btns.insert()

    // Restore PREV SESSION's state
    if (config.wideScreen) toggle.mode('wideScreen', 'ON')
    if (config.fullWindow && sites[env.site].hasSidebar) {
        if (sites[env.site].selectors.btns.sidebarToggle) // site has own FW config
             sync.mode('fullWindow') // ...so sync w/ it
        else toggle.mode('fullWindow', 'on') // otherwise self-toggle
    }

    // Monitor NODE CHANGES to maintain button visibility + update colors
    let isTempChat = false, canvasWasOpen = chatgpt.canvasIsOpen()
    new MutationObserver(() => {

        // Maintain button visibility on nav
        if (!document.getElementById('fullScreen-btn') && chatbar.get() && btns.status != 'inserting') {
            btns.status = 'missing' ; btns.insert() }

        // Maintain button colors + Widescreen button visibility on snowflake chatgpt.com
        if (/chatgpt|openai/.test(env.site)) {

            // Update button colors on temp chat toggle
            const chatbarIsBlack = !!document.querySelector('div[class*=bg-black]:not([id$=-btn])')
            if (chatbarIsBlack != isTempChat) { btns.update.color() ; isTempChat = chatbarIsBlack }

            // Add/remove Widescreen button on Canvas mode toggle
            if (canvasWasOpen ^ chatgpt.canvasIsOpen()) {
                btns.remove() ; btns.create() // again for new h-offsets
                btns.insert() ; chatbar.tweak() ; canvasWasOpen = !canvasWasOpen
            }
        }
    }).observe(document[env.site == 'poe' ? 'head' : 'body'], { attributes: true, subtree: true })

    // Monitor SCHEME PREF changes to update sidebar toggle + modal colors
    new MutationObserver(handleSchemePrefChange).observe( // for site scheme pref changes
        document.documentElement, { attributes: true, attributeFilter: ['class', 'data-color-scheme'] })
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener( // for browser/system scheme pref changes
        'change', () => requestAnimationFrame(handleSchemePrefChange))
    function handleSchemePrefChange() {
        const displayedScheme = getScheme()
        if (env.ui.scheme != displayedScheme) {
            env.ui.scheme = displayedScheme ; modals.stylize() ; btns.update.color() }
    }

    // Monitor SIDEBAR to update full-window setting
    if (sites[env.site].selectors.btns.sidebarToggle && sites[env.site].hasSidebar) {
        const sidebarObserver = new MutationObserver(async () => {
            await new Promise(resolve => setTimeout(resolve, env.site == 'perplexity' ? 500 : 0))
            if ((config.fullWindow ^ isFullWin()) && !config.modeSynced) sync.mode('fullWindow')
        })
        setTimeout(() => { // delay half-sec before observing to avoid repeated toggles from node observer
            let obsTarget = document.querySelector(sites[env.site].selectors.sidebar)
            if (env.site == 'perplexity') obsTarget = obsTarget.parentNode
            sidebarObserver.observe(obsTarget, { attributes: true })
        }, 500)
    }

    // Add RESIZE LISTENER to update full screen setting/button + disable F11 flag
    window.addEventListener('resize', () => {
        const fullScreenState = chatgpt.isFullScreen()
        if (config.fullScreen && !fullScreenState) { // exiting full screen
            sync.mode('fullScreen') ; config.f11 = false }
        else if (!config.fullScreen && fullScreenState) // entering full screen
            sync.mode('fullScreen')
        if (/chatgpt|openai/.test(env.site)) chatbar.tweak() // update ChatGPT chatbar inner width
    })

    // Add KEY LISTENER to enable flag on F11 + stop generating text on ESC
    document.addEventListener('keydown', event => {
        if ((event.key == 'F11' || event.keyCode == 122) && !config.fullScreen) config.f11 = true
        else if ((event.key.startsWith('Esc') || event.keyCode == 27) && !chatgpt.isIdle()) chatgpt.stop()
    })

})()
